(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))i(u);new MutationObserver(u=>{for(const d of u)if(d.type==="childList")for(const w of d.addedNodes)w.tagName==="LINK"&&w.rel==="modulepreload"&&i(w)}).observe(document,{childList:!0,subtree:!0});function r(u){const d={};return u.integrity&&(d.integrity=u.integrity),u.referrerPolicy&&(d.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?d.credentials="include":u.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function i(u){if(u.ep)return;u.ep=!0;const d=r(u);fetch(u.href,d)}})();var Ee=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ys(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var gs={},Fe={};Fe.byteLength=bs;Fe.toByteArray=_s;Fe.fromByteArray=As;var qt=[],$t=[],xs=typeof Uint8Array<"u"?Uint8Array:Array,or="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var pe=0,ms=or.length;pe<ms;++pe)qt[pe]=or[pe],$t[or.charCodeAt(pe)]=pe;$t[45]=62;$t[95]=63;function jn(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");r===-1&&(r=t);var i=r===t?0:4-r%4;return[r,i]}function bs(e){var t=jn(e),r=t[0],i=t[1];return(r+i)*3/4-i}function Es(e,t,r){return(t+r)*3/4-r}function _s(e){var t,r=jn(e),i=r[0],u=r[1],d=new xs(Es(e,i,u)),w=0,c=u>0?i-4:i,b;for(b=0;b<c;b+=4)t=$t[e.charCodeAt(b)]<<18|$t[e.charCodeAt(b+1)]<<12|$t[e.charCodeAt(b+2)]<<6|$t[e.charCodeAt(b+3)],d[w++]=t>>16&255,d[w++]=t>>8&255,d[w++]=t&255;return u===2&&(t=$t[e.charCodeAt(b)]<<2|$t[e.charCodeAt(b+1)]>>4,d[w++]=t&255),u===1&&(t=$t[e.charCodeAt(b)]<<10|$t[e.charCodeAt(b+1)]<<4|$t[e.charCodeAt(b+2)]>>2,d[w++]=t>>8&255,d[w++]=t&255),d}function Is(e){return qt[e>>18&63]+qt[e>>12&63]+qt[e>>6&63]+qt[e&63]}function Bs(e,t,r){for(var i,u=[],d=t;d<r;d+=3)i=(e[d]<<16&16711680)+(e[d+1]<<8&65280)+(e[d+2]&255),u.push(Is(i));return u.join("")}function As(e){for(var t,r=e.length,i=r%3,u=[],d=16383,w=0,c=r-i;w<c;w+=d)u.push(Bs(e,w,w+d>c?c:w+d));return i===1?(t=e[r-1],u.push(qt[t>>2]+qt[t<<4&63]+"==")):i===2&&(t=(e[r-2]<<8)+e[r-1],u.push(qt[t>>10]+qt[t>>4&63]+qt[t<<2&63]+"=")),u.join("")}var ve={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */ve.read=function(e,t,r,i,u){var d,w,c=u*8-i-1,b=(1<<c)-1,A=b>>1,U=-7,R=r?u-1:0,D=r?-1:1,O=e[t+R];for(R+=D,d=O&(1<<-U)-1,O>>=-U,U+=c;U>0;d=d*256+e[t+R],R+=D,U-=8);for(w=d&(1<<-U)-1,d>>=-U,U+=i;U>0;w=w*256+e[t+R],R+=D,U-=8);if(d===0)d=1-A;else{if(d===b)return w?NaN:(O?-1:1)*(1/0);w=w+Math.pow(2,i),d=d-A}return(O?-1:1)*w*Math.pow(2,d-i)};ve.write=function(e,t,r,i,u,d){var w,c,b,A=d*8-u-1,U=(1<<A)-1,R=U>>1,D=u===23?Math.pow(2,-24)-Math.pow(2,-77):0,O=i?0:d-1,q=i?1:-1,V=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(c=isNaN(t)?1:0,w=U):(w=Math.floor(Math.log(t)/Math.LN2),t*(b=Math.pow(2,-w))<1&&(w--,b*=2),w+R>=1?t+=D/b:t+=D*Math.pow(2,1-R),t*b>=2&&(w++,b/=2),w+R>=U?(c=0,w=U):w+R>=1?(c=(t*b-1)*Math.pow(2,u),w=w+R):(c=t*Math.pow(2,R-1)*Math.pow(2,u),w=0));u>=8;e[r+O]=c&255,O+=q,c/=256,u-=8);for(w=w<<u|c,A+=u;A>0;e[r+O]=w&255,O+=q,w/=256,A-=8);e[r+O-q]|=V*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){const t=Fe,r=ve,i=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=c,e.SlowBuffer=at,e.INSPECT_MAX_BYTES=50;const u=2147483647;e.kMaxLength=u,c.TYPED_ARRAY_SUPPORT=d(),!c.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function d(){try{const h=new Uint8Array(1),o={foo:function(){return 42}};return Object.setPrototypeOf(o,Uint8Array.prototype),Object.setPrototypeOf(h,o),h.foo()===42}catch{return!1}}Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}});function w(h){if(h>u)throw new RangeError('The value "'+h+'" is invalid for option "size"');const o=new Uint8Array(h);return Object.setPrototypeOf(o,c.prototype),o}function c(h,o,a){if(typeof h=="number"){if(typeof o=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return R(h)}return b(h,o,a)}c.poolSize=8192;function b(h,o,a){if(typeof h=="string")return D(h,o);if(ArrayBuffer.isView(h))return q(h);if(h==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof h);if(F(h,ArrayBuffer)||h&&F(h.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(F(h,SharedArrayBuffer)||h&&F(h.buffer,SharedArrayBuffer)))return V(h,o,a);if(typeof h=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const m=h.valueOf&&h.valueOf();if(m!=null&&m!==h)return c.from(m,o,a);const B=lt(h);if(B)return B;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof h[Symbol.toPrimitive]=="function")return c.from(h[Symbol.toPrimitive]("string"),o,a);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof h)}c.from=function(h,o,a){return b(h,o,a)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array);function A(h){if(typeof h!="number")throw new TypeError('"size" argument must be of type number');if(h<0)throw new RangeError('The value "'+h+'" is invalid for option "size"')}function U(h,o,a){return A(h),h<=0?w(h):o!==void 0?typeof a=="string"?w(h).fill(o,a):w(h).fill(o):w(h)}c.alloc=function(h,o,a){return U(h,o,a)};function R(h){return A(h),w(h<0?0:Et(h)|0)}c.allocUnsafe=function(h){return R(h)},c.allocUnsafeSlow=function(h){return R(h)};function D(h,o){if((typeof o!="string"||o==="")&&(o="utf8"),!c.isEncoding(o))throw new TypeError("Unknown encoding: "+o);const a=K(h,o)|0;let m=w(a);const B=m.write(h,o);return B!==a&&(m=m.slice(0,B)),m}function O(h){const o=h.length<0?0:Et(h.length)|0,a=w(o);for(let m=0;m<o;m+=1)a[m]=h[m]&255;return a}function q(h){if(F(h,Uint8Array)){const o=new Uint8Array(h);return V(o.buffer,o.byteOffset,o.byteLength)}return O(h)}function V(h,o,a){if(o<0||h.byteLength<o)throw new RangeError('"offset" is outside of buffer bounds');if(h.byteLength<o+(a||0))throw new RangeError('"length" is outside of buffer bounds');let m;return o===void 0&&a===void 0?m=new Uint8Array(h):a===void 0?m=new Uint8Array(h,o):m=new Uint8Array(h,o,a),Object.setPrototypeOf(m,c.prototype),m}function lt(h){if(c.isBuffer(h)){const o=Et(h.length)|0,a=w(o);return a.length===0||h.copy(a,0,0,o),a}if(h.length!==void 0)return typeof h.length!="number"||P(h.length)?w(0):O(h);if(h.type==="Buffer"&&Array.isArray(h.data))return O(h.data)}function Et(h){if(h>=u)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+u.toString(16)+" bytes");return h|0}function at(h){return+h!=h&&(h=0),c.alloc(+h)}c.isBuffer=function(o){return o!=null&&o._isBuffer===!0&&o!==c.prototype},c.compare=function(o,a){if(F(o,Uint8Array)&&(o=c.from(o,o.offset,o.byteLength)),F(a,Uint8Array)&&(a=c.from(a,a.offset,a.byteLength)),!c.isBuffer(o)||!c.isBuffer(a))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(o===a)return 0;let m=o.length,B=a.length;for(let L=0,v=Math.min(m,B);L<v;++L)if(o[L]!==a[L]){m=o[L],B=a[L];break}return m<B?-1:B<m?1:0},c.isEncoding=function(o){switch(String(o).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(o,a){if(!Array.isArray(o))throw new TypeError('"list" argument must be an Array of Buffers');if(o.length===0)return c.alloc(0);let m;if(a===void 0)for(a=0,m=0;m<o.length;++m)a+=o[m].length;const B=c.allocUnsafe(a);let L=0;for(m=0;m<o.length;++m){let v=o[m];if(F(v,Uint8Array))L+v.length>B.length?(c.isBuffer(v)||(v=c.from(v)),v.copy(B,L)):Uint8Array.prototype.set.call(B,v,L);else if(c.isBuffer(v))v.copy(B,L);else throw new TypeError('"list" argument must be an Array of Buffers');L+=v.length}return B};function K(h,o){if(c.isBuffer(h))return h.length;if(ArrayBuffer.isView(h)||F(h,ArrayBuffer))return h.byteLength;if(typeof h!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof h);const a=h.length,m=arguments.length>2&&arguments[2]===!0;if(!m&&a===0)return 0;let B=!1;for(;;)switch(o){case"ascii":case"latin1":case"binary":return a;case"utf8":case"utf-8":return n(h).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return a*2;case"hex":return a>>>1;case"base64":return p(h).length;default:if(B)return m?-1:n(h).length;o=(""+o).toLowerCase(),B=!0}}c.byteLength=K;function Ut(h,o,a){let m=!1;if((o===void 0||o<0)&&(o=0),o>this.length||((a===void 0||a>this.length)&&(a=this.length),a<=0)||(a>>>=0,o>>>=0,a<=o))return"";for(h||(h="utf8");;)switch(h){case"hex":return j(this,o,a);case"utf8":case"utf-8":return St(this,o,a);case"ascii":return M(this,o,a);case"latin1":case"binary":return k(this,o,a);case"base64":return ft(this,o,a);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Q(this,o,a);default:if(m)throw new TypeError("Unknown encoding: "+h);h=(h+"").toLowerCase(),m=!0}}c.prototype._isBuffer=!0;function ut(h,o,a){const m=h[o];h[o]=h[a],h[a]=m}c.prototype.swap16=function(){const o=this.length;if(o%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let a=0;a<o;a+=2)ut(this,a,a+1);return this},c.prototype.swap32=function(){const o=this.length;if(o%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let a=0;a<o;a+=4)ut(this,a,a+3),ut(this,a+1,a+2);return this},c.prototype.swap64=function(){const o=this.length;if(o%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let a=0;a<o;a+=8)ut(this,a,a+7),ut(this,a+1,a+6),ut(this,a+2,a+5),ut(this,a+3,a+4);return this},c.prototype.toString=function(){const o=this.length;return o===0?"":arguments.length===0?St(this,0,o):Ut.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(o){if(!c.isBuffer(o))throw new TypeError("Argument must be a Buffer");return this===o?!0:c.compare(this,o)===0},c.prototype.inspect=function(){let o="";const a=e.INSPECT_MAX_BYTES;return o=this.toString("hex",0,a).replace(/(.{2})/g,"$1 ").trim(),this.length>a&&(o+=" ... "),"<Buffer "+o+">"},i&&(c.prototype[i]=c.prototype.inspect),c.prototype.compare=function(o,a,m,B,L){if(F(o,Uint8Array)&&(o=c.from(o,o.offset,o.byteLength)),!c.isBuffer(o))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof o);if(a===void 0&&(a=0),m===void 0&&(m=o?o.length:0),B===void 0&&(B=0),L===void 0&&(L=this.length),a<0||m>o.length||B<0||L>this.length)throw new RangeError("out of range index");if(B>=L&&a>=m)return 0;if(B>=L)return-1;if(a>=m)return 1;if(a>>>=0,m>>>=0,B>>>=0,L>>>=0,this===o)return 0;let v=L-B,et=m-a;const ht=Math.min(v,et),st=this.slice(B,L),tt=o.slice(a,m);for(let bt=0;bt<ht;++bt)if(st[bt]!==tt[bt]){v=st[bt],et=tt[bt];break}return v<et?-1:et<v?1:0};function X(h,o,a,m,B){if(h.length===0)return-1;if(typeof a=="string"?(m=a,a=0):a>2147483647?a=2147483647:a<-2147483648&&(a=-2147483648),a=+a,P(a)&&(a=B?0:h.length-1),a<0&&(a=h.length+a),a>=h.length){if(B)return-1;a=h.length-1}else if(a<0)if(B)a=0;else return-1;if(typeof o=="string"&&(o=c.from(o,m)),c.isBuffer(o))return o.length===0?-1:J(h,o,a,m,B);if(typeof o=="number")return o=o&255,typeof Uint8Array.prototype.indexOf=="function"?B?Uint8Array.prototype.indexOf.call(h,o,a):Uint8Array.prototype.lastIndexOf.call(h,o,a):J(h,[o],a,m,B);throw new TypeError("val must be string, number or Buffer")}function J(h,o,a,m,B){let L=1,v=h.length,et=o.length;if(m!==void 0&&(m=String(m).toLowerCase(),m==="ucs2"||m==="ucs-2"||m==="utf16le"||m==="utf-16le")){if(h.length<2||o.length<2)return-1;L=2,v/=2,et/=2,a/=2}function ht(tt,bt){return L===1?tt[bt]:tt.readUInt16BE(bt*L)}let st;if(B){let tt=-1;for(st=a;st<v;st++)if(ht(h,st)===ht(o,tt===-1?0:st-tt)){if(tt===-1&&(tt=st),st-tt+1===et)return tt*L}else tt!==-1&&(st-=st-tt),tt=-1}else for(a+et>v&&(a=v-et),st=a;st>=0;st--){let tt=!0;for(let bt=0;bt<et;bt++)if(ht(h,st+bt)!==ht(o,bt)){tt=!1;break}if(tt)return st}return-1}c.prototype.includes=function(o,a,m){return this.indexOf(o,a,m)!==-1},c.prototype.indexOf=function(o,a,m){return X(this,o,a,m,!0)},c.prototype.lastIndexOf=function(o,a,m){return X(this,o,a,m,!1)};function nt(h,o,a,m){a=Number(a)||0;const B=h.length-a;m?(m=Number(m),m>B&&(m=B)):m=B;const L=o.length;m>L/2&&(m=L/2);let v;for(v=0;v<m;++v){const et=parseInt(o.substr(v*2,2),16);if(P(et))return v;h[a+v]=et}return v}function it(h,o,a,m){return E(n(o,h.length-a),h,a,m)}function C(h,o,a,m){return E(s(o),h,a,m)}function xt(h,o,a,m){return E(p(o),h,a,m)}function ct(h,o,a,m){return E(l(o,h.length-a),h,a,m)}c.prototype.write=function(o,a,m,B){if(a===void 0)B="utf8",m=this.length,a=0;else if(m===void 0&&typeof a=="string")B=a,m=this.length,a=0;else if(isFinite(a))a=a>>>0,isFinite(m)?(m=m>>>0,B===void 0&&(B="utf8")):(B=m,m=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const L=this.length-a;if((m===void 0||m>L)&&(m=L),o.length>0&&(m<0||a<0)||a>this.length)throw new RangeError("Attempt to write outside buffer bounds");B||(B="utf8");let v=!1;for(;;)switch(B){case"hex":return nt(this,o,a,m);case"utf8":case"utf-8":return it(this,o,a,m);case"ascii":case"latin1":case"binary":return C(this,o,a,m);case"base64":return xt(this,o,a,m);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ct(this,o,a,m);default:if(v)throw new TypeError("Unknown encoding: "+B);B=(""+B).toLowerCase(),v=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ft(h,o,a){return o===0&&a===h.length?t.fromByteArray(h):t.fromByteArray(h.slice(o,a))}function St(h,o,a){a=Math.min(h.length,a);const m=[];let B=o;for(;B<a;){const L=h[B];let v=null,et=L>239?4:L>223?3:L>191?2:1;if(B+et<=a){let ht,st,tt,bt;switch(et){case 1:L<128&&(v=L);break;case 2:ht=h[B+1],(ht&192)===128&&(bt=(L&31)<<6|ht&63,bt>127&&(v=bt));break;case 3:ht=h[B+1],st=h[B+2],(ht&192)===128&&(st&192)===128&&(bt=(L&15)<<12|(ht&63)<<6|st&63,bt>2047&&(bt<55296||bt>57343)&&(v=bt));break;case 4:ht=h[B+1],st=h[B+2],tt=h[B+3],(ht&192)===128&&(st&192)===128&&(tt&192)===128&&(bt=(L&15)<<18|(ht&63)<<12|(st&63)<<6|tt&63,bt>65535&&bt<1114112&&(v=bt))}}v===null?(v=65533,et=1):v>65535&&(v-=65536,m.push(v>>>10&1023|55296),v=56320|v&1023),m.push(v),B+=et}return Z(m)}const _t=4096;function Z(h){const o=h.length;if(o<=_t)return String.fromCharCode.apply(String,h);let a="",m=0;for(;m<o;)a+=String.fromCharCode.apply(String,h.slice(m,m+=_t));return a}function M(h,o,a){let m="";a=Math.min(h.length,a);for(let B=o;B<a;++B)m+=String.fromCharCode(h[B]&127);return m}function k(h,o,a){let m="";a=Math.min(h.length,a);for(let B=o;B<a;++B)m+=String.fromCharCode(h[B]);return m}function j(h,o,a){const m=h.length;(!o||o<0)&&(o=0),(!a||a<0||a>m)&&(a=m);let B="";for(let L=o;L<a;++L)B+=z[h[L]];return B}function Q(h,o,a){const m=h.slice(o,a);let B="";for(let L=0;L<m.length-1;L+=2)B+=String.fromCharCode(m[L]+m[L+1]*256);return B}c.prototype.slice=function(o,a){const m=this.length;o=~~o,a=a===void 0?m:~~a,o<0?(o+=m,o<0&&(o=0)):o>m&&(o=m),a<0?(a+=m,a<0&&(a=0)):a>m&&(a=m),a<o&&(a=o);const B=this.subarray(o,a);return Object.setPrototypeOf(B,c.prototype),B};function $(h,o,a){if(h%1!==0||h<0)throw new RangeError("offset is not uint");if(h+o>a)throw new RangeError("Trying to access beyond buffer length")}c.prototype.readUintLE=c.prototype.readUIntLE=function(o,a,m){o=o>>>0,a=a>>>0,m||$(o,a,this.length);let B=this[o],L=1,v=0;for(;++v<a&&(L*=256);)B+=this[o+v]*L;return B},c.prototype.readUintBE=c.prototype.readUIntBE=function(o,a,m){o=o>>>0,a=a>>>0,m||$(o,a,this.length);let B=this[o+--a],L=1;for(;a>0&&(L*=256);)B+=this[o+--a]*L;return B},c.prototype.readUint8=c.prototype.readUInt8=function(o,a){return o=o>>>0,a||$(o,1,this.length),this[o]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(o,a){return o=o>>>0,a||$(o,2,this.length),this[o]|this[o+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(o,a){return o=o>>>0,a||$(o,2,this.length),this[o]<<8|this[o+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(o,a){return o=o>>>0,a||$(o,4,this.length),(this[o]|this[o+1]<<8|this[o+2]<<16)+this[o+3]*16777216},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(o,a){return o=o>>>0,a||$(o,4,this.length),this[o]*16777216+(this[o+1]<<16|this[o+2]<<8|this[o+3])},c.prototype.readBigUInt64LE=W(function(o){o=o>>>0,T(o,"offset");const a=this[o],m=this[o+7];(a===void 0||m===void 0)&&S(o,this.length-8);const B=a+this[++o]*2**8+this[++o]*2**16+this[++o]*2**24,L=this[++o]+this[++o]*2**8+this[++o]*2**16+m*2**24;return BigInt(B)+(BigInt(L)<<BigInt(32))}),c.prototype.readBigUInt64BE=W(function(o){o=o>>>0,T(o,"offset");const a=this[o],m=this[o+7];(a===void 0||m===void 0)&&S(o,this.length-8);const B=a*2**24+this[++o]*2**16+this[++o]*2**8+this[++o],L=this[++o]*2**24+this[++o]*2**16+this[++o]*2**8+m;return(BigInt(B)<<BigInt(32))+BigInt(L)}),c.prototype.readIntLE=function(o,a,m){o=o>>>0,a=a>>>0,m||$(o,a,this.length);let B=this[o],L=1,v=0;for(;++v<a&&(L*=256);)B+=this[o+v]*L;return L*=128,B>=L&&(B-=Math.pow(2,8*a)),B},c.prototype.readIntBE=function(o,a,m){o=o>>>0,a=a>>>0,m||$(o,a,this.length);let B=a,L=1,v=this[o+--B];for(;B>0&&(L*=256);)v+=this[o+--B]*L;return L*=128,v>=L&&(v-=Math.pow(2,8*a)),v},c.prototype.readInt8=function(o,a){return o=o>>>0,a||$(o,1,this.length),this[o]&128?(255-this[o]+1)*-1:this[o]},c.prototype.readInt16LE=function(o,a){o=o>>>0,a||$(o,2,this.length);const m=this[o]|this[o+1]<<8;return m&32768?m|4294901760:m},c.prototype.readInt16BE=function(o,a){o=o>>>0,a||$(o,2,this.length);const m=this[o+1]|this[o]<<8;return m&32768?m|4294901760:m},c.prototype.readInt32LE=function(o,a){return o=o>>>0,a||$(o,4,this.length),this[o]|this[o+1]<<8|this[o+2]<<16|this[o+3]<<24},c.prototype.readInt32BE=function(o,a){return o=o>>>0,a||$(o,4,this.length),this[o]<<24|this[o+1]<<16|this[o+2]<<8|this[o+3]},c.prototype.readBigInt64LE=W(function(o){o=o>>>0,T(o,"offset");const a=this[o],m=this[o+7];(a===void 0||m===void 0)&&S(o,this.length-8);const B=this[o+4]+this[o+5]*2**8+this[o+6]*2**16+(m<<24);return(BigInt(B)<<BigInt(32))+BigInt(a+this[++o]*2**8+this[++o]*2**16+this[++o]*2**24)}),c.prototype.readBigInt64BE=W(function(o){o=o>>>0,T(o,"offset");const a=this[o],m=this[o+7];(a===void 0||m===void 0)&&S(o,this.length-8);const B=(a<<24)+this[++o]*2**16+this[++o]*2**8+this[++o];return(BigInt(B)<<BigInt(32))+BigInt(this[++o]*2**24+this[++o]*2**16+this[++o]*2**8+m)}),c.prototype.readFloatLE=function(o,a){return o=o>>>0,a||$(o,4,this.length),r.read(this,o,!0,23,4)},c.prototype.readFloatBE=function(o,a){return o=o>>>0,a||$(o,4,this.length),r.read(this,o,!1,23,4)},c.prototype.readDoubleLE=function(o,a){return o=o>>>0,a||$(o,8,this.length),r.read(this,o,!0,52,8)},c.prototype.readDoubleBE=function(o,a){return o=o>>>0,a||$(o,8,this.length),r.read(this,o,!1,52,8)};function H(h,o,a,m,B,L){if(!c.isBuffer(h))throw new TypeError('"buffer" argument must be a Buffer instance');if(o>B||o<L)throw new RangeError('"value" argument is out of bounds');if(a+m>h.length)throw new RangeError("Index out of range")}c.prototype.writeUintLE=c.prototype.writeUIntLE=function(o,a,m,B){if(o=+o,a=a>>>0,m=m>>>0,!B){const et=Math.pow(2,8*m)-1;H(this,o,a,m,et,0)}let L=1,v=0;for(this[a]=o&255;++v<m&&(L*=256);)this[a+v]=o/L&255;return a+m},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(o,a,m,B){if(o=+o,a=a>>>0,m=m>>>0,!B){const et=Math.pow(2,8*m)-1;H(this,o,a,m,et,0)}let L=m-1,v=1;for(this[a+L]=o&255;--L>=0&&(v*=256);)this[a+L]=o/v&255;return a+m},c.prototype.writeUint8=c.prototype.writeUInt8=function(o,a,m){return o=+o,a=a>>>0,m||H(this,o,a,1,255,0),this[a]=o&255,a+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(o,a,m){return o=+o,a=a>>>0,m||H(this,o,a,2,65535,0),this[a]=o&255,this[a+1]=o>>>8,a+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(o,a,m){return o=+o,a=a>>>0,m||H(this,o,a,2,65535,0),this[a]=o>>>8,this[a+1]=o&255,a+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(o,a,m){return o=+o,a=a>>>0,m||H(this,o,a,4,4294967295,0),this[a+3]=o>>>24,this[a+2]=o>>>16,this[a+1]=o>>>8,this[a]=o&255,a+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(o,a,m){return o=+o,a=a>>>0,m||H(this,o,a,4,4294967295,0),this[a]=o>>>24,this[a+1]=o>>>16,this[a+2]=o>>>8,this[a+3]=o&255,a+4};function yt(h,o,a,m,B){_(o,m,B,h,a,7);let L=Number(o&BigInt(4294967295));h[a++]=L,L=L>>8,h[a++]=L,L=L>>8,h[a++]=L,L=L>>8,h[a++]=L;let v=Number(o>>BigInt(32)&BigInt(4294967295));return h[a++]=v,v=v>>8,h[a++]=v,v=v>>8,h[a++]=v,v=v>>8,h[a++]=v,a}function g(h,o,a,m,B){_(o,m,B,h,a,7);let L=Number(o&BigInt(4294967295));h[a+7]=L,L=L>>8,h[a+6]=L,L=L>>8,h[a+5]=L,L=L>>8,h[a+4]=L;let v=Number(o>>BigInt(32)&BigInt(4294967295));return h[a+3]=v,v=v>>8,h[a+2]=v,v=v>>8,h[a+1]=v,v=v>>8,h[a]=v,a+8}c.prototype.writeBigUInt64LE=W(function(o,a=0){return yt(this,o,a,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeBigUInt64BE=W(function(o,a=0){return g(this,o,a,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeIntLE=function(o,a,m,B){if(o=+o,a=a>>>0,!B){const ht=Math.pow(2,8*m-1);H(this,o,a,m,ht-1,-ht)}let L=0,v=1,et=0;for(this[a]=o&255;++L<m&&(v*=256);)o<0&&et===0&&this[a+L-1]!==0&&(et=1),this[a+L]=(o/v>>0)-et&255;return a+m},c.prototype.writeIntBE=function(o,a,m,B){if(o=+o,a=a>>>0,!B){const ht=Math.pow(2,8*m-1);H(this,o,a,m,ht-1,-ht)}let L=m-1,v=1,et=0;for(this[a+L]=o&255;--L>=0&&(v*=256);)o<0&&et===0&&this[a+L+1]!==0&&(et=1),this[a+L]=(o/v>>0)-et&255;return a+m},c.prototype.writeInt8=function(o,a,m){return o=+o,a=a>>>0,m||H(this,o,a,1,127,-128),o<0&&(o=255+o+1),this[a]=o&255,a+1},c.prototype.writeInt16LE=function(o,a,m){return o=+o,a=a>>>0,m||H(this,o,a,2,32767,-32768),this[a]=o&255,this[a+1]=o>>>8,a+2},c.prototype.writeInt16BE=function(o,a,m){return o=+o,a=a>>>0,m||H(this,o,a,2,32767,-32768),this[a]=o>>>8,this[a+1]=o&255,a+2},c.prototype.writeInt32LE=function(o,a,m){return o=+o,a=a>>>0,m||H(this,o,a,4,2147483647,-2147483648),this[a]=o&255,this[a+1]=o>>>8,this[a+2]=o>>>16,this[a+3]=o>>>24,a+4},c.prototype.writeInt32BE=function(o,a,m){return o=+o,a=a>>>0,m||H(this,o,a,4,2147483647,-2147483648),o<0&&(o=4294967295+o+1),this[a]=o>>>24,this[a+1]=o>>>16,this[a+2]=o>>>8,this[a+3]=o&255,a+4},c.prototype.writeBigInt64LE=W(function(o,a=0){return yt(this,o,a,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),c.prototype.writeBigInt64BE=W(function(o,a=0){return g(this,o,a,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function dt(h,o,a,m,B,L){if(a+m>h.length)throw new RangeError("Index out of range");if(a<0)throw new RangeError("Index out of range")}function mt(h,o,a,m,B){return o=+o,a=a>>>0,B||dt(h,o,a,4),r.write(h,o,a,m,23,4),a+4}c.prototype.writeFloatLE=function(o,a,m){return mt(this,o,a,!0,m)},c.prototype.writeFloatBE=function(o,a,m){return mt(this,o,a,!1,m)};function Tt(h,o,a,m,B){return o=+o,a=a>>>0,B||dt(h,o,a,8),r.write(h,o,a,m,52,8),a+8}c.prototype.writeDoubleLE=function(o,a,m){return Tt(this,o,a,!0,m)},c.prototype.writeDoubleBE=function(o,a,m){return Tt(this,o,a,!1,m)},c.prototype.copy=function(o,a,m,B){if(!c.isBuffer(o))throw new TypeError("argument should be a Buffer");if(m||(m=0),!B&&B!==0&&(B=this.length),a>=o.length&&(a=o.length),a||(a=0),B>0&&B<m&&(B=m),B===m||o.length===0||this.length===0)return 0;if(a<0)throw new RangeError("targetStart out of bounds");if(m<0||m>=this.length)throw new RangeError("Index out of range");if(B<0)throw new RangeError("sourceEnd out of bounds");B>this.length&&(B=this.length),o.length-a<B-m&&(B=o.length-a+m);const L=B-m;return this===o&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(a,m,B):Uint8Array.prototype.set.call(o,this.subarray(m,B),a),L},c.prototype.fill=function(o,a,m,B){if(typeof o=="string"){if(typeof a=="string"?(B=a,a=0,m=this.length):typeof m=="string"&&(B=m,m=this.length),B!==void 0&&typeof B!="string")throw new TypeError("encoding must be a string");if(typeof B=="string"&&!c.isEncoding(B))throw new TypeError("Unknown encoding: "+B);if(o.length===1){const v=o.charCodeAt(0);(B==="utf8"&&v<128||B==="latin1")&&(o=v)}}else typeof o=="number"?o=o&255:typeof o=="boolean"&&(o=Number(o));if(a<0||this.length<a||this.length<m)throw new RangeError("Out of range index");if(m<=a)return this;a=a>>>0,m=m===void 0?this.length:m>>>0,o||(o=0);let L;if(typeof o=="number")for(L=a;L<m;++L)this[L]=o;else{const v=c.isBuffer(o)?o:c.from(o,B),et=v.length;if(et===0)throw new TypeError('The value "'+o+'" is invalid for argument "value"');for(L=0;L<m-a;++L)this[L+a]=v[L%et]}return this};const G={};function Y(h,o,a){G[h]=class extends a{constructor(){super(),Object.defineProperty(this,"message",{value:o.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${h}]`,this.stack,delete this.name}get code(){return h}set code(B){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:B,writable:!0})}toString(){return`${this.name} [${h}]: ${this.message}`}}}Y("ERR_BUFFER_OUT_OF_BOUNDS",function(h){return h?`${h} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Y("ERR_INVALID_ARG_TYPE",function(h,o){return`The "${h}" argument must be of type number. Received type ${typeof o}`},TypeError),Y("ERR_OUT_OF_RANGE",function(h,o,a){let m=`The value of "${h}" is out of range.`,B=a;return Number.isInteger(a)&&Math.abs(a)>2**32?B=y(String(a)):typeof a=="bigint"&&(B=String(a),(a>BigInt(2)**BigInt(32)||a<-(BigInt(2)**BigInt(32)))&&(B=y(B)),B+="n"),m+=` It must be ${o}. Received ${B}`,m},RangeError);function y(h){let o="",a=h.length;const m=h[0]==="-"?1:0;for(;a>=m+4;a-=3)o=`_${h.slice(a-3,a)}${o}`;return`${h.slice(0,a)}${o}`}function x(h,o,a){T(o,"offset"),(h[o]===void 0||h[o+a]===void 0)&&S(o,h.length-(a+1))}function _(h,o,a,m,B,L){if(h>a||h<o){const v=typeof o=="bigint"?"n":"";let et;throw o===0||o===BigInt(0)?et=`>= 0${v} and < 2${v} ** ${(L+1)*8}${v}`:et=`>= -(2${v} ** ${(L+1)*8-1}${v}) and < 2 ** ${(L+1)*8-1}${v}`,new G.ERR_OUT_OF_RANGE("value",et,h)}x(m,B,L)}function T(h,o){if(typeof h!="number")throw new G.ERR_INVALID_ARG_TYPE(o,"number",h)}function S(h,o,a){throw Math.floor(h)!==h?(T(h,a),new G.ERR_OUT_OF_RANGE("offset","an integer",h)):o<0?new G.ERR_BUFFER_OUT_OF_BOUNDS:new G.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${o}`,h)}const N=/[^+/0-9A-Za-z-_]/g;function f(h){if(h=h.split("=")[0],h=h.trim().replace(N,""),h.length<2)return"";for(;h.length%4!==0;)h=h+"=";return h}function n(h,o){o=o||1/0;let a;const m=h.length;let B=null;const L=[];for(let v=0;v<m;++v){if(a=h.charCodeAt(v),a>55295&&a<57344){if(!B){if(a>56319){(o-=3)>-1&&L.push(239,191,189);continue}else if(v+1===m){(o-=3)>-1&&L.push(239,191,189);continue}B=a;continue}if(a<56320){(o-=3)>-1&&L.push(239,191,189),B=a;continue}a=(B-55296<<10|a-56320)+65536}else B&&(o-=3)>-1&&L.push(239,191,189);if(B=null,a<128){if((o-=1)<0)break;L.push(a)}else if(a<2048){if((o-=2)<0)break;L.push(a>>6|192,a&63|128)}else if(a<65536){if((o-=3)<0)break;L.push(a>>12|224,a>>6&63|128,a&63|128)}else if(a<1114112){if((o-=4)<0)break;L.push(a>>18|240,a>>12&63|128,a>>6&63|128,a&63|128)}else throw new Error("Invalid code point")}return L}function s(h){const o=[];for(let a=0;a<h.length;++a)o.push(h.charCodeAt(a)&255);return o}function l(h,o){let a,m,B;const L=[];for(let v=0;v<h.length&&!((o-=2)<0);++v)a=h.charCodeAt(v),m=a>>8,B=a%256,L.push(B),L.push(m);return L}function p(h){return t.toByteArray(f(h))}function E(h,o,a,m){let B;for(B=0;B<m&&!(B+a>=o.length||B>=h.length);++B)o[B+a]=h[B];return B}function F(h,o){return h instanceof o||h!=null&&h.constructor!=null&&h.constructor.name!=null&&h.constructor.name===o.name}function P(h){return h!==h}const z=function(){const h="0123456789abcdef",o=new Array(256);for(let a=0;a<16;++a){const m=a*16;for(let B=0;B<16;++B)o[m+B]=h[a]+h[B]}return o}();function W(h){return typeof BigInt>"u"?rt:h}function rt(){throw new Error("BigInt not supported")}})(gs);var un;(function(e){e[e.SysFatal=1]="SysFatal",e[e.SysTransient=2]="SysTransient",e[e.DestinationInvalid=3]="DestinationInvalid",e[e.CanisterReject=4]="CanisterReject",e[e.CanisterError=5]="CanisterError"})(un||(un={}));const qe="abcdefghijklmnopqrstuvwxyz234567",_e=Object.create(null);for(let e=0;e<qe.length;e++)_e[qe[e]]=e;_e[0]=_e.o;_e[1]=_e.i;function Ss(e){let t=0,r=0,i="";function u(d){return t<0?r|=d>>-t:r=d<<t&248,t>3?(t-=8,1):(t<4&&(i+=qe[r>>3],t+=5),0)}for(let d=0;d<e.length;)d+=u(e[d]);return i+(t<0?qe[r>>3]:"")}function Ts(e){let t=0,r=0;const i=new Uint8Array(e.length*4/3|0);let u=0;function d(w){let c=_e[w.toLowerCase()];if(c===void 0)throw new Error(`Invalid character: ${JSON.stringify(w)}`);c<<=3,r|=c>>>t,t+=5,t>=8&&(i[u++]=r,t-=8,t>0?r=c<<5-t&255:r=0)}for(const w of e)d(w);return i.slice(0,u)}const Us=new Uint32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]);function Ns(e){const t=new Uint8Array(e);let r=-1;for(let i=0;i<t.length;i++){const d=(t[i]^r)&255;r=Us[d]^r>>>8}return(r^-1)>>>0}function Fs(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function Zn(e,...t){if(!Fs(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function cn(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function vs(e,t){Zn(e);const r=t.outputLen;if(e.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ar=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),Yt=(e,t)=>e<<32-t|e>>>t;function Ls(e){if(typeof e!="string")throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array(new TextEncoder().encode(e))}function Qn(e){return typeof e=="string"&&(e=Ls(e)),Zn(e),e}let Rs=class{clone(){return this._cloneInto()}};function ti(e){const t=i=>e().update(Qn(i)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function Os(e,t,r,i){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,i);const u=BigInt(32),d=BigInt(4294967295),w=Number(r>>u&d),c=Number(r&d),b=i?4:0,A=i?0:4;e.setUint32(t+b,w,i),e.setUint32(t+A,c,i)}const Ds=(e,t,r)=>e&t^~e&r,Ps=(e,t,r)=>e&t^e&r^t&r;let Ms=class extends Rs{constructor(t,r,i,u){super(),this.blockLen=t,this.outputLen=r,this.padOffset=i,this.isLE=u,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=ar(this.buffer)}update(t){cn(this);const{view:r,buffer:i,blockLen:u}=this;t=Qn(t);const d=t.length;for(let w=0;w<d;){const c=Math.min(u-this.pos,d-w);if(c===u){const b=ar(t);for(;u<=d-w;w+=u)this.process(b,w);continue}i.set(t.subarray(w,w+c),this.pos),this.pos+=c,w+=c,this.pos===u&&(this.process(r,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){cn(this),vs(t,this),this.finished=!0;const{buffer:r,view:i,blockLen:u,isLE:d}=this;let{pos:w}=this;r[w++]=128,this.buffer.subarray(w).fill(0),this.padOffset>u-w&&(this.process(i,0),w=0);for(let R=w;R<u;R++)r[R]=0;Os(i,u-8,BigInt(this.length*8),d),this.process(i,0);const c=ar(t),b=this.outputLen;if(b%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const A=b/4,U=this.get();if(A>U.length)throw new Error("_sha2: outputLen bigger than state");for(let R=0;R<A;R++)c.setUint32(4*R,U[R],d)}digest(){const{buffer:t,outputLen:r}=this;this.digestInto(t);const i=t.slice(0,r);return this.destroy(),i}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:r,buffer:i,length:u,finished:d,destroyed:w,pos:c}=this;return t.length=u,t.pos=c,t.finished=d,t.destroyed=w,u%r&&t.buffer.set(i),t}};const Cs=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Qt=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),te=new Uint32Array(64);class ei extends Ms{constructor(){super(64,32,8,!1),this.A=Qt[0]|0,this.B=Qt[1]|0,this.C=Qt[2]|0,this.D=Qt[3]|0,this.E=Qt[4]|0,this.F=Qt[5]|0,this.G=Qt[6]|0,this.H=Qt[7]|0}get(){const{A:t,B:r,C:i,D:u,E:d,F:w,G:c,H:b}=this;return[t,r,i,u,d,w,c,b]}set(t,r,i,u,d,w,c,b){this.A=t|0,this.B=r|0,this.C=i|0,this.D=u|0,this.E=d|0,this.F=w|0,this.G=c|0,this.H=b|0}process(t,r){for(let R=0;R<16;R++,r+=4)te[R]=t.getUint32(r,!1);for(let R=16;R<64;R++){const D=te[R-15],O=te[R-2],q=Yt(D,7)^Yt(D,18)^D>>>3,V=Yt(O,17)^Yt(O,19)^O>>>10;te[R]=V+te[R-7]+q+te[R-16]|0}let{A:i,B:u,C:d,D:w,E:c,F:b,G:A,H:U}=this;for(let R=0;R<64;R++){const D=Yt(c,6)^Yt(c,11)^Yt(c,25),O=U+D+Ds(c,b,A)+Cs[R]+te[R]|0,V=(Yt(i,2)^Yt(i,13)^Yt(i,22))+Ps(i,u,d)|0;U=A,A=b,b=c,c=w+O|0,w=d,d=u,u=i,i=O+V|0}i=i+this.A|0,u=u+this.B|0,d=d+this.C|0,w=w+this.D|0,c=c+this.E|0,b=b+this.F|0,A=A+this.G|0,U=U+this.H|0,this.set(i,u,d,w,c,b,A,U)}roundClean(){te.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class ks extends ei{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}const $s=ti(()=>new ei),Gs=ti(()=>new ks);function Hs(e){return Gs.create().update(new Uint8Array(e)).digest()}const Pe="__principal__",zs=2,fn=4,Ks="aaaaa-aa",Ys=e=>{var t;return new Uint8Array(((t=e.match(/.{1,2}/g))!==null&&t!==void 0?t:[]).map(r=>parseInt(r,16)))},Vs=e=>e.reduce((t,r)=>t+r.toString(16).padStart(2,"0"),"");class ue{constructor(t){this._arr=t,this._isPrincipal=!0}static anonymous(){return new this(new Uint8Array([fn]))}static managementCanister(){return this.fromHex(Ks)}static selfAuthenticating(t){const r=Hs(t);return new this(new Uint8Array([...r,zs]))}static from(t){if(typeof t=="string")return ue.fromText(t);if(Object.getPrototypeOf(t)===Uint8Array.prototype)return new ue(t);if(typeof t=="object"&&t!==null&&t._isPrincipal===!0)return new ue(t._arr);throw new Error(`Impossible to convert ${JSON.stringify(t)} to Principal.`)}static fromHex(t){return new this(Ys(t))}static fromText(t){let r=t;if(t.includes(Pe)){const w=JSON.parse(t);Pe in w&&(r=w[Pe])}const i=r.toLowerCase().replace(/-/g,"");let u=Ts(i);u=u.slice(4,u.length);const d=new this(u);if(d.toText()!==r)throw new Error(`Principal "${d.toText()}" does not have a valid checksum (original value "${r}" may not be a valid Principal ID).`);return d}static fromUint8Array(t){return new this(t)}isAnonymous(){return this._arr.byteLength===1&&this._arr[0]===fn}toUint8Array(){return this._arr}toHex(){return Vs(this._arr).toUpperCase()}toText(){const t=new ArrayBuffer(4);new DataView(t).setUint32(0,Ns(this._arr));const i=new Uint8Array(t),u=Uint8Array.from(this._arr),d=new Uint8Array([...i,...u]),c=Ss(d).match(/.{1,5}/g);if(!c)throw new Error;return c.join("-")}toString(){return this.toText()}toJSON(){return{[Pe]:this.toText()}}compareTo(t){for(let r=0;r<Math.min(this._arr.length,t._arr.length);r++){if(this._arr[r]<t._arr[r])return"lt";if(this._arr[r]>t._arr[r])return"gt"}return this._arr.length<t._arr.length?"lt":this._arr.length>t._arr.length?"gt":"eq"}ltEq(t){const r=this.compareTo(t);return r=="lt"||r=="eq"}gtEq(t){const r=this.compareTo(t);return r=="gt"||r=="eq"}}function Ne(...e){const t=new Uint8Array(e.reduce((i,u)=>i+u.byteLength,0));let r=0;for(const i of e)t.set(new Uint8Array(i),r),r+=i.byteLength;return t.buffer}function be(e){return[...new Uint8Array(e)].map(t=>t.toString(16).padStart(2,"0")).join("")}const Ws=new RegExp(/^[0-9a-fA-F]+$/);function ce(e){if(!Ws.test(e))throw new Error("Invalid hexadecimal string.");const t=[...e].reduce((r,i,u)=>(r[u/2|0]=(r[u/2|0]||"")+i,r),[]).map(r=>Number.parseInt(r,16));return new Uint8Array(t).buffer}function ri(e,t){if(e.byteLength!==t.byteLength)return e.byteLength-t.byteLength;const r=new Uint8Array(e),i=new Uint8Array(t);for(let u=0;u<r.length;u++)if(r[u]!==i[u])return r[u]-i[u];return 0}function ni(e,t){return ri(e,t)===0}function Ue(e){return new DataView(e.buffer,e.byteOffset,e.byteLength).buffer}function ii(e){return e instanceof Uint8Array?Ue(e):e instanceof ArrayBuffer?e:Array.isArray(e)?Ue(new Uint8Array(e)):"buffer"in e?ii(e.buffer):Ue(new Uint8Array(e))}class $r{constructor(t,r=(t==null?void 0:t.byteLength)||0){this._buffer=Sr(t||new ArrayBuffer(0)),this._view=new Uint8Array(this._buffer,0,r)}get buffer(){return Sr(this._view.slice())}get byteLength(){return this._view.byteLength}read(t){const r=this._view.subarray(0,t);return this._view=this._view.subarray(t),r.slice().buffer}readUint8(){const t=this._view[0];return this._view=this._view.subarray(1),t}write(t){const r=new Uint8Array(t),i=this._view.byteLength;this._view.byteOffset+this._view.byteLength+r.byteLength>=this._buffer.byteLength?this.alloc(r.byteLength):this._view=new Uint8Array(this._buffer,this._view.byteOffset,this._view.byteLength+r.byteLength),this._view.set(r,i)}get end(){return this._view.byteLength===0}alloc(t){const r=new ArrayBuffer((this._buffer.byteLength+t)*1.2|0),i=new Uint8Array(r,0,this._view.byteLength+t);i.set(this._view),this._buffer=r,this._view=i}}function ur(e){return new DataView(e.buffer,e.byteOffset,e.byteLength).buffer}function Sr(e){return e instanceof Uint8Array?ur(e):e instanceof ArrayBuffer?e:Array.isArray(e)?ur(new Uint8Array(e)):"buffer"in e?Sr(e.buffer):ur(new Uint8Array(e))}function si(){throw new Error("unexpected end of buffer")}function qs(e,t){return e.byteLength<t&&si(),e.read(t)}function hn(e){const t=e.readUint8();return t===void 0&&si(),t}function ln(e){if(typeof e=="number"&&(e=BigInt(e)),e<BigInt(0))throw new Error("Cannot leb encode negative values.");const t=(e===BigInt(0)?0:Math.ceil(Math.log2(Number(e))))+1,r=new $r(new ArrayBuffer(t),0);for(;;){const i=Number(e&BigInt(127));if(e/=BigInt(128),e===BigInt(0)){r.write(new Uint8Array([i]));break}else r.write(new Uint8Array([i|128]))}return r.buffer}function Gr(e){typeof e=="number"&&(e=BigInt(e));const t=e<BigInt(0);t&&(e=-e-BigInt(1));const r=(e===BigInt(0)?0:Math.ceil(Math.log2(Number(e))))+1,i=new $r(new ArrayBuffer(r),0);for(;;){const d=u(e);if(e/=BigInt(128),t&&e===BigInt(0)&&d&64||!t&&e===BigInt(0)&&!(d&64)){i.write(new Uint8Array([d]));break}else i.write(new Uint8Array([d|128]))}function u(d){const w=d%BigInt(128);return Number(t?BigInt(128)-w-BigInt(1):w)}return i.buffer}function Xs(e,t){if(BigInt(e)<BigInt(0))throw new Error("Cannot write negative values.");return oi(e,t)}function oi(e,t){e=BigInt(e);const r=new $r(new ArrayBuffer(Math.min(1,t)),0);let i=0,u=BigInt(256),d=BigInt(0),w=Number(e%u);for(r.write(new Uint8Array([w]));++i<t;)e<0&&d===BigInt(0)&&w!==0&&(d=BigInt(1)),w=Number((e/u-d)%BigInt(256)),r.write(new Uint8Array([w])),u*=BigInt(256);return r.buffer}function ai(e,t){let r=BigInt(hn(e)),i=BigInt(1),u=0;for(;++u<t;){i*=BigInt(256);const d=BigInt(hn(e));r=r+i*d}return r}function Js(e,t){let r=ai(e,t);const i=BigInt(2)**(BigInt(8)*BigInt(t-1)+BigInt(7));return r>=i&&(r-=i*BigInt(2)),r}function Tr(e){const t=BigInt(e);if(e<0)throw new RangeError("Input must be non-negative");return BigInt(1)<<t}const dn=400;class ui{display(){return this.name}valueToString(t){return Le(t)}buildTypeTable(t){t.has(this)||this._buildTypeTableImpl(t)}}class Hr extends ui{checkType(t){if(this.name!==t.name)throw new Error(`type mismatch: type on the wire ${t.name}, expect type ${this.name}`);return t}_buildTypeTableImpl(t){}}class js extends ui{checkType(t){if(t instanceof rr){const r=t.getType();if(typeof r>"u")throw new Error("type mismatch with uninitialized type");return r}throw new Error(`type mismatch: type on the wire ${t.name}, expect type ${this.name}`)}encodeType(t){return t.indexOf(this.name)}}class ci extends Hr{constructor(t){if(super(),this._bits=t,t!==32&&t!==64)throw new Error("not a valid float type")}accept(t,r){return t.visitFloat(this,r)}covariant(t){if(typeof t=="number"||t instanceof Number)return!0;throw new Error(`Invalid ${this.display()} argument: ${Le(t)}`)}encodeValue(t){const r=new ArrayBuffer(this._bits/8),i=new DataView(r);return this._bits===32?i.setFloat32(0,t,!0):i.setFloat64(0,t,!0),r}encodeType(){const t=this._bits===32?-13:-14;return Gr(t)}decodeValue(t,r){this.checkType(r);const i=qs(t,this._bits/8),u=new DataView(i);return this._bits===32?u.getFloat32(0,!0):u.getFloat64(0,!0)}get name(){return"float"+this._bits}valueToString(t){return t.toString()}}class tr extends Hr{constructor(t){super(),this._bits=t}accept(t,r){return t.visitFixedInt(this,r)}covariant(t){const r=Tr(this._bits-1)*BigInt(-1),i=Tr(this._bits-1)-BigInt(1);let u=!1;if(typeof t=="bigint")u=t>=r&&t<=i;else if(Number.isInteger(t)){const d=BigInt(t);u=d>=r&&d<=i}else u=!1;if(u)return!0;throw new Error(`Invalid ${this.display()} argument: ${Le(t)}`)}encodeValue(t){return oi(t,this._bits/8)}encodeType(){const t=Math.log2(this._bits)-3;return Gr(-9-t)}decodeValue(t,r){this.checkType(r);const i=Js(t,this._bits/8);return this._bits<=32?Number(i):i}get name(){return`int${this._bits}`}valueToString(t){return t.toString()}}class er extends Hr{constructor(t){super(),this._bits=t}accept(t,r){return t.visitFixedNat(this,r)}covariant(t){const r=Tr(this._bits);let i=!1;if(typeof t=="bigint"&&t>=BigInt(0)?i=t<r:Number.isInteger(t)&&t>=0?i=BigInt(t)<r:i=!1,i)return!0;throw new Error(`Invalid ${this.display()} argument: ${Le(t)}`)}encodeValue(t){return Xs(t,this._bits/8)}encodeType(){const t=Math.log2(this._bits)-3;return Gr(-5-t)}decodeValue(t,r){this.checkType(r);const i=ai(t,this._bits/8);return this._bits<=32?Number(i):i}get name(){return`nat${this._bits}`}valueToString(t){return t.toString()}}class rr extends js{constructor(){super(...arguments),this._id=rr._counter++,this._type=void 0}accept(t,r){if(!this._type)throw Error("Recursive type uninitialized.");return t.visitRec(this,this._type,r)}fill(t){this._type=t}getType(){return this._type}covariant(t){if(this._type&&this._type.covariant(t))return!0;throw new Error(`Invalid ${this.display()} argument: ${Le(t)}`)}encodeValue(t){if(!this._type)throw Error("Recursive type uninitialized.");return this._type.encodeValue(t)}_buildTypeTableImpl(t){if(!this._type)throw Error("Recursive type uninitialized.");t.add(this,new Uint8Array([])),this._type.buildTypeTable(t),t.merge(this,this._type.name)}decodeValue(t,r){if(!this._type)throw Error("Recursive type uninitialized.");return this._type.decodeValue(t,r)}get name(){return`rec_${this._id}`}display(){if(!this._type)throw Error("Recursive type uninitialized.");return`μ${this.name}.${this._type.name}`}valueToString(t){if(!this._type)throw Error("Recursive type uninitialized.");return this._type.valueToString(t)}}rr._counter=0;function Le(e){const t=JSON.stringify(e,(r,i)=>typeof i=="bigint"?`BigInt(${i})`:i);return t&&t.length>dn?t.substring(0,dn-3)+"...":t}new ci(32);new ci(64);new tr(8);new tr(16);new tr(32);new tr(64);new er(8);new er(16);new er(32);new er(64);var fi={},Re={};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){var t=Fe,r=ve,i=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=c,e.SlowBuffer=at,e.INSPECT_MAX_BYTES=50;var u=2147483647;e.kMaxLength=u,c.TYPED_ARRAY_SUPPORT=d(),!c.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function d(){try{var f=new Uint8Array(1),n={foo:function(){return 42}};return Object.setPrototypeOf(n,Uint8Array.prototype),Object.setPrototypeOf(f,n),f.foo()===42}catch{return!1}}Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}});function w(f){if(f>u)throw new RangeError('The value "'+f+'" is invalid for option "size"');var n=new Uint8Array(f);return Object.setPrototypeOf(n,c.prototype),n}function c(f,n,s){if(typeof f=="number"){if(typeof n=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return R(f)}return b(f,n,s)}c.poolSize=8192;function b(f,n,s){if(typeof f=="string")return D(f,n);if(ArrayBuffer.isView(f))return q(f);if(f==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof f);if(T(f,ArrayBuffer)||f&&T(f.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(T(f,SharedArrayBuffer)||f&&T(f.buffer,SharedArrayBuffer)))return V(f,n,s);if(typeof f=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var l=f.valueOf&&f.valueOf();if(l!=null&&l!==f)return c.from(l,n,s);var p=lt(f);if(p)return p;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof f[Symbol.toPrimitive]=="function")return c.from(f[Symbol.toPrimitive]("string"),n,s);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof f)}c.from=function(f,n,s){return b(f,n,s)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array);function A(f){if(typeof f!="number")throw new TypeError('"size" argument must be of type number');if(f<0)throw new RangeError('The value "'+f+'" is invalid for option "size"')}function U(f,n,s){return A(f),f<=0?w(f):n!==void 0?typeof s=="string"?w(f).fill(n,s):w(f).fill(n):w(f)}c.alloc=function(f,n,s){return U(f,n,s)};function R(f){return A(f),w(f<0?0:Et(f)|0)}c.allocUnsafe=function(f){return R(f)},c.allocUnsafeSlow=function(f){return R(f)};function D(f,n){if((typeof n!="string"||n==="")&&(n="utf8"),!c.isEncoding(n))throw new TypeError("Unknown encoding: "+n);var s=K(f,n)|0,l=w(s),p=l.write(f,n);return p!==s&&(l=l.slice(0,p)),l}function O(f){for(var n=f.length<0?0:Et(f.length)|0,s=w(n),l=0;l<n;l+=1)s[l]=f[l]&255;return s}function q(f){if(T(f,Uint8Array)){var n=new Uint8Array(f);return V(n.buffer,n.byteOffset,n.byteLength)}return O(f)}function V(f,n,s){if(n<0||f.byteLength<n)throw new RangeError('"offset" is outside of buffer bounds');if(f.byteLength<n+(s||0))throw new RangeError('"length" is outside of buffer bounds');var l;return n===void 0&&s===void 0?l=new Uint8Array(f):s===void 0?l=new Uint8Array(f,n):l=new Uint8Array(f,n,s),Object.setPrototypeOf(l,c.prototype),l}function lt(f){if(c.isBuffer(f)){var n=Et(f.length)|0,s=w(n);return s.length===0||f.copy(s,0,0,n),s}if(f.length!==void 0)return typeof f.length!="number"||S(f.length)?w(0):O(f);if(f.type==="Buffer"&&Array.isArray(f.data))return O(f.data)}function Et(f){if(f>=u)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+u.toString(16)+" bytes");return f|0}function at(f){return+f!=f&&(f=0),c.alloc(+f)}c.isBuffer=function(n){return n!=null&&n._isBuffer===!0&&n!==c.prototype},c.compare=function(n,s){if(T(n,Uint8Array)&&(n=c.from(n,n.offset,n.byteLength)),T(s,Uint8Array)&&(s=c.from(s,s.offset,s.byteLength)),!c.isBuffer(n)||!c.isBuffer(s))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(n===s)return 0;for(var l=n.length,p=s.length,E=0,F=Math.min(l,p);E<F;++E)if(n[E]!==s[E]){l=n[E],p=s[E];break}return l<p?-1:p<l?1:0},c.isEncoding=function(n){switch(String(n).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(n,s){if(!Array.isArray(n))throw new TypeError('"list" argument must be an Array of Buffers');if(n.length===0)return c.alloc(0);var l;if(s===void 0)for(s=0,l=0;l<n.length;++l)s+=n[l].length;var p=c.allocUnsafe(s),E=0;for(l=0;l<n.length;++l){var F=n[l];if(T(F,Uint8Array))E+F.length>p.length?c.from(F).copy(p,E):Uint8Array.prototype.set.call(p,F,E);else if(c.isBuffer(F))F.copy(p,E);else throw new TypeError('"list" argument must be an Array of Buffers');E+=F.length}return p};function K(f,n){if(c.isBuffer(f))return f.length;if(ArrayBuffer.isView(f)||T(f,ArrayBuffer))return f.byteLength;if(typeof f!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof f);var s=f.length,l=arguments.length>2&&arguments[2]===!0;if(!l&&s===0)return 0;for(var p=!1;;)switch(n){case"ascii":case"latin1":case"binary":return s;case"utf8":case"utf-8":return G(f).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return s*2;case"hex":return s>>>1;case"base64":return x(f).length;default:if(p)return l?-1:G(f).length;n=(""+n).toLowerCase(),p=!0}}c.byteLength=K;function Ut(f,n,s){var l=!1;if((n===void 0||n<0)&&(n=0),n>this.length||((s===void 0||s>this.length)&&(s=this.length),s<=0)||(s>>>=0,n>>>=0,s<=n))return"";for(f||(f="utf8");;)switch(f){case"hex":return j(this,n,s);case"utf8":case"utf-8":return St(this,n,s);case"ascii":return M(this,n,s);case"latin1":case"binary":return k(this,n,s);case"base64":return ft(this,n,s);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Q(this,n,s);default:if(l)throw new TypeError("Unknown encoding: "+f);f=(f+"").toLowerCase(),l=!0}}c.prototype._isBuffer=!0;function ut(f,n,s){var l=f[n];f[n]=f[s],f[s]=l}c.prototype.swap16=function(){var n=this.length;if(n%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var s=0;s<n;s+=2)ut(this,s,s+1);return this},c.prototype.swap32=function(){var n=this.length;if(n%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var s=0;s<n;s+=4)ut(this,s,s+3),ut(this,s+1,s+2);return this},c.prototype.swap64=function(){var n=this.length;if(n%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var s=0;s<n;s+=8)ut(this,s,s+7),ut(this,s+1,s+6),ut(this,s+2,s+5),ut(this,s+3,s+4);return this},c.prototype.toString=function(){var n=this.length;return n===0?"":arguments.length===0?St(this,0,n):Ut.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(n){if(!c.isBuffer(n))throw new TypeError("Argument must be a Buffer");return this===n?!0:c.compare(this,n)===0},c.prototype.inspect=function(){var n="",s=e.INSPECT_MAX_BYTES;return n=this.toString("hex",0,s).replace(/(.{2})/g,"$1 ").trim(),this.length>s&&(n+=" ... "),"<Buffer "+n+">"},i&&(c.prototype[i]=c.prototype.inspect),c.prototype.compare=function(n,s,l,p,E){if(T(n,Uint8Array)&&(n=c.from(n,n.offset,n.byteLength)),!c.isBuffer(n))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof n);if(s===void 0&&(s=0),l===void 0&&(l=n?n.length:0),p===void 0&&(p=0),E===void 0&&(E=this.length),s<0||l>n.length||p<0||E>this.length)throw new RangeError("out of range index");if(p>=E&&s>=l)return 0;if(p>=E)return-1;if(s>=l)return 1;if(s>>>=0,l>>>=0,p>>>=0,E>>>=0,this===n)return 0;for(var F=E-p,P=l-s,z=Math.min(F,P),W=this.slice(p,E),rt=n.slice(s,l),h=0;h<z;++h)if(W[h]!==rt[h]){F=W[h],P=rt[h];break}return F<P?-1:P<F?1:0};function X(f,n,s,l,p){if(f.length===0)return-1;if(typeof s=="string"?(l=s,s=0):s>2147483647?s=2147483647:s<-2147483648&&(s=-2147483648),s=+s,S(s)&&(s=p?0:f.length-1),s<0&&(s=f.length+s),s>=f.length){if(p)return-1;s=f.length-1}else if(s<0)if(p)s=0;else return-1;if(typeof n=="string"&&(n=c.from(n,l)),c.isBuffer(n))return n.length===0?-1:J(f,n,s,l,p);if(typeof n=="number")return n=n&255,typeof Uint8Array.prototype.indexOf=="function"?p?Uint8Array.prototype.indexOf.call(f,n,s):Uint8Array.prototype.lastIndexOf.call(f,n,s):J(f,[n],s,l,p);throw new TypeError("val must be string, number or Buffer")}function J(f,n,s,l,p){var E=1,F=f.length,P=n.length;if(l!==void 0&&(l=String(l).toLowerCase(),l==="ucs2"||l==="ucs-2"||l==="utf16le"||l==="utf-16le")){if(f.length<2||n.length<2)return-1;E=2,F/=2,P/=2,s/=2}function z(a,m){return E===1?a[m]:a.readUInt16BE(m*E)}var W;if(p){var rt=-1;for(W=s;W<F;W++)if(z(f,W)===z(n,rt===-1?0:W-rt)){if(rt===-1&&(rt=W),W-rt+1===P)return rt*E}else rt!==-1&&(W-=W-rt),rt=-1}else for(s+P>F&&(s=F-P),W=s;W>=0;W--){for(var h=!0,o=0;o<P;o++)if(z(f,W+o)!==z(n,o)){h=!1;break}if(h)return W}return-1}c.prototype.includes=function(n,s,l){return this.indexOf(n,s,l)!==-1},c.prototype.indexOf=function(n,s,l){return X(this,n,s,l,!0)},c.prototype.lastIndexOf=function(n,s,l){return X(this,n,s,l,!1)};function nt(f,n,s,l){s=Number(s)||0;var p=f.length-s;l?(l=Number(l),l>p&&(l=p)):l=p;var E=n.length;l>E/2&&(l=E/2);for(var F=0;F<l;++F){var P=parseInt(n.substr(F*2,2),16);if(S(P))return F;f[s+F]=P}return F}function it(f,n,s,l){return _(G(n,f.length-s),f,s,l)}function C(f,n,s,l){return _(Y(n),f,s,l)}function xt(f,n,s,l){return _(x(n),f,s,l)}function ct(f,n,s,l){return _(y(n,f.length-s),f,s,l)}c.prototype.write=function(n,s,l,p){if(s===void 0)p="utf8",l=this.length,s=0;else if(l===void 0&&typeof s=="string")p=s,l=this.length,s=0;else if(isFinite(s))s=s>>>0,isFinite(l)?(l=l>>>0,p===void 0&&(p="utf8")):(p=l,l=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var E=this.length-s;if((l===void 0||l>E)&&(l=E),n.length>0&&(l<0||s<0)||s>this.length)throw new RangeError("Attempt to write outside buffer bounds");p||(p="utf8");for(var F=!1;;)switch(p){case"hex":return nt(this,n,s,l);case"utf8":case"utf-8":return it(this,n,s,l);case"ascii":case"latin1":case"binary":return C(this,n,s,l);case"base64":return xt(this,n,s,l);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ct(this,n,s,l);default:if(F)throw new TypeError("Unknown encoding: "+p);p=(""+p).toLowerCase(),F=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ft(f,n,s){return n===0&&s===f.length?t.fromByteArray(f):t.fromByteArray(f.slice(n,s))}function St(f,n,s){s=Math.min(f.length,s);for(var l=[],p=n;p<s;){var E=f[p],F=null,P=E>239?4:E>223?3:E>191?2:1;if(p+P<=s){var z,W,rt,h;switch(P){case 1:E<128&&(F=E);break;case 2:z=f[p+1],(z&192)===128&&(h=(E&31)<<6|z&63,h>127&&(F=h));break;case 3:z=f[p+1],W=f[p+2],(z&192)===128&&(W&192)===128&&(h=(E&15)<<12|(z&63)<<6|W&63,h>2047&&(h<55296||h>57343)&&(F=h));break;case 4:z=f[p+1],W=f[p+2],rt=f[p+3],(z&192)===128&&(W&192)===128&&(rt&192)===128&&(h=(E&15)<<18|(z&63)<<12|(W&63)<<6|rt&63,h>65535&&h<1114112&&(F=h))}}F===null?(F=65533,P=1):F>65535&&(F-=65536,l.push(F>>>10&1023|55296),F=56320|F&1023),l.push(F),p+=P}return Z(l)}var _t=4096;function Z(f){var n=f.length;if(n<=_t)return String.fromCharCode.apply(String,f);for(var s="",l=0;l<n;)s+=String.fromCharCode.apply(String,f.slice(l,l+=_t));return s}function M(f,n,s){var l="";s=Math.min(f.length,s);for(var p=n;p<s;++p)l+=String.fromCharCode(f[p]&127);return l}function k(f,n,s){var l="";s=Math.min(f.length,s);for(var p=n;p<s;++p)l+=String.fromCharCode(f[p]);return l}function j(f,n,s){var l=f.length;(!n||n<0)&&(n=0),(!s||s<0||s>l)&&(s=l);for(var p="",E=n;E<s;++E)p+=N[f[E]];return p}function Q(f,n,s){for(var l=f.slice(n,s),p="",E=0;E<l.length-1;E+=2)p+=String.fromCharCode(l[E]+l[E+1]*256);return p}c.prototype.slice=function(n,s){var l=this.length;n=~~n,s=s===void 0?l:~~s,n<0?(n+=l,n<0&&(n=0)):n>l&&(n=l),s<0?(s+=l,s<0&&(s=0)):s>l&&(s=l),s<n&&(s=n);var p=this.subarray(n,s);return Object.setPrototypeOf(p,c.prototype),p};function $(f,n,s){if(f%1!==0||f<0)throw new RangeError("offset is not uint");if(f+n>s)throw new RangeError("Trying to access beyond buffer length")}c.prototype.readUintLE=c.prototype.readUIntLE=function(n,s,l){n=n>>>0,s=s>>>0,l||$(n,s,this.length);for(var p=this[n],E=1,F=0;++F<s&&(E*=256);)p+=this[n+F]*E;return p},c.prototype.readUintBE=c.prototype.readUIntBE=function(n,s,l){n=n>>>0,s=s>>>0,l||$(n,s,this.length);for(var p=this[n+--s],E=1;s>0&&(E*=256);)p+=this[n+--s]*E;return p},c.prototype.readUint8=c.prototype.readUInt8=function(n,s){return n=n>>>0,s||$(n,1,this.length),this[n]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(n,s){return n=n>>>0,s||$(n,2,this.length),this[n]|this[n+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(n,s){return n=n>>>0,s||$(n,2,this.length),this[n]<<8|this[n+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(n,s){return n=n>>>0,s||$(n,4,this.length),(this[n]|this[n+1]<<8|this[n+2]<<16)+this[n+3]*16777216},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(n,s){return n=n>>>0,s||$(n,4,this.length),this[n]*16777216+(this[n+1]<<16|this[n+2]<<8|this[n+3])},c.prototype.readIntLE=function(n,s,l){n=n>>>0,s=s>>>0,l||$(n,s,this.length);for(var p=this[n],E=1,F=0;++F<s&&(E*=256);)p+=this[n+F]*E;return E*=128,p>=E&&(p-=Math.pow(2,8*s)),p},c.prototype.readIntBE=function(n,s,l){n=n>>>0,s=s>>>0,l||$(n,s,this.length);for(var p=s,E=1,F=this[n+--p];p>0&&(E*=256);)F+=this[n+--p]*E;return E*=128,F>=E&&(F-=Math.pow(2,8*s)),F},c.prototype.readInt8=function(n,s){return n=n>>>0,s||$(n,1,this.length),this[n]&128?(255-this[n]+1)*-1:this[n]},c.prototype.readInt16LE=function(n,s){n=n>>>0,s||$(n,2,this.length);var l=this[n]|this[n+1]<<8;return l&32768?l|4294901760:l},c.prototype.readInt16BE=function(n,s){n=n>>>0,s||$(n,2,this.length);var l=this[n+1]|this[n]<<8;return l&32768?l|4294901760:l},c.prototype.readInt32LE=function(n,s){return n=n>>>0,s||$(n,4,this.length),this[n]|this[n+1]<<8|this[n+2]<<16|this[n+3]<<24},c.prototype.readInt32BE=function(n,s){return n=n>>>0,s||$(n,4,this.length),this[n]<<24|this[n+1]<<16|this[n+2]<<8|this[n+3]},c.prototype.readFloatLE=function(n,s){return n=n>>>0,s||$(n,4,this.length),r.read(this,n,!0,23,4)},c.prototype.readFloatBE=function(n,s){return n=n>>>0,s||$(n,4,this.length),r.read(this,n,!1,23,4)},c.prototype.readDoubleLE=function(n,s){return n=n>>>0,s||$(n,8,this.length),r.read(this,n,!0,52,8)},c.prototype.readDoubleBE=function(n,s){return n=n>>>0,s||$(n,8,this.length),r.read(this,n,!1,52,8)};function H(f,n,s,l,p,E){if(!c.isBuffer(f))throw new TypeError('"buffer" argument must be a Buffer instance');if(n>p||n<E)throw new RangeError('"value" argument is out of bounds');if(s+l>f.length)throw new RangeError("Index out of range")}c.prototype.writeUintLE=c.prototype.writeUIntLE=function(n,s,l,p){if(n=+n,s=s>>>0,l=l>>>0,!p){var E=Math.pow(2,8*l)-1;H(this,n,s,l,E,0)}var F=1,P=0;for(this[s]=n&255;++P<l&&(F*=256);)this[s+P]=n/F&255;return s+l},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(n,s,l,p){if(n=+n,s=s>>>0,l=l>>>0,!p){var E=Math.pow(2,8*l)-1;H(this,n,s,l,E,0)}var F=l-1,P=1;for(this[s+F]=n&255;--F>=0&&(P*=256);)this[s+F]=n/P&255;return s+l},c.prototype.writeUint8=c.prototype.writeUInt8=function(n,s,l){return n=+n,s=s>>>0,l||H(this,n,s,1,255,0),this[s]=n&255,s+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(n,s,l){return n=+n,s=s>>>0,l||H(this,n,s,2,65535,0),this[s]=n&255,this[s+1]=n>>>8,s+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(n,s,l){return n=+n,s=s>>>0,l||H(this,n,s,2,65535,0),this[s]=n>>>8,this[s+1]=n&255,s+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(n,s,l){return n=+n,s=s>>>0,l||H(this,n,s,4,4294967295,0),this[s+3]=n>>>24,this[s+2]=n>>>16,this[s+1]=n>>>8,this[s]=n&255,s+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(n,s,l){return n=+n,s=s>>>0,l||H(this,n,s,4,4294967295,0),this[s]=n>>>24,this[s+1]=n>>>16,this[s+2]=n>>>8,this[s+3]=n&255,s+4},c.prototype.writeIntLE=function(n,s,l,p){if(n=+n,s=s>>>0,!p){var E=Math.pow(2,8*l-1);H(this,n,s,l,E-1,-E)}var F=0,P=1,z=0;for(this[s]=n&255;++F<l&&(P*=256);)n<0&&z===0&&this[s+F-1]!==0&&(z=1),this[s+F]=(n/P>>0)-z&255;return s+l},c.prototype.writeIntBE=function(n,s,l,p){if(n=+n,s=s>>>0,!p){var E=Math.pow(2,8*l-1);H(this,n,s,l,E-1,-E)}var F=l-1,P=1,z=0;for(this[s+F]=n&255;--F>=0&&(P*=256);)n<0&&z===0&&this[s+F+1]!==0&&(z=1),this[s+F]=(n/P>>0)-z&255;return s+l},c.prototype.writeInt8=function(n,s,l){return n=+n,s=s>>>0,l||H(this,n,s,1,127,-128),n<0&&(n=255+n+1),this[s]=n&255,s+1},c.prototype.writeInt16LE=function(n,s,l){return n=+n,s=s>>>0,l||H(this,n,s,2,32767,-32768),this[s]=n&255,this[s+1]=n>>>8,s+2},c.prototype.writeInt16BE=function(n,s,l){return n=+n,s=s>>>0,l||H(this,n,s,2,32767,-32768),this[s]=n>>>8,this[s+1]=n&255,s+2},c.prototype.writeInt32LE=function(n,s,l){return n=+n,s=s>>>0,l||H(this,n,s,4,2147483647,-2147483648),this[s]=n&255,this[s+1]=n>>>8,this[s+2]=n>>>16,this[s+3]=n>>>24,s+4},c.prototype.writeInt32BE=function(n,s,l){return n=+n,s=s>>>0,l||H(this,n,s,4,2147483647,-2147483648),n<0&&(n=4294967295+n+1),this[s]=n>>>24,this[s+1]=n>>>16,this[s+2]=n>>>8,this[s+3]=n&255,s+4};function yt(f,n,s,l,p,E){if(s+l>f.length)throw new RangeError("Index out of range");if(s<0)throw new RangeError("Index out of range")}function g(f,n,s,l,p){return n=+n,s=s>>>0,p||yt(f,n,s,4),r.write(f,n,s,l,23,4),s+4}c.prototype.writeFloatLE=function(n,s,l){return g(this,n,s,!0,l)},c.prototype.writeFloatBE=function(n,s,l){return g(this,n,s,!1,l)};function dt(f,n,s,l,p){return n=+n,s=s>>>0,p||yt(f,n,s,8),r.write(f,n,s,l,52,8),s+8}c.prototype.writeDoubleLE=function(n,s,l){return dt(this,n,s,!0,l)},c.prototype.writeDoubleBE=function(n,s,l){return dt(this,n,s,!1,l)},c.prototype.copy=function(n,s,l,p){if(!c.isBuffer(n))throw new TypeError("argument should be a Buffer");if(l||(l=0),!p&&p!==0&&(p=this.length),s>=n.length&&(s=n.length),s||(s=0),p>0&&p<l&&(p=l),p===l||n.length===0||this.length===0)return 0;if(s<0)throw new RangeError("targetStart out of bounds");if(l<0||l>=this.length)throw new RangeError("Index out of range");if(p<0)throw new RangeError("sourceEnd out of bounds");p>this.length&&(p=this.length),n.length-s<p-l&&(p=n.length-s+l);var E=p-l;return this===n&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(s,l,p):Uint8Array.prototype.set.call(n,this.subarray(l,p),s),E},c.prototype.fill=function(n,s,l,p){if(typeof n=="string"){if(typeof s=="string"?(p=s,s=0,l=this.length):typeof l=="string"&&(p=l,l=this.length),p!==void 0&&typeof p!="string")throw new TypeError("encoding must be a string");if(typeof p=="string"&&!c.isEncoding(p))throw new TypeError("Unknown encoding: "+p);if(n.length===1){var E=n.charCodeAt(0);(p==="utf8"&&E<128||p==="latin1")&&(n=E)}}else typeof n=="number"?n=n&255:typeof n=="boolean"&&(n=Number(n));if(s<0||this.length<s||this.length<l)throw new RangeError("Out of range index");if(l<=s)return this;s=s>>>0,l=l===void 0?this.length:l>>>0,n||(n=0);var F;if(typeof n=="number")for(F=s;F<l;++F)this[F]=n;else{var P=c.isBuffer(n)?n:c.from(n,p),z=P.length;if(z===0)throw new TypeError('The value "'+n+'" is invalid for argument "value"');for(F=0;F<l-s;++F)this[F+s]=P[F%z]}return this};var mt=/[^+/0-9A-Za-z-_]/g;function Tt(f){if(f=f.split("=")[0],f=f.trim().replace(mt,""),f.length<2)return"";for(;f.length%4!==0;)f=f+"=";return f}function G(f,n){n=n||1/0;for(var s,l=f.length,p=null,E=[],F=0;F<l;++F){if(s=f.charCodeAt(F),s>55295&&s<57344){if(!p){if(s>56319){(n-=3)>-1&&E.push(239,191,189);continue}else if(F+1===l){(n-=3)>-1&&E.push(239,191,189);continue}p=s;continue}if(s<56320){(n-=3)>-1&&E.push(239,191,189),p=s;continue}s=(p-55296<<10|s-56320)+65536}else p&&(n-=3)>-1&&E.push(239,191,189);if(p=null,s<128){if((n-=1)<0)break;E.push(s)}else if(s<2048){if((n-=2)<0)break;E.push(s>>6|192,s&63|128)}else if(s<65536){if((n-=3)<0)break;E.push(s>>12|224,s>>6&63|128,s&63|128)}else if(s<1114112){if((n-=4)<0)break;E.push(s>>18|240,s>>12&63|128,s>>6&63|128,s&63|128)}else throw new Error("Invalid code point")}return E}function Y(f){for(var n=[],s=0;s<f.length;++s)n.push(f.charCodeAt(s)&255);return n}function y(f,n){for(var s,l,p,E=[],F=0;F<f.length&&!((n-=2)<0);++F)s=f.charCodeAt(F),l=s>>8,p=s%256,E.push(p),E.push(l);return E}function x(f){return t.toByteArray(Tt(f))}function _(f,n,s,l){for(var p=0;p<l&&!(p+s>=n.length||p>=f.length);++p)n[p+s]=f[p];return p}function T(f,n){return f instanceof n||f!=null&&f.constructor!=null&&f.constructor.name!=null&&f.constructor.name===n.name}function S(f){return f!==f}var N=function(){for(var f="0123456789abcdef",n=new Array(256),s=0;s<16;++s)for(var l=s*16,p=0;p<16;++p)n[l+p]=f[s]+f[p];return n}()})(Re);var hi={exports:{}};(function(e){(function(t){var r,i=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,u=Math.ceil,d=Math.floor,w="[BigNumber Error] ",c=w+"Number primitive has more than 15 significant digits: ",b=1e14,A=14,U=9007199254740991,R=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],D=1e7,O=1e9;function q(X){var J,nt,it,C=g.prototype={constructor:g,toString:null,valueOf:null},xt=new g(1),ct=20,ft=4,St=-7,_t=21,Z=-1e7,M=1e7,k=!1,j=1,Q=0,$={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},H="0123456789abcdefghijklmnopqrstuvwxyz",yt=!0;function g(y,x){var _,T,S,N,f,n,s,l,p=this;if(!(p instanceof g))return new g(y,x);if(x==null){if(y&&y._isBigNumber===!0){p.s=y.s,!y.c||y.e>M?p.c=p.e=null:y.e<Z?p.c=[p.e=0]:(p.e=y.e,p.c=y.c.slice());return}if((n=typeof y=="number")&&y*0==0){if(p.s=1/y<0?(y=-y,-1):1,y===~~y){for(N=0,f=y;f>=10;f/=10,N++);N>M?p.c=p.e=null:(p.e=N,p.c=[y]);return}l=String(y)}else{if(!i.test(l=String(y)))return it(p,l,n);p.s=l.charCodeAt(0)==45?(l=l.slice(1),-1):1}(N=l.indexOf("."))>-1&&(l=l.replace(".","")),(f=l.search(/e/i))>0?(N<0&&(N=f),N+=+l.slice(f+1),l=l.substring(0,f)):N<0&&(N=l.length)}else{if(at(x,2,H.length,"Base"),x==10&&yt)return p=new g(y),G(p,ct+p.e+1,ft);if(l=String(y),n=typeof y=="number"){if(y*0!=0)return it(p,l,n,x);if(p.s=1/y<0?(l=l.slice(1),-1):1,g.DEBUG&&l.replace(/^0\.0*|\./,"").length>15)throw Error(c+y)}else p.s=l.charCodeAt(0)===45?(l=l.slice(1),-1):1;for(_=H.slice(0,x),N=f=0,s=l.length;f<s;f++)if(_.indexOf(T=l.charAt(f))<0){if(T=="."){if(f>N){N=s;continue}}else if(!S&&(l==l.toUpperCase()&&(l=l.toLowerCase())||l==l.toLowerCase()&&(l=l.toUpperCase()))){S=!0,f=-1,N=0;continue}return it(p,String(y),n,x)}n=!1,l=nt(l,x,10,p.s),(N=l.indexOf("."))>-1?l=l.replace(".",""):N=l.length}for(f=0;l.charCodeAt(f)===48;f++);for(s=l.length;l.charCodeAt(--s)===48;);if(l=l.slice(f,++s)){if(s-=f,n&&g.DEBUG&&s>15&&(y>U||y!==d(y)))throw Error(c+p.s*y);if((N=N-f-1)>M)p.c=p.e=null;else if(N<Z)p.c=[p.e=0];else{if(p.e=N,p.c=[],f=(N+1)%A,N<0&&(f+=A),f<s){for(f&&p.c.push(+l.slice(0,f)),s-=A;f<s;)p.c.push(+l.slice(f,f+=A));f=A-(l=l.slice(f)).length}else f-=s;for(;f--;l+="0");p.c.push(+l)}}else p.c=[p.e=0]}g.clone=q,g.ROUND_UP=0,g.ROUND_DOWN=1,g.ROUND_CEIL=2,g.ROUND_FLOOR=3,g.ROUND_HALF_UP=4,g.ROUND_HALF_DOWN=5,g.ROUND_HALF_EVEN=6,g.ROUND_HALF_CEIL=7,g.ROUND_HALF_FLOOR=8,g.EUCLID=9,g.config=g.set=function(y){var x,_;if(y!=null)if(typeof y=="object"){if(y.hasOwnProperty(x="DECIMAL_PLACES")&&(_=y[x],at(_,0,O,x),ct=_),y.hasOwnProperty(x="ROUNDING_MODE")&&(_=y[x],at(_,0,8,x),ft=_),y.hasOwnProperty(x="EXPONENTIAL_AT")&&(_=y[x],_&&_.pop?(at(_[0],-O,0,x),at(_[1],0,O,x),St=_[0],_t=_[1]):(at(_,-O,O,x),St=-(_t=_<0?-_:_))),y.hasOwnProperty(x="RANGE"))if(_=y[x],_&&_.pop)at(_[0],-O,-1,x),at(_[1],1,O,x),Z=_[0],M=_[1];else if(at(_,-O,O,x),_)Z=-(M=_<0?-_:_);else throw Error(w+x+" cannot be zero: "+_);if(y.hasOwnProperty(x="CRYPTO"))if(_=y[x],_===!!_)if(_)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))k=_;else throw k=!_,Error(w+"crypto unavailable");else k=_;else throw Error(w+x+" not true or false: "+_);if(y.hasOwnProperty(x="MODULO_MODE")&&(_=y[x],at(_,0,9,x),j=_),y.hasOwnProperty(x="POW_PRECISION")&&(_=y[x],at(_,0,O,x),Q=_),y.hasOwnProperty(x="FORMAT"))if(_=y[x],typeof _=="object")$=_;else throw Error(w+x+" not an object: "+_);if(y.hasOwnProperty(x="ALPHABET"))if(_=y[x],typeof _=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(_))yt=_.slice(0,10)=="0123456789",H=_;else throw Error(w+x+" invalid: "+_)}else throw Error(w+"Object expected: "+y);return{DECIMAL_PLACES:ct,ROUNDING_MODE:ft,EXPONENTIAL_AT:[St,_t],RANGE:[Z,M],CRYPTO:k,MODULO_MODE:j,POW_PRECISION:Q,FORMAT:$,ALPHABET:H}},g.isBigNumber=function(y){if(!y||y._isBigNumber!==!0)return!1;if(!g.DEBUG)return!0;var x,_,T=y.c,S=y.e,N=y.s;t:if({}.toString.call(T)=="[object Array]"){if((N===1||N===-1)&&S>=-O&&S<=O&&S===d(S)){if(T[0]===0){if(S===0&&T.length===1)return!0;break t}if(x=(S+1)%A,x<1&&(x+=A),String(T[0]).length==x){for(x=0;x<T.length;x++)if(_=T[x],_<0||_>=b||_!==d(_))break t;if(_!==0)return!0}}}else if(T===null&&S===null&&(N===null||N===1||N===-1))return!0;throw Error(w+"Invalid BigNumber: "+y)},g.maximum=g.max=function(){return mt(arguments,-1)},g.minimum=g.min=function(){return mt(arguments,1)},g.random=function(){var y=9007199254740992,x=Math.random()*y&2097151?function(){return d(Math.random()*y)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(_){var T,S,N,f,n,s=0,l=[],p=new g(xt);if(_==null?_=ct:at(_,0,O),f=u(_/A),k)if(crypto.getRandomValues){for(T=crypto.getRandomValues(new Uint32Array(f*=2));s<f;)n=T[s]*131072+(T[s+1]>>>11),n>=9e15?(S=crypto.getRandomValues(new Uint32Array(2)),T[s]=S[0],T[s+1]=S[1]):(l.push(n%1e14),s+=2);s=f/2}else if(crypto.randomBytes){for(T=crypto.randomBytes(f*=7);s<f;)n=(T[s]&31)*281474976710656+T[s+1]*1099511627776+T[s+2]*4294967296+T[s+3]*16777216+(T[s+4]<<16)+(T[s+5]<<8)+T[s+6],n>=9e15?crypto.randomBytes(7).copy(T,s):(l.push(n%1e14),s+=7);s=f/7}else throw k=!1,Error(w+"crypto unavailable");if(!k)for(;s<f;)n=x(),n<9e15&&(l[s++]=n%1e14);for(f=l[--s],_%=A,f&&_&&(n=R[A-_],l[s]=d(f/n)*n);l[s]===0;l.pop(),s--);if(s<0)l=[N=0];else{for(N=-1;l[0]===0;l.splice(0,1),N-=A);for(s=1,n=l[0];n>=10;n/=10,s++);s<A&&(N-=A-s)}return p.e=N,p.c=l,p}}(),g.sum=function(){for(var y=1,x=arguments,_=new g(x[0]);y<x.length;)_=_.plus(x[y++]);return _},nt=function(){var y="0123456789";function x(_,T,S,N){for(var f,n=[0],s,l=0,p=_.length;l<p;){for(s=n.length;s--;n[s]*=T);for(n[0]+=N.indexOf(_.charAt(l++)),f=0;f<n.length;f++)n[f]>S-1&&(n[f+1]==null&&(n[f+1]=0),n[f+1]+=n[f]/S|0,n[f]%=S)}return n.reverse()}return function(_,T,S,N,f){var n,s,l,p,E,F,P,z,W=_.indexOf("."),rt=ct,h=ft;for(W>=0&&(p=Q,Q=0,_=_.replace(".",""),z=new g(T),F=z.pow(_.length-W),Q=p,z.c=x(ut(lt(F.c),F.e,"0"),10,S,y),z.e=z.c.length),P=x(_,T,S,f?(n=H,y):(n=y,H)),l=p=P.length;P[--p]==0;P.pop());if(!P[0])return n.charAt(0);if(W<0?--l:(F.c=P,F.e=l,F.s=N,F=J(F,z,rt,h,S),P=F.c,E=F.r,l=F.e),s=l+rt+1,W=P[s],p=S/2,E=E||s<0||P[s+1]!=null,E=h<4?(W!=null||E)&&(h==0||h==(F.s<0?3:2)):W>p||W==p&&(h==4||E||h==6&&P[s-1]&1||h==(F.s<0?8:7)),s<1||!P[0])_=E?ut(n.charAt(1),-rt,n.charAt(0)):n.charAt(0);else{if(P.length=s,E)for(--S;++P[--s]>S;)P[s]=0,s||(++l,P=[1].concat(P));for(p=P.length;!P[--p];);for(W=0,_="";W<=p;_+=n.charAt(P[W++]));_=ut(_,l,n.charAt(0))}return _}}(),J=function(){function y(T,S,N){var f,n,s,l,p=0,E=T.length,F=S%D,P=S/D|0;for(T=T.slice();E--;)s=T[E]%D,l=T[E]/D|0,f=P*s+l*F,n=F*s+f%D*D+p,p=(n/N|0)+(f/D|0)+P*l,T[E]=n%N;return p&&(T=[p].concat(T)),T}function x(T,S,N,f){var n,s;if(N!=f)s=N>f?1:-1;else for(n=s=0;n<N;n++)if(T[n]!=S[n]){s=T[n]>S[n]?1:-1;break}return s}function _(T,S,N,f){for(var n=0;N--;)T[N]-=n,n=T[N]<S[N]?1:0,T[N]=n*f+T[N]-S[N];for(;!T[0]&&T.length>1;T.splice(0,1));}return function(T,S,N,f,n){var s,l,p,E,F,P,z,W,rt,h,o,a,m,B,L,v,et,ht=T.s==S.s?1:-1,st=T.c,tt=S.c;if(!st||!st[0]||!tt||!tt[0])return new g(!T.s||!S.s||(st?tt&&st[0]==tt[0]:!tt)?NaN:st&&st[0]==0||!tt?ht*0:ht/0);for(W=new g(ht),rt=W.c=[],l=T.e-S.e,ht=N+l+1,n||(n=b,l=V(T.e/A)-V(S.e/A),ht=ht/A|0),p=0;tt[p]==(st[p]||0);p++);if(tt[p]>(st[p]||0)&&l--,ht<0)rt.push(1),E=!0;else{for(B=st.length,v=tt.length,p=0,ht+=2,F=d(n/(tt[0]+1)),F>1&&(tt=y(tt,F,n),st=y(st,F,n),v=tt.length,B=st.length),m=v,h=st.slice(0,v),o=h.length;o<v;h[o++]=0);et=tt.slice(),et=[0].concat(et),L=tt[0],tt[1]>=n/2&&L++;do{if(F=0,s=x(tt,h,v,o),s<0){if(a=h[0],v!=o&&(a=a*n+(h[1]||0)),F=d(a/L),F>1)for(F>=n&&(F=n-1),P=y(tt,F,n),z=P.length,o=h.length;x(P,h,z,o)==1;)F--,_(P,v<z?et:tt,z,n),z=P.length,s=1;else F==0&&(s=F=1),P=tt.slice(),z=P.length;if(z<o&&(P=[0].concat(P)),_(h,P,o,n),o=h.length,s==-1)for(;x(tt,h,v,o)<1;)F++,_(h,v<o?et:tt,o,n),o=h.length}else s===0&&(F++,h=[0]);rt[p++]=F,h[0]?h[o++]=st[m]||0:(h=[st[m]],o=1)}while((m++<B||h[0]!=null)&&ht--);E=h[0]!=null,rt[0]||rt.splice(0,1)}if(n==b){for(p=1,ht=rt[0];ht>=10;ht/=10,p++);G(W,N+(W.e=p+l*A-1)+1,f,E)}else W.e=l,W.r=+E;return W}}();function dt(y,x,_,T){var S,N,f,n,s;if(_==null?_=ft:at(_,0,8),!y.c)return y.toString();if(S=y.c[0],f=y.e,x==null)s=lt(y.c),s=T==1||T==2&&(f<=St||f>=_t)?Ut(s,f):ut(s,f,"0");else if(y=G(new g(y),x,_),N=y.e,s=lt(y.c),n=s.length,T==1||T==2&&(x<=N||N<=St)){for(;n<x;s+="0",n++);s=Ut(s,N)}else if(x-=f,s=ut(s,N,"0"),N+1>n){if(--x>0)for(s+=".";x--;s+="0");}else if(x+=N-n,x>0)for(N+1==n&&(s+=".");x--;s+="0");return y.s<0&&S?"-"+s:s}function mt(y,x){for(var _,T,S=1,N=new g(y[0]);S<y.length;S++)T=new g(y[S]),(!T.s||(_=Et(N,T))===x||_===0&&N.s===x)&&(N=T);return N}function Tt(y,x,_){for(var T=1,S=x.length;!x[--S];x.pop());for(S=x[0];S>=10;S/=10,T++);return(_=T+_*A-1)>M?y.c=y.e=null:_<Z?y.c=[y.e=0]:(y.e=_,y.c=x),y}it=function(){var y=/^(-?)0([xbo])(?=\w[\w.]*$)/i,x=/^([^.]+)\.$/,_=/^\.([^.]+)$/,T=/^-?(Infinity|NaN)$/,S=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(N,f,n,s){var l,p=n?f:f.replace(S,"");if(T.test(p))N.s=isNaN(p)?null:p<0?-1:1;else{if(!n&&(p=p.replace(y,function(E,F,P){return l=(P=P.toLowerCase())=="x"?16:P=="b"?2:8,!s||s==l?F:E}),s&&(l=s,p=p.replace(x,"$1").replace(_,"0.$1")),f!=p))return new g(p,l);if(g.DEBUG)throw Error(w+"Not a"+(s?" base "+s:"")+" number: "+f);N.s=null}N.c=N.e=null}}();function G(y,x,_,T){var S,N,f,n,s,l,p,E=y.c,F=R;if(E){t:{for(S=1,n=E[0];n>=10;n/=10,S++);if(N=x-S,N<0)N+=A,f=x,s=E[l=0],p=d(s/F[S-f-1]%10);else if(l=u((N+1)/A),l>=E.length)if(T){for(;E.length<=l;E.push(0));s=p=0,S=1,N%=A,f=N-A+1}else break t;else{for(s=n=E[l],S=1;n>=10;n/=10,S++);N%=A,f=N-A+S,p=f<0?0:d(s/F[S-f-1]%10)}if(T=T||x<0||E[l+1]!=null||(f<0?s:s%F[S-f-1]),T=_<4?(p||T)&&(_==0||_==(y.s<0?3:2)):p>5||p==5&&(_==4||T||_==6&&(N>0?f>0?s/F[S-f]:0:E[l-1])%10&1||_==(y.s<0?8:7)),x<1||!E[0])return E.length=0,T?(x-=y.e+1,E[0]=F[(A-x%A)%A],y.e=-x||0):E[0]=y.e=0,y;if(N==0?(E.length=l,n=1,l--):(E.length=l+1,n=F[A-N],E[l]=f>0?d(s/F[S-f]%F[f])*n:0),T)for(;;)if(l==0){for(N=1,f=E[0];f>=10;f/=10,N++);for(f=E[0]+=n,n=1;f>=10;f/=10,n++);N!=n&&(y.e++,E[0]==b&&(E[0]=1));break}else{if(E[l]+=n,E[l]!=b)break;E[l--]=0,n=1}for(N=E.length;E[--N]===0;E.pop());}y.e>M?y.c=y.e=null:y.e<Z&&(y.c=[y.e=0])}return y}function Y(y){var x,_=y.e;return _===null?y.toString():(x=lt(y.c),x=_<=St||_>=_t?Ut(x,_):ut(x,_,"0"),y.s<0?"-"+x:x)}return C.absoluteValue=C.abs=function(){var y=new g(this);return y.s<0&&(y.s=1),y},C.comparedTo=function(y,x){return Et(this,new g(y,x))},C.decimalPlaces=C.dp=function(y,x){var _,T,S,N=this;if(y!=null)return at(y,0,O),x==null?x=ft:at(x,0,8),G(new g(N),y+N.e+1,x);if(!(_=N.c))return null;if(T=((S=_.length-1)-V(this.e/A))*A,S=_[S])for(;S%10==0;S/=10,T--);return T<0&&(T=0),T},C.dividedBy=C.div=function(y,x){return J(this,new g(y,x),ct,ft)},C.dividedToIntegerBy=C.idiv=function(y,x){return J(this,new g(y,x),0,1)},C.exponentiatedBy=C.pow=function(y,x){var _,T,S,N,f,n,s,l,p,E=this;if(y=new g(y),y.c&&!y.isInteger())throw Error(w+"Exponent not an integer: "+Y(y));if(x!=null&&(x=new g(x)),n=y.e>14,!E.c||!E.c[0]||E.c[0]==1&&!E.e&&E.c.length==1||!y.c||!y.c[0])return p=new g(Math.pow(+Y(E),n?y.s*(2-K(y)):+Y(y))),x?p.mod(x):p;if(s=y.s<0,x){if(x.c?!x.c[0]:!x.s)return new g(NaN);T=!s&&E.isInteger()&&x.isInteger(),T&&(E=E.mod(x))}else{if(y.e>9&&(E.e>0||E.e<-1||(E.e==0?E.c[0]>1||n&&E.c[1]>=24e7:E.c[0]<8e13||n&&E.c[0]<=9999975e7)))return N=E.s<0&&K(y)?-0:0,E.e>-1&&(N=1/N),new g(s?1/N:N);Q&&(N=u(Q/A+2))}for(n?(_=new g(.5),s&&(y.s=1),l=K(y)):(S=Math.abs(+Y(y)),l=S%2),p=new g(xt);;){if(l){if(p=p.times(E),!p.c)break;N?p.c.length>N&&(p.c.length=N):T&&(p=p.mod(x))}if(S){if(S=d(S/2),S===0)break;l=S%2}else if(y=y.times(_),G(y,y.e+1,1),y.e>14)l=K(y);else{if(S=+Y(y),S===0)break;l=S%2}E=E.times(E),N?E.c&&E.c.length>N&&(E.c.length=N):T&&(E=E.mod(x))}return T?p:(s&&(p=xt.div(p)),x?p.mod(x):N?G(p,Q,ft,f):p)},C.integerValue=function(y){var x=new g(this);return y==null?y=ft:at(y,0,8),G(x,x.e+1,y)},C.isEqualTo=C.eq=function(y,x){return Et(this,new g(y,x))===0},C.isFinite=function(){return!!this.c},C.isGreaterThan=C.gt=function(y,x){return Et(this,new g(y,x))>0},C.isGreaterThanOrEqualTo=C.gte=function(y,x){return(x=Et(this,new g(y,x)))===1||x===0},C.isInteger=function(){return!!this.c&&V(this.e/A)>this.c.length-2},C.isLessThan=C.lt=function(y,x){return Et(this,new g(y,x))<0},C.isLessThanOrEqualTo=C.lte=function(y,x){return(x=Et(this,new g(y,x)))===-1||x===0},C.isNaN=function(){return!this.s},C.isNegative=function(){return this.s<0},C.isPositive=function(){return this.s>0},C.isZero=function(){return!!this.c&&this.c[0]==0},C.minus=function(y,x){var _,T,S,N,f=this,n=f.s;if(y=new g(y,x),x=y.s,!n||!x)return new g(NaN);if(n!=x)return y.s=-x,f.plus(y);var s=f.e/A,l=y.e/A,p=f.c,E=y.c;if(!s||!l){if(!p||!E)return p?(y.s=-x,y):new g(E?f:NaN);if(!p[0]||!E[0])return E[0]?(y.s=-x,y):new g(p[0]?f:ft==3?-0:0)}if(s=V(s),l=V(l),p=p.slice(),n=s-l){for((N=n<0)?(n=-n,S=p):(l=s,S=E),S.reverse(),x=n;x--;S.push(0));S.reverse()}else for(T=(N=(n=p.length)<(x=E.length))?n:x,n=x=0;x<T;x++)if(p[x]!=E[x]){N=p[x]<E[x];break}if(N&&(S=p,p=E,E=S,y.s=-y.s),x=(T=E.length)-(_=p.length),x>0)for(;x--;p[_++]=0);for(x=b-1;T>n;){if(p[--T]<E[T]){for(_=T;_&&!p[--_];p[_]=x);--p[_],p[T]+=b}p[T]-=E[T]}for(;p[0]==0;p.splice(0,1),--l);return p[0]?Tt(y,p,l):(y.s=ft==3?-1:1,y.c=[y.e=0],y)},C.modulo=C.mod=function(y,x){var _,T,S=this;return y=new g(y,x),!S.c||!y.s||y.c&&!y.c[0]?new g(NaN):!y.c||S.c&&!S.c[0]?new g(S):(j==9?(T=y.s,y.s=1,_=J(S,y,0,3),y.s=T,_.s*=T):_=J(S,y,0,j),y=S.minus(_.times(y)),!y.c[0]&&j==1&&(y.s=S.s),y)},C.multipliedBy=C.times=function(y,x){var _,T,S,N,f,n,s,l,p,E,F,P,z,W,rt,h=this,o=h.c,a=(y=new g(y,x)).c;if(!o||!a||!o[0]||!a[0])return!h.s||!y.s||o&&!o[0]&&!a||a&&!a[0]&&!o?y.c=y.e=y.s=null:(y.s*=h.s,!o||!a?y.c=y.e=null:(y.c=[0],y.e=0)),y;for(T=V(h.e/A)+V(y.e/A),y.s*=h.s,s=o.length,E=a.length,s<E&&(z=o,o=a,a=z,S=s,s=E,E=S),S=s+E,z=[];S--;z.push(0));for(W=b,rt=D,S=E;--S>=0;){for(_=0,F=a[S]%rt,P=a[S]/rt|0,f=s,N=S+f;N>S;)l=o[--f]%rt,p=o[f]/rt|0,n=P*l+p*F,l=F*l+n%rt*rt+z[N]+_,_=(l/W|0)+(n/rt|0)+P*p,z[N--]=l%W;z[N]=_}return _?++T:z.splice(0,1),Tt(y,z,T)},C.negated=function(){var y=new g(this);return y.s=-y.s||null,y},C.plus=function(y,x){var _,T=this,S=T.s;if(y=new g(y,x),x=y.s,!S||!x)return new g(NaN);if(S!=x)return y.s=-x,T.minus(y);var N=T.e/A,f=y.e/A,n=T.c,s=y.c;if(!N||!f){if(!n||!s)return new g(S/0);if(!n[0]||!s[0])return s[0]?y:new g(n[0]?T:S*0)}if(N=V(N),f=V(f),n=n.slice(),S=N-f){for(S>0?(f=N,_=s):(S=-S,_=n),_.reverse();S--;_.push(0));_.reverse()}for(S=n.length,x=s.length,S-x<0&&(_=s,s=n,n=_,x=S),S=0;x;)S=(n[--x]=n[x]+s[x]+S)/b|0,n[x]=b===n[x]?0:n[x]%b;return S&&(n=[S].concat(n),++f),Tt(y,n,f)},C.precision=C.sd=function(y,x){var _,T,S,N=this;if(y!=null&&y!==!!y)return at(y,1,O),x==null?x=ft:at(x,0,8),G(new g(N),y,x);if(!(_=N.c))return null;if(S=_.length-1,T=S*A+1,S=_[S]){for(;S%10==0;S/=10,T--);for(S=_[0];S>=10;S/=10,T++);}return y&&N.e+1>T&&(T=N.e+1),T},C.shiftedBy=function(y){return at(y,-U,U),this.times("1e"+y)},C.squareRoot=C.sqrt=function(){var y,x,_,T,S,N=this,f=N.c,n=N.s,s=N.e,l=ct+4,p=new g("0.5");if(n!==1||!f||!f[0])return new g(!n||n<0&&(!f||f[0])?NaN:f?N:1/0);if(n=Math.sqrt(+Y(N)),n==0||n==1/0?(x=lt(f),(x.length+s)%2==0&&(x+="0"),n=Math.sqrt(+x),s=V((s+1)/2)-(s<0||s%2),n==1/0?x="5e"+s:(x=n.toExponential(),x=x.slice(0,x.indexOf("e")+1)+s),_=new g(x)):_=new g(n+""),_.c[0]){for(s=_.e,n=s+l,n<3&&(n=0);;)if(S=_,_=p.times(S.plus(J(N,S,l,1))),lt(S.c).slice(0,n)===(x=lt(_.c)).slice(0,n))if(_.e<s&&--n,x=x.slice(n-3,n+1),x=="9999"||!T&&x=="4999"){if(!T&&(G(S,S.e+ct+2,0),S.times(S).eq(N))){_=S;break}l+=4,n+=4,T=1}else{(!+x||!+x.slice(1)&&x.charAt(0)=="5")&&(G(_,_.e+ct+2,1),y=!_.times(_).eq(N));break}}return G(_,_.e+ct+1,ft,y)},C.toExponential=function(y,x){return y!=null&&(at(y,0,O),y++),dt(this,y,x,1)},C.toFixed=function(y,x){return y!=null&&(at(y,0,O),y=y+this.e+1),dt(this,y,x)},C.toFormat=function(y,x,_){var T,S=this;if(_==null)y!=null&&x&&typeof x=="object"?(_=x,x=null):y&&typeof y=="object"?(_=y,y=x=null):_=$;else if(typeof _!="object")throw Error(w+"Argument not an object: "+_);if(T=S.toFixed(y,x),S.c){var N,f=T.split("."),n=+_.groupSize,s=+_.secondaryGroupSize,l=_.groupSeparator||"",p=f[0],E=f[1],F=S.s<0,P=F?p.slice(1):p,z=P.length;if(s&&(N=n,n=s,s=N,z-=N),n>0&&z>0){for(N=z%n||n,p=P.substr(0,N);N<z;N+=n)p+=l+P.substr(N,n);s>0&&(p+=l+P.slice(N)),F&&(p="-"+p)}T=E?p+(_.decimalSeparator||"")+((s=+_.fractionGroupSize)?E.replace(new RegExp("\\d{"+s+"}\\B","g"),"$&"+(_.fractionGroupSeparator||"")):E):p}return(_.prefix||"")+T+(_.suffix||"")},C.toFraction=function(y){var x,_,T,S,N,f,n,s,l,p,E,F,P=this,z=P.c;if(y!=null&&(n=new g(y),!n.isInteger()&&(n.c||n.s!==1)||n.lt(xt)))throw Error(w+"Argument "+(n.isInteger()?"out of range: ":"not an integer: ")+Y(n));if(!z)return new g(P);for(x=new g(xt),l=_=new g(xt),T=s=new g(xt),F=lt(z),N=x.e=F.length-P.e-1,x.c[0]=R[(f=N%A)<0?A+f:f],y=!y||n.comparedTo(x)>0?N>0?x:l:n,f=M,M=1/0,n=new g(F),s.c[0]=0;p=J(n,x,0,1),S=_.plus(p.times(T)),S.comparedTo(y)!=1;)_=T,T=S,l=s.plus(p.times(S=l)),s=S,x=n.minus(p.times(S=x)),n=S;return S=J(y.minus(_),T,0,1),s=s.plus(S.times(l)),_=_.plus(S.times(T)),s.s=l.s=P.s,N=N*2,E=J(l,T,N,ft).minus(P).abs().comparedTo(J(s,_,N,ft).minus(P).abs())<1?[l,T]:[s,_],M=f,E},C.toNumber=function(){return+Y(this)},C.toPrecision=function(y,x){return y!=null&&at(y,1,O),dt(this,y,x,2)},C.toString=function(y){var x,_=this,T=_.s,S=_.e;return S===null?T?(x="Infinity",T<0&&(x="-"+x)):x="NaN":(y==null?x=S<=St||S>=_t?Ut(lt(_.c),S):ut(lt(_.c),S,"0"):y===10&&yt?(_=G(new g(_),ct+S+1,ft),x=ut(lt(_.c),_.e,"0")):(at(y,2,H.length,"Base"),x=nt(ut(lt(_.c),S,"0"),10,y,T,!0)),T<0&&_.c[0]&&(x="-"+x)),x},C.valueOf=C.toJSON=function(){return Y(this)},C._isBigNumber=!0,X!=null&&g.set(X),g}function V(X){var J=X|0;return X>0||X===J?J:J-1}function lt(X){for(var J,nt,it=1,C=X.length,xt=X[0]+"";it<C;){for(J=X[it++]+"",nt=A-J.length;nt--;J="0"+J);xt+=J}for(C=xt.length;xt.charCodeAt(--C)===48;);return xt.slice(0,C+1||1)}function Et(X,J){var nt,it,C=X.c,xt=J.c,ct=X.s,ft=J.s,St=X.e,_t=J.e;if(!ct||!ft)return null;if(nt=C&&!C[0],it=xt&&!xt[0],nt||it)return nt?it?0:-ft:ct;if(ct!=ft)return ct;if(nt=ct<0,it=St==_t,!C||!xt)return it?0:!C^nt?1:-1;if(!it)return St>_t^nt?1:-1;for(ft=(St=C.length)<(_t=xt.length)?St:_t,ct=0;ct<ft;ct++)if(C[ct]!=xt[ct])return C[ct]>xt[ct]^nt?1:-1;return St==_t?0:St>_t^nt?1:-1}function at(X,J,nt,it){if(X<J||X>nt||X!==d(X))throw Error(w+(it||"Argument")+(typeof X=="number"?X<J||X>nt?" out of range: ":" not an integer: ":" not a primitive number: ")+String(X))}function K(X){var J=X.c.length-1;return V(X.e/A)==J&&X.c[J]%2!=0}function Ut(X,J){return(X.length>1?X.charAt(0)+"."+X.slice(1):X)+(J<0?"e":"e+")+J}function ut(X,J,nt){var it,C;if(J<0){for(C=nt+".";++J;C+=nt);X=C+X}else if(it=X.length,++J>it){for(C=nt,J-=it;--J;C+=nt);X+=C}else J<it&&(X=X.slice(0,J)+"."+X.slice(J));return X}r=q(),r.default=r.BigNumber=r,e.exports?e.exports=r:(t||(t=typeof self<"u"&&self?self:window),t.BigNumber=r)})(Ee)})(hi);var nr=hi.exports,Zs=function(t,r,i){var u=new t.Uint8Array(i),d=r.pushInt,w=r.pushInt32,c=r.pushInt32Neg,b=r.pushInt64,A=r.pushInt64Neg,U=r.pushFloat,R=r.pushFloatSingle,D=r.pushFloatDouble,O=r.pushTrue,q=r.pushFalse,V=r.pushUndefined,lt=r.pushNull,Et=r.pushInfinity,at=r.pushInfinityNeg,K=r.pushNaN,Ut=r.pushNaNNeg,ut=r.pushArrayStart,X=r.pushArrayStartFixed,J=r.pushArrayStartFixed32,nt=r.pushArrayStartFixed64,it=r.pushObjectStart,C=r.pushObjectStartFixed,xt=r.pushObjectStartFixed32,ct=r.pushObjectStartFixed64,ft=r.pushByteString,St=r.pushByteStringStart,_t=r.pushUtf8String,Z=r.pushUtf8StringStart,M=r.pushSimpleUnassigned,k=r.pushTagStart,j=r.pushTagStart4,Q=r.pushTagStart8,$=r.pushTagUnassigned,H=r.pushBreak,yt=t.Math.pow,g=0,dt=0,mt=0;function Tt(I){for(I=I|0,g=0,dt=I;(g|0)<(dt|0)&&(mt=ws[u[g]&255](u[g]|0)|0,!((mt|0)>0)););return mt|0}function G(I){return I=I|0,((g|0)+(I|0)|0)<(dt|0)?0:1}function Y(I){return I=I|0,u[I|0]<<8|u[I+1|0]|0}function y(I){return I=I|0,u[I|0]<<24|u[I+1|0]<<16|u[I+2|0]<<8|u[I+3|0]|0}function x(I){return I=I|0,d(I|0),g=g+1|0,0}function _(I){return I=I|0,G(1)|0?1:(d(u[g+1|0]|0),g=g+2|0,0)}function T(I){return I=I|0,G(2)|0?1:(d(Y(g+1|0)|0),g=g+3|0,0)}function S(I){return I=I|0,G(4)|0?1:(w(Y(g+1|0)|0,Y(g+3|0)|0),g=g+5|0,0)}function N(I){return I=I|0,G(8)|0?1:(b(Y(g+1|0)|0,Y(g+3|0)|0,Y(g+5|0)|0,Y(g+7|0)|0),g=g+9|0,0)}function f(I){return I=I|0,d(-1-(I-32|0)|0),g=g+1|0,0}function n(I){return I=I|0,G(1)|0?1:(d(-1-(u[g+1|0]|0)|0),g=g+2|0,0)}function s(I){I=I|0;var wt=0;return G(2)|0?1:(wt=Y(g+1|0)|0,d(-1-(wt|0)|0),g=g+3|0,0)}function l(I){return I=I|0,G(4)|0?1:(c(Y(g+1|0)|0,Y(g+3|0)|0),g=g+5|0,0)}function p(I){return I=I|0,G(8)|0?1:(A(Y(g+1|0)|0,Y(g+3|0)|0,Y(g+5|0)|0,Y(g+7|0)|0),g=g+9|0,0)}function E(I){I=I|0;var wt=0,gt=0,pt=0;return pt=I-64|0,G(pt|0)|0?1:(wt=g+1|0,gt=(g+1|0)+(pt|0)|0,ft(wt|0,gt|0),g=gt|0,0)}function F(I){I=I|0;var wt=0,gt=0,pt=0;return G(1)|0||(pt=u[g+1|0]|0,wt=g+2|0,gt=(g+2|0)+(pt|0)|0,G(pt+1|0)|0)?1:(ft(wt|0,gt|0),g=gt|0,0)}function P(I){I=I|0;var wt=0,gt=0,pt=0;return G(2)|0||(pt=Y(g+1|0)|0,wt=g+3|0,gt=(g+3|0)+(pt|0)|0,G(pt+2|0)|0)?1:(ft(wt|0,gt|0),g=gt|0,0)}function z(I){I=I|0;var wt=0,gt=0,pt=0;return G(4)|0||(pt=y(g+1|0)|0,wt=g+5|0,gt=(g+5|0)+(pt|0)|0,G(pt+4|0)|0)?1:(ft(wt|0,gt|0),g=gt|0,0)}function W(I){return I=I|0,1}function rt(I){return I=I|0,St(),g=g+1|0,0}function h(I){I=I|0;var wt=0,gt=0,pt=0;return pt=I-96|0,G(pt|0)|0?1:(wt=g+1|0,gt=(g+1|0)+(pt|0)|0,_t(wt|0,gt|0),g=gt|0,0)}function o(I){I=I|0;var wt=0,gt=0,pt=0;return G(1)|0||(pt=u[g+1|0]|0,wt=g+2|0,gt=(g+2|0)+(pt|0)|0,G(pt+1|0)|0)?1:(_t(wt|0,gt|0),g=gt|0,0)}function a(I){I=I|0;var wt=0,gt=0,pt=0;return G(2)|0||(pt=Y(g+1|0)|0,wt=g+3|0,gt=(g+3|0)+(pt|0)|0,G(pt+2|0)|0)?1:(_t(wt|0,gt|0),g=gt|0,0)}function m(I){I=I|0;var wt=0,gt=0,pt=0;return G(4)|0||(pt=y(g+1|0)|0,wt=g+5|0,gt=(g+5|0)+(pt|0)|0,G(pt+4|0)|0)?1:(_t(wt|0,gt|0),g=gt|0,0)}function B(I){return I=I|0,1}function L(I){return I=I|0,Z(),g=g+1|0,0}function v(I){return I=I|0,X(I-128|0),g=g+1|0,0}function et(I){return I=I|0,G(1)|0?1:(X(u[g+1|0]|0),g=g+2|0,0)}function ht(I){return I=I|0,G(2)|0?1:(X(Y(g+1|0)|0),g=g+3|0,0)}function st(I){return I=I|0,G(4)|0?1:(J(Y(g+1|0)|0,Y(g+3|0)|0),g=g+5|0,0)}function tt(I){return I=I|0,G(8)|0?1:(nt(Y(g+1|0)|0,Y(g+3|0)|0,Y(g+5|0)|0,Y(g+7|0)|0),g=g+9|0,0)}function bt(I){return I=I|0,ut(),g=g+1|0,0}function Nt(I){I=I|0;var wt=0;return wt=I-160|0,G(wt|0)|0?1:(C(wt|0),g=g+1|0,0)}function ji(I){return I=I|0,G(1)|0?1:(C(u[g+1|0]|0),g=g+2|0,0)}function Zi(I){return I=I|0,G(2)|0?1:(C(Y(g+1|0)|0),g=g+3|0,0)}function Qi(I){return I=I|0,G(4)|0?1:(xt(Y(g+1|0)|0,Y(g+3|0)|0),g=g+5|0,0)}function ts(I){return I=I|0,G(8)|0?1:(ct(Y(g+1|0)|0,Y(g+3|0)|0,Y(g+5|0)|0,Y(g+7|0)|0),g=g+9|0,0)}function es(I){return I=I|0,it(),g=g+1|0,0}function de(I){return I=I|0,k(I-192|0|0),g=g+1|0,0}function Xu(I){return I=I|0,k(I|0),g=g+1|0,0}function Ju(I){return I=I|0,k(I|0),g=g+1|0,0}function ju(I){return I=I|0,k(I|0),g=g+1|0,0}function Zu(I){return I=I|0,k(I|0),g=g+1|0,0}function Ot(I){return I=I|0,k(I-192|0|0),g=g+1|0,0}function Qu(I){return I=I|0,k(I|0),g=g+1|0,0}function t0(I){return I=I|0,k(I|0),g=g+1|0,0}function e0(I){return I=I|0,k(I|0),g=g+1|0,0}function rs(I){return I=I|0,G(1)|0?1:(k(u[g+1|0]|0),g=g+2|0,0)}function ns(I){return I=I|0,G(2)|0?1:(k(Y(g+1|0)|0),g=g+3|0,0)}function is(I){return I=I|0,G(4)|0?1:(j(Y(g+1|0)|0,Y(g+3|0)|0),g=g+5|0,0)}function ss(I){return I=I|0,G(8)|0?1:(Q(Y(g+1|0)|0,Y(g+3|0)|0,Y(g+5|0)|0,Y(g+7|0)|0),g=g+9|0,0)}function vt(I){return I=I|0,M((I|0)-224|0),g=g+1|0,0}function os(I){return I=I|0,q(),g=g+1|0,0}function as(I){return I=I|0,O(),g=g+1|0,0}function us(I){return I=I|0,lt(),g=g+1|0,0}function cs(I){return I=I|0,V(),g=g+1|0,0}function fs(I){return I=I|0,G(1)|0?1:(M(u[g+1|0]|0),g=g+2|0,0)}function hs(I){I=I|0;var wt=0,gt=0,pt=1,De=0,Be=0,r0=0;return G(2)|0?1:(wt=u[g+1|0]|0,gt=u[g+2|0]|0,(wt|0)&128&&(pt=-1),De=+(((wt|0)&124)>>2),Be=+(((wt|0)&3)<<8|gt),+De==0?U(+(+pt*5960464477539063e-23*+Be)):+De==31?+pt==1?+Be>0?K():Et():+Be>0?Ut():at():U(+(+pt*yt(2,+(+De-25))*+(1024+Be))),g=g+3|0,0)}function ls(I){return I=I|0,G(4)|0?1:(R(u[g+1|0]|0,u[g+2|0]|0,u[g+3|0]|0,u[g+4|0]|0),g=g+5|0,0)}function ds(I){return I=I|0,G(8)|0?1:(D(u[g+1|0]|0,u[g+2|0]|0,u[g+3|0]|0,u[g+4|0]|0,u[g+5|0]|0,u[g+6|0]|0,u[g+7|0]|0,u[g+8|0]|0),g=g+9|0,0)}function Bt(I){return I=I|0,1}function ps(I){return I=I|0,H(),g=g+1|0,0}var ws=[x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,_,T,S,N,Bt,Bt,Bt,Bt,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,n,s,l,p,Bt,Bt,Bt,Bt,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,F,P,z,W,Bt,Bt,Bt,rt,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,o,a,m,B,Bt,Bt,Bt,L,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,et,ht,st,tt,Bt,Bt,Bt,bt,Nt,Nt,Nt,Nt,Nt,Nt,Nt,Nt,Nt,Nt,Nt,Nt,Nt,Nt,Nt,Nt,Nt,Nt,Nt,Nt,Nt,Nt,Nt,Nt,ji,Zi,Qi,ts,Bt,Bt,Bt,es,de,de,de,de,de,de,Ot,Ot,Ot,Ot,Ot,Ot,Ot,Ot,Ot,Ot,Ot,Ot,Ot,Ot,Ot,Ot,Ot,Ot,rs,ns,is,ss,Bt,Bt,Bt,Bt,vt,vt,vt,vt,vt,vt,vt,vt,vt,vt,vt,vt,vt,vt,vt,vt,vt,vt,vt,vt,os,as,us,cs,fs,hs,ls,ds,Bt,Bt,Bt,ps];return{parse:Tt}},ir={},Pt={};const zr=nr.BigNumber;Pt.MT={POS_INT:0,NEG_INT:1,BYTE_STRING:2,UTF8_STRING:3,ARRAY:4,MAP:5,TAG:6,SIMPLE_FLOAT:7};Pt.TAG={DATE_STRING:0,DATE_EPOCH:1,POS_BIGINT:2,NEG_BIGINT:3,DECIMAL_FRAC:4,BIGFLOAT:5,BASE64URL_EXPECTED:21,BASE64_EXPECTED:22,BASE16_EXPECTED:23,CBOR:24,URI:32,BASE64URL:33,BASE64:34,REGEXP:35,MIME:36};Pt.NUMBYTES={ZERO:0,ONE:24,TWO:25,FOUR:26,EIGHT:27,INDEFINITE:31};Pt.SIMPLE={FALSE:20,TRUE:21,NULL:22,UNDEFINED:23};Pt.SYMS={NULL:Symbol("null"),UNDEFINED:Symbol("undef"),PARENT:Symbol("parent"),BREAK:Symbol("break"),STREAM:Symbol("stream")};Pt.SHIFT32=Math.pow(2,32);Pt.SHIFT16=Math.pow(2,16);Pt.MAX_SAFE_HIGH=2097151;Pt.NEG_ONE=new zr(-1);Pt.TEN=new zr(10);Pt.TWO=new zr(2);Pt.PARENT={ARRAY:0,OBJECT:1,MAP:2,TAG:3,BYTE_STRING:4,UTF8_STRING:5};(function(e){const{Buffer:t}=Re,r=nr.BigNumber,i=Pt,u=i.SHIFT32,d=i.SHIFT16,w=2097151;e.parseHalf=function(A){var U,R,D;return D=A[0]&128?-1:1,U=(A[0]&124)>>2,R=(A[0]&3)<<8|A[1],U?U===31?D*(R?NaN:1/0):D*Math.pow(2,U-25)*(1024+R):D*5960464477539063e-23*R};function c(b){return b<16?"0"+b.toString(16):b.toString(16)}e.arrayBufferToBignumber=function(b){const A=b.byteLength;let U="";for(let R=0;R<A;R++)U+=c(b[R]);return new r(U,16)},e.buildMap=b=>{const A=new Map,U=Object.keys(b),R=U.length;for(let D=0;D<R;D++)A.set(U[D],b[U[D]]);return A},e.buildInt32=(b,A)=>b*d+A,e.buildInt64=(b,A,U,R)=>{const D=e.buildInt32(b,A),O=e.buildInt32(U,R);return D>w?new r(D).times(u).plus(O):D*u+O},e.writeHalf=function(A,U){const R=t.allocUnsafe(4);R.writeFloatBE(U,0);const D=R.readUInt32BE(0);if(D&8191)return!1;var O=D>>16&32768;const q=D>>23&255,V=D&8388607;if(q>=113&&q<=142)O+=(q-112<<10)+(V>>13);else if(q>=103&&q<113){if(V&(1<<126-q)-1)return!1;O+=V+8388608>>126-q}else return!1;return A.writeUInt16BE(O,0),!0},e.keySorter=function(b,A){var U=b[0].byteLength,R=A[0].byteLength;return U>R?1:R>U?-1:b[0].compare(A[0])},e.isNegativeZero=b=>b===0&&1/b<0,e.nextPowerOf2=b=>{let A=0;if(b&&!(b&b-1))return b;for(;b!==0;)b>>=1,A+=1;return 1<<A}})(ir);const Kr=Pt,Qs=Kr.MT,Me=Kr.SIMPLE,cr=Kr.SYMS;let to=class Ur{constructor(t){if(typeof t!="number")throw new Error("Invalid Simple type: "+typeof t);if(t<0||t>255||(t|0)!==t)throw new Error("value must be a small positive integer: "+t);this.value=t}toString(){return"simple("+this.value+")"}inspect(){return"simple("+this.value+")"}encodeCBOR(t){return t._pushInt(this.value,Qs.SIMPLE_FLOAT)}static isSimple(t){return t instanceof Ur}static decode(t,r){switch(r==null&&(r=!0),t){case Me.FALSE:return!1;case Me.TRUE:return!0;case Me.NULL:return r?null:cr.NULL;case Me.UNDEFINED:return r?void 0:cr.UNDEFINED;case-1:if(!r)throw new Error("Invalid BREAK");return cr.BREAK;default:return new Ur(t)}}};var li=to;let eo=class Nr{constructor(t,r,i){if(this.tag=t,this.value=r,this.err=i,typeof this.tag!="number")throw new Error("Invalid tag type ("+typeof this.tag+")");if(this.tag<0||(this.tag|0)!==this.tag)throw new Error("Tag must be a positive integer: "+this.tag)}toString(){return`${this.tag}(${JSON.stringify(this.value)})`}encodeCBOR(t){return t._pushTag(this.tag),t.pushAny(this.value)}convert(t){var r,i;if(i=t!=null?t[this.tag]:void 0,typeof i!="function"&&(i=Nr["_tag"+this.tag],typeof i!="function"))return this;try{return i.call(Nr,this.value)}catch(u){return r=u,this.err=r,this}}};var di=eo;const pi=self.location?self.location.protocol+"//"+self.location.host:"",Fr=self.URL;let ro=class{constructor(t="",r=pi){this.super=new Fr(t,r),this.path=this.pathname+this.search,this.auth=this.username&&this.password?this.username+":"+this.password:null,this.query=this.search&&this.search.startsWith("?")?this.search.slice(1):null}get hash(){return this.super.hash}get host(){return this.super.host}get hostname(){return this.super.hostname}get href(){return this.super.href}get origin(){return this.super.origin}get password(){return this.super.password}get pathname(){return this.super.pathname}get port(){return this.super.port}get protocol(){return this.super.protocol}get search(){return this.super.search}get searchParams(){return this.super.searchParams}get username(){return this.super.username}set hash(t){this.super.hash=t}set host(t){this.super.host=t}set hostname(t){this.super.hostname=t}set href(t){this.super.href=t}set origin(t){this.super.origin=t}set password(t){this.super.password=t}set pathname(t){this.super.pathname=t}set port(t){this.super.port=t}set protocol(t){this.super.protocol=t}set search(t){this.super.search=t}set searchParams(t){this.super.searchParams=t}set username(t){this.super.username=t}createObjectURL(t){return this.super.createObjectURL(t)}revokeObjectURL(t){this.super.revokeObjectURL(t)}toJSON(){return this.super.toJSON()}toString(){return this.super.toString()}format(){return this.toString()}};function no(e){if(typeof e=="string")return new Fr(e).toString();if(!(e instanceof Fr)){const t=e.username&&e.password?`${e.username}:${e.password}@`:"",r=e.auth?e.auth+"@":"",i=e.port?":"+e.port:"",u=e.protocol?e.protocol+"//":"",d=e.host||"",w=e.hostname||"",c=e.search||(e.query?"?"+e.query:""),b=e.hash||"",A=e.pathname||"",U=e.path||A+c;return`${u}${t||r}${d||w+i}${U}${b}`}}var wi={URLWithLegacySupport:ro,URLSearchParams:self.URLSearchParams,defaultBase:pi,format:no};const{URLWithLegacySupport:pn,format:io}=wi;var so=(e,t={},r={},i)=>{let u=t.protocol?t.protocol.replace(":",""):"http";u=(r[u]||i||u)+":";let d;try{d=new pn(e)}catch{d={}}const w=Object.assign({},t,{protocol:u||d.protocol,host:t.host||d.host});return new pn(e,io(w)).toString()};const{URLWithLegacySupport:oo,format:ao,URLSearchParams:uo,defaultBase:co}=wi,fo=so;var yi={URL:oo,URLSearchParams:uo,format:ao,relative:fo,defaultBase:co};const{Buffer:we}=Re,wn=ve,ho=nr.BigNumber,lo=Zs,Mt=ir,It=Pt,po=li,wo=di,{URL:yo}=yi;let vr=class Lr{constructor(t){t=t||{},!t.size||t.size<65536?t.size=65536:t.size=Mt.nextPowerOf2(t.size),this._heap=new ArrayBuffer(t.size),this._heap8=new Uint8Array(this._heap),this._buffer=we.from(this._heap),this._reset(),this._knownTags=Object.assign({0:r=>new Date(r),1:r=>new Date(r*1e3),2:r=>Mt.arrayBufferToBignumber(r),3:r=>It.NEG_ONE.minus(Mt.arrayBufferToBignumber(r)),4:r=>It.TEN.pow(r[0]).times(r[1]),5:r=>It.TWO.pow(r[0]).times(r[1]),32:r=>new yo(r),35:r=>new RegExp(r)},t.tags),this.parser=lo(Ee,{log:console.log.bind(console),pushInt:this.pushInt.bind(this),pushInt32:this.pushInt32.bind(this),pushInt32Neg:this.pushInt32Neg.bind(this),pushInt64:this.pushInt64.bind(this),pushInt64Neg:this.pushInt64Neg.bind(this),pushFloat:this.pushFloat.bind(this),pushFloatSingle:this.pushFloatSingle.bind(this),pushFloatDouble:this.pushFloatDouble.bind(this),pushTrue:this.pushTrue.bind(this),pushFalse:this.pushFalse.bind(this),pushUndefined:this.pushUndefined.bind(this),pushNull:this.pushNull.bind(this),pushInfinity:this.pushInfinity.bind(this),pushInfinityNeg:this.pushInfinityNeg.bind(this),pushNaN:this.pushNaN.bind(this),pushNaNNeg:this.pushNaNNeg.bind(this),pushArrayStart:this.pushArrayStart.bind(this),pushArrayStartFixed:this.pushArrayStartFixed.bind(this),pushArrayStartFixed32:this.pushArrayStartFixed32.bind(this),pushArrayStartFixed64:this.pushArrayStartFixed64.bind(this),pushObjectStart:this.pushObjectStart.bind(this),pushObjectStartFixed:this.pushObjectStartFixed.bind(this),pushObjectStartFixed32:this.pushObjectStartFixed32.bind(this),pushObjectStartFixed64:this.pushObjectStartFixed64.bind(this),pushByteString:this.pushByteString.bind(this),pushByteStringStart:this.pushByteStringStart.bind(this),pushUtf8String:this.pushUtf8String.bind(this),pushUtf8StringStart:this.pushUtf8StringStart.bind(this),pushSimpleUnassigned:this.pushSimpleUnassigned.bind(this),pushTagUnassigned:this.pushTagUnassigned.bind(this),pushTagStart:this.pushTagStart.bind(this),pushTagStart4:this.pushTagStart4.bind(this),pushTagStart8:this.pushTagStart8.bind(this),pushBreak:this.pushBreak.bind(this)},this._heap)}get _depth(){return this._parents.length}get _currentParent(){return this._parents[this._depth-1]}get _ref(){return this._currentParent.ref}_closeParent(){var t=this._parents.pop();if(t.length>0)throw new Error(`Missing ${t.length} elements`);switch(t.type){case It.PARENT.TAG:this._push(this.createTag(t.ref[0],t.ref[1]));break;case It.PARENT.BYTE_STRING:this._push(this.createByteString(t.ref,t.length));break;case It.PARENT.UTF8_STRING:this._push(this.createUtf8String(t.ref,t.length));break;case It.PARENT.MAP:if(t.values%2>0)throw new Error("Odd number of elements in the map");this._push(this.createMap(t.ref,t.length));break;case It.PARENT.OBJECT:if(t.values%2>0)throw new Error("Odd number of elements in the map");this._push(this.createObject(t.ref,t.length));break;case It.PARENT.ARRAY:this._push(this.createArray(t.ref,t.length));break}this._currentParent&&this._currentParent.type===It.PARENT.TAG&&this._dec()}_dec(){const t=this._currentParent;t.length<0||(t.length--,t.length===0&&this._closeParent())}_push(t,r){const i=this._currentParent;switch(i.values++,i.type){case It.PARENT.ARRAY:case It.PARENT.BYTE_STRING:case It.PARENT.UTF8_STRING:i.length>-1?this._ref[this._ref.length-i.length]=t:this._ref.push(t),this._dec();break;case It.PARENT.OBJECT:i.tmpKey!=null?(this._ref[i.tmpKey]=t,i.tmpKey=null,this._dec()):(i.tmpKey=t,typeof i.tmpKey!="string"&&(i.type=It.PARENT.MAP,i.ref=Mt.buildMap(i.ref)));break;case It.PARENT.MAP:i.tmpKey!=null?(this._ref.set(i.tmpKey,t),i.tmpKey=null,this._dec()):i.tmpKey=t;break;case It.PARENT.TAG:this._ref.push(t),r||this._dec();break;default:throw new Error("Unknown parent type")}}_createParent(t,r,i){this._parents[this._depth]={type:r,length:i,ref:t,values:0,tmpKey:null}}_reset(){this._res=[],this._parents=[{type:It.PARENT.ARRAY,length:-1,ref:this._res,values:0,tmpKey:null}]}createTag(t,r){const i=this._knownTags[t];return i?i(r):new wo(t,r)}createMap(t,r){return t}createObject(t,r){return t}createArray(t,r){return t}createByteString(t,r){return we.concat(t)}createByteStringFromHeap(t,r){return t===r?we.alloc(0):we.from(this._heap.slice(t,r))}createInt(t){return t}createInt32(t,r){return Mt.buildInt32(t,r)}createInt64(t,r,i,u){return Mt.buildInt64(t,r,i,u)}createFloat(t){return t}createFloatSingle(t,r,i,u){return wn.read([t,r,i,u],0,!1,23,4)}createFloatDouble(t,r,i,u,d,w,c,b){return wn.read([t,r,i,u,d,w,c,b],0,!1,52,8)}createInt32Neg(t,r){return-1-Mt.buildInt32(t,r)}createInt64Neg(t,r,i,u){const d=Mt.buildInt32(t,r),w=Mt.buildInt32(i,u);return d>It.MAX_SAFE_HIGH?It.NEG_ONE.minus(new ho(d).times(It.SHIFT32).plus(w)):-1-(d*It.SHIFT32+w)}createTrue(){return!0}createFalse(){return!1}createNull(){return null}createUndefined(){}createInfinity(){return 1/0}createInfinityNeg(){return-1/0}createNaN(){return NaN}createNaNNeg(){return NaN}createUtf8String(t,r){return t.join("")}createUtf8StringFromHeap(t,r){return t===r?"":this._buffer.toString("utf8",t,r)}createSimpleUnassigned(t){return new po(t)}pushInt(t){this._push(this.createInt(t))}pushInt32(t,r){this._push(this.createInt32(t,r))}pushInt64(t,r,i,u){this._push(this.createInt64(t,r,i,u))}pushFloat(t){this._push(this.createFloat(t))}pushFloatSingle(t,r,i,u){this._push(this.createFloatSingle(t,r,i,u))}pushFloatDouble(t,r,i,u,d,w,c,b){this._push(this.createFloatDouble(t,r,i,u,d,w,c,b))}pushInt32Neg(t,r){this._push(this.createInt32Neg(t,r))}pushInt64Neg(t,r,i,u){this._push(this.createInt64Neg(t,r,i,u))}pushTrue(){this._push(this.createTrue())}pushFalse(){this._push(this.createFalse())}pushNull(){this._push(this.createNull())}pushUndefined(){this._push(this.createUndefined())}pushInfinity(){this._push(this.createInfinity())}pushInfinityNeg(){this._push(this.createInfinityNeg())}pushNaN(){this._push(this.createNaN())}pushNaNNeg(){this._push(this.createNaNNeg())}pushArrayStart(){this._createParent([],It.PARENT.ARRAY,-1)}pushArrayStartFixed(t){this._createArrayStartFixed(t)}pushArrayStartFixed32(t,r){const i=Mt.buildInt32(t,r);this._createArrayStartFixed(i)}pushArrayStartFixed64(t,r,i,u){const d=Mt.buildInt64(t,r,i,u);this._createArrayStartFixed(d)}pushObjectStart(){this._createObjectStartFixed(-1)}pushObjectStartFixed(t){this._createObjectStartFixed(t)}pushObjectStartFixed32(t,r){const i=Mt.buildInt32(t,r);this._createObjectStartFixed(i)}pushObjectStartFixed64(t,r,i,u){const d=Mt.buildInt64(t,r,i,u);this._createObjectStartFixed(d)}pushByteStringStart(){this._parents[this._depth]={type:It.PARENT.BYTE_STRING,length:-1,ref:[],values:0,tmpKey:null}}pushByteString(t,r){this._push(this.createByteStringFromHeap(t,r))}pushUtf8StringStart(){this._parents[this._depth]={type:It.PARENT.UTF8_STRING,length:-1,ref:[],values:0,tmpKey:null}}pushUtf8String(t,r){this._push(this.createUtf8StringFromHeap(t,r))}pushSimpleUnassigned(t){this._push(this.createSimpleUnassigned(t))}pushTagStart(t){this._parents[this._depth]={type:It.PARENT.TAG,length:1,ref:[t]}}pushTagStart4(t,r){this.pushTagStart(Mt.buildInt32(t,r))}pushTagStart8(t,r,i,u){this.pushTagStart(Mt.buildInt64(t,r,i,u))}pushTagUnassigned(t){this._push(this.createTag(t))}pushBreak(){if(this._currentParent.length>-1)throw new Error("Unexpected break");this._closeParent()}_createObjectStartFixed(t){if(t===0){this._push(this.createObject({}));return}this._createParent({},It.PARENT.OBJECT,t)}_createArrayStartFixed(t){if(t===0){this._push(this.createArray([]));return}this._createParent(new Array(t),It.PARENT.ARRAY,t)}_decode(t){if(t.byteLength===0)throw new Error("Input too short");this._reset(),this._heap8.set(t);const r=this.parser.parse(t.byteLength);if(this._depth>1){for(;this._currentParent.length===0;)this._closeParent();if(this._depth>1)throw new Error("Undeterminated nesting")}if(r>0)throw new Error("Failed to parse");if(this._res.length===0)throw new Error("No valid result")}decodeFirst(t){return this._decode(t),this._res[0]}decodeAll(t){return this._decode(t),this._res}static decode(t,r){return typeof t=="string"&&(t=we.from(t,r||"hex")),new Lr({size:t.length}).decodeFirst(t)}static decodeAll(t,r){return typeof t=="string"&&(t=we.from(t,r||"hex")),new Lr({size:t.length}).decodeAll(t)}};vr.decodeFirst=vr.decode;var gi=vr;const{Buffer:fr}=Re,go=gi,xo=ir;class Yr extends go{createTag(t,r){return`${t}(${r})`}createInt(t){return super.createInt(t).toString()}createInt32(t,r){return super.createInt32(t,r).toString()}createInt64(t,r,i,u){return super.createInt64(t,r,i,u).toString()}createInt32Neg(t,r){return super.createInt32Neg(t,r).toString()}createInt64Neg(t,r,i,u){return super.createInt64Neg(t,r,i,u).toString()}createTrue(){return"true"}createFalse(){return"false"}createFloat(t){const r=super.createFloat(t);return xo.isNegativeZero(t)?"-0_1":`${r}_1`}createFloatSingle(t,r,i,u){return`${super.createFloatSingle(t,r,i,u)}_2`}createFloatDouble(t,r,i,u,d,w,c,b){return`${super.createFloatDouble(t,r,i,u,d,w,c,b)}_3`}createByteString(t,r){const i=t.join(", ");return r===-1?`(_ ${i})`:`h'${i}`}createByteStringFromHeap(t,r){return`h'${fr.from(super.createByteStringFromHeap(t,r)).toString("hex")}'`}createInfinity(){return"Infinity_1"}createInfinityNeg(){return"-Infinity_1"}createNaN(){return"NaN_1"}createNaNNeg(){return"-NaN_1"}createNull(){return"null"}createUndefined(){return"undefined"}createSimpleUnassigned(t){return`simple(${t})`}createArray(t,r){const i=super.createArray(t,r);return r===-1?`[_ ${i.join(", ")}]`:`[${i.join(", ")}]`}createMap(t,r){const i=super.createMap(t),u=Array.from(i.keys()).reduce(yn(i),"");return r===-1?`{_ ${u}}`:`{${u}}`}createObject(t,r){const i=super.createObject(t),u=Object.keys(i).reduce(yn(i),"");return r===-1?`{_ ${u}}`:`{${u}}`}createUtf8String(t,r){const i=t.join(", ");return r===-1?`(_ ${i})`:`"${i}"`}createUtf8StringFromHeap(t,r){return`"${fr.from(super.createUtf8StringFromHeap(t,r)).toString("utf8")}"`}static diagnose(t,r){return typeof t=="string"&&(t=fr.from(t,r||"hex")),new Yr().decodeFirst(t)}}var mo=Yr;function yn(e){return(t,r)=>t?`${t}, ${r}: ${e[r]}`:`${r}: ${e[r]}`}const{Buffer:Wt}=Re,{URL:bo}=yi,Rr=nr.BigNumber,hr=ir,Rt=Pt,Gt=Rt.MT,Ce=Rt.NUMBYTES,gn=Rt.SHIFT32,xn=Rt.SYMS,ye=Rt.TAG,Eo=Rt.MT.SIMPLE_FLOAT<<5|Rt.NUMBYTES.TWO,_o=Rt.MT.SIMPLE_FLOAT<<5|Rt.NUMBYTES.FOUR,Io=Rt.MT.SIMPLE_FLOAT<<5|Rt.NUMBYTES.EIGHT,Bo=Rt.MT.SIMPLE_FLOAT<<5|Rt.SIMPLE.TRUE,Ao=Rt.MT.SIMPLE_FLOAT<<5|Rt.SIMPLE.FALSE,So=Rt.MT.SIMPLE_FLOAT<<5|Rt.SIMPLE.UNDEFINED,mn=Rt.MT.SIMPLE_FLOAT<<5|Rt.SIMPLE.NULL,To=new Rr("0x20000000000000"),Uo=Wt.from("f97e00","hex"),No=Wt.from("f9fc00","hex"),Fo=Wt.from("f97c00","hex");function vo(e){return{}.toString.call(e).slice(8,-1)}class Xe{constructor(t){t=t||{},this.streaming=typeof t.stream=="function",this.onData=t.stream,this.semanticTypes=[[bo,this._pushUrl],[Rr,this._pushBigNumber]];const r=t.genTypes||[],i=r.length;for(let u=0;u<i;u++)this.addSemanticType(r[u][0],r[u][1]);this._reset()}addSemanticType(t,r){const i=this.semanticTypes.length;for(let u=0;u<i;u++)if(this.semanticTypes[u][0]===t){const w=this.semanticTypes[u][1];return this.semanticTypes[u][1]=r,w}return this.semanticTypes.push([t,r]),null}push(t){return t&&(this.result[this.offset]=t,this.resultMethod[this.offset]=0,this.resultLength[this.offset]=t.length,this.offset++,this.streaming&&this.onData(this.finalize())),!0}pushWrite(t,r,i){return this.result[this.offset]=t,this.resultMethod[this.offset]=r,this.resultLength[this.offset]=i,this.offset++,this.streaming&&this.onData(this.finalize()),!0}_pushUInt8(t){return this.pushWrite(t,1,1)}_pushUInt16BE(t){return this.pushWrite(t,2,2)}_pushUInt32BE(t){return this.pushWrite(t,3,4)}_pushDoubleBE(t){return this.pushWrite(t,4,8)}_pushNaN(){return this.push(Uo)}_pushInfinity(t){const r=t<0?No:Fo;return this.push(r)}_pushFloat(t){const r=Wt.allocUnsafe(2);if(hr.writeHalf(r,t)&&hr.parseHalf(r)===t)return this._pushUInt8(Eo)&&this.push(r);const i=Wt.allocUnsafe(4);return i.writeFloatBE(t,0),i.readFloatBE(0)===t?this._pushUInt8(_o)&&this.push(i):this._pushUInt8(Io)&&this._pushDoubleBE(t)}_pushInt(t,r,i){const u=r<<5;return t<24?this._pushUInt8(u|t):t<=255?this._pushUInt8(u|Ce.ONE)&&this._pushUInt8(t):t<=65535?this._pushUInt8(u|Ce.TWO)&&this._pushUInt16BE(t):t<=4294967295?this._pushUInt8(u|Ce.FOUR)&&this._pushUInt32BE(t):t<=Number.MAX_SAFE_INTEGER?this._pushUInt8(u|Ce.EIGHT)&&this._pushUInt32BE(Math.floor(t/gn))&&this._pushUInt32BE(t%gn):r===Gt.NEG_INT?this._pushFloat(i):this._pushFloat(t)}_pushIntNum(t){return t<0?this._pushInt(-t-1,Gt.NEG_INT,t):this._pushInt(t,Gt.POS_INT)}_pushNumber(t){switch(!1){case t===t:return this._pushNaN(t);case isFinite(t):return this._pushInfinity(t);case t%1!==0:return this._pushIntNum(t);default:return this._pushFloat(t)}}_pushString(t){const r=Wt.byteLength(t,"utf8");return this._pushInt(r,Gt.UTF8_STRING)&&this.pushWrite(t,5,r)}_pushBoolean(t){return this._pushUInt8(t?Bo:Ao)}_pushUndefined(t){return this._pushUInt8(So)}_pushArray(t,r){const i=r.length;if(!t._pushInt(i,Gt.ARRAY))return!1;for(let u=0;u<i;u++)if(!t.pushAny(r[u]))return!1;return!0}_pushTag(t){return this._pushInt(t,Gt.TAG)}_pushDate(t,r){return t._pushTag(ye.DATE_EPOCH)&&t.pushAny(Math.round(r/1e3))}_pushBuffer(t,r){return t._pushInt(r.length,Gt.BYTE_STRING)&&t.push(r)}_pushNoFilter(t,r){return t._pushBuffer(t,r.slice())}_pushRegexp(t,r){return t._pushTag(ye.REGEXP)&&t.pushAny(r.source)}_pushSet(t,r){if(!t._pushInt(r.size,Gt.ARRAY))return!1;for(const i of r)if(!t.pushAny(i))return!1;return!0}_pushUrl(t,r){return t._pushTag(ye.URI)&&t.pushAny(r.format())}_pushBigint(t){let r=ye.POS_BIGINT;t.isNegative()&&(t=t.negated().minus(1),r=ye.NEG_BIGINT);let i=t.toString(16);i.length%2&&(i="0"+i);const u=Wt.from(i,"hex");return this._pushTag(r)&&this._pushBuffer(this,u)}_pushBigNumber(t,r){if(r.isNaN())return t._pushNaN();if(!r.isFinite())return t._pushInfinity(r.isNegative()?-1/0:1/0);if(r.isInteger())return t._pushBigint(r);if(!(t._pushTag(ye.DECIMAL_FRAC)&&t._pushInt(2,Gt.ARRAY)))return!1;const i=r.decimalPlaces(),u=r.multipliedBy(new Rr(10).pow(i));return t._pushIntNum(-i)?u.abs().isLessThan(To)?t._pushIntNum(u.toNumber()):t._pushBigint(u):!1}_pushMap(t,r){return t._pushInt(r.size,Gt.MAP)?this._pushRawMap(r.size,Array.from(r)):!1}_pushObject(t){if(!t)return this._pushUInt8(mn);for(var r=this.semanticTypes.length,i=0;i<r;i++)if(t instanceof this.semanticTypes[i][0])return this.semanticTypes[i][1].call(t,this,t);var u=t.encodeCBOR;if(typeof u=="function")return u.call(t,this);var d=Object.keys(t),w=d.length;return this._pushInt(w,Gt.MAP)?this._pushRawMap(w,d.map(c=>[c,t[c]])):!1}_pushRawMap(t,r){r=r.map(function(u){return u[0]=Xe.encode(u[0]),u}).sort(hr.keySorter);for(var i=0;i<t;i++)if(!this.push(r[i][0])||!this.pushAny(r[i][1]))return!1;return!0}write(t){return this.pushAny(t)}pushAny(t){var r=vo(t);switch(r){case"Number":return this._pushNumber(t);case"String":return this._pushString(t);case"Boolean":return this._pushBoolean(t);case"Object":return this._pushObject(t);case"Array":return this._pushArray(this,t);case"Uint8Array":return this._pushBuffer(this,Wt.isBuffer(t)?t:Wt.from(t));case"Null":return this._pushUInt8(mn);case"Undefined":return this._pushUndefined(t);case"Map":return this._pushMap(this,t);case"Set":return this._pushSet(this,t);case"URL":return this._pushUrl(this,t);case"BigNumber":return this._pushBigNumber(this,t);case"Date":return this._pushDate(this,t);case"RegExp":return this._pushRegexp(this,t);case"Symbol":switch(t){case xn.NULL:return this._pushObject(null);case xn.UNDEFINED:return this._pushUndefined(void 0);default:throw new Error("Unknown symbol: "+t.toString())}default:throw new Error("Unknown type: "+typeof t+", "+(t?t.toString():""))}}finalize(){if(this.offset===0)return null;for(var t=this.result,r=this.resultLength,i=this.resultMethod,u=this.offset,d=0,w=0;w<u;w++)d+=r[w];var c=Wt.allocUnsafe(d),b=0,A=0;for(w=0;w<u;w++){switch(A=r[w],i[w]){case 0:t[w].copy(c,b);break;case 1:c.writeUInt8(t[w],b,!0);break;case 2:c.writeUInt16BE(t[w],b,!0);break;case 3:c.writeUInt32BE(t[w],b,!0);break;case 4:c.writeDoubleBE(t[w],b,!0);break;case 5:c.write(t[w],b,A,"utf8");break;default:throw new Error("unkown method")}b+=A}var U=c;return this._reset(),U}_reset(){this.result=[],this.resultMethod=[],this.resultLength=[],this.offset=0}static encode(t){const r=new Xe;if(!r.pushAny(t))throw new Error("Failed to encode input");return r.finalize()}}var Lo=Xe;(function(e){e.Diagnose=mo,e.Decoder=gi,e.Encoder=Lo,e.Simple=li,e.Tagged=di,e.decodeAll=e.Decoder.decodeAll,e.decodeFirst=e.Decoder.decodeFirst,e.diagnose=e.Diagnose.diagnose,e.encode=e.Encoder.encode,e.decode=e.Decoder.decode,e.leveldb={decode:e.Decoder.decodeAll,encode:e.Encoder.encode,buffer:!0,name:"cbor"}})(fi);const xi=ys(fi);function he(e){return Ue($s.create().update(new Uint8Array(e)).digest())}function He(e){if(e instanceof xi.Tagged)return He(e.value);if(typeof e=="string")return mi(e);if(typeof e=="number")return he(ln(e));if(e instanceof ArrayBuffer||ArrayBuffer.isView(e))return he(e);if(Array.isArray(e)){const t=e.map(He);return he(Ne(...t))}else{if(e&&typeof e=="object"&&e._isPrincipal)return he(e.toUint8Array());if(typeof e=="object"&&e!==null&&typeof e.toHash=="function")return He(e.toHash());if(typeof e=="object")return bi(e);if(typeof e=="bigint")return he(ln(e))}throw Object.assign(new Error(`Attempt to hash a value of unsupported type: ${e}`),{value:e})}const mi=e=>{const t=new TextEncoder().encode(e);return he(t)};function Vr(e){return bi(e)}function bi(e){const i=Object.entries(e).filter(([,w])=>w!==void 0).map(([w,c])=>{const b=mi(w),A=He(c);return[b,A]}).sort(([w],[c])=>ri(w,c)),u=Ne(...i.map(w=>Ne(...w)));return he(u)}var Ro=function(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,i=Object.getOwnPropertySymbols(e);u<i.length;u++)t.indexOf(i[u])<0&&Object.prototype.propertyIsEnumerable.call(e,i[u])&&(r[i[u]]=e[i[u]]);return r};const Oo=new TextEncoder().encode(`
ic-request`);class Wr{getPrincipal(){return this._principal||(this._principal=ue.selfAuthenticating(new Uint8Array(this.getPublicKey().toDer()))),this._principal}async transformRequest(t){const{body:r}=t,i=Ro(t,["body"]),u=await Vr(r);return Object.assign(Object.assign({},i),{body:{content:r,sender_pubkey:this.getPublicKey().toDer(),sender_sig:await this.sign(Ne(Oo,u))}})}}class bn{getPrincipal(){return ue.anonymous()}async transformRequest(t){return Object.assign(Object.assign({},t),{body:{content:t.body}})}}var kt={},Ie={},At={};Object.defineProperty(At,"__esModule",{value:!0});const Do=9007199254740992;function Zt(e,...t){const r=new Uint8Array(e.byteLength+t.reduce((u,d)=>u+d.byteLength,0));r.set(new Uint8Array(e),0);let i=e.byteLength;for(const u of t)r.set(new Uint8Array(u),i),i+=u.byteLength;return r.buffer}function Kt(e,t,r){r=r.replace(/[^0-9a-fA-F]/g,"");const i=2**(t-24);r=r.slice(-i*2).padStart(i*2,"0");const u=[(e<<5)+t].concat(r.match(/../g).map(d=>parseInt(d,16)));return new Uint8Array(u).buffer}function sr(e,t){if(t<24)return new Uint8Array([(e<<5)+t]).buffer;{const r=t<=255?24:t<=65535?25:t<=4294967295?26:27;return Kt(e,r,t.toString(16))}}function Ei(e){const t=[];for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t.push(i):i<2048?t.push(192|i>>6,128|i&63):i<55296||i>=57344?t.push(224|i>>12,128|i>>6&63,128|i&63):(r++,i=(i&1023)<<10|e.charCodeAt(r)&1023,t.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63))}return Zt(new Uint8Array(sr(3,e.length)),new Uint8Array(t))}function Po(e,t){if(e==14277111)return Zt(new Uint8Array([217,217,247]),t);if(e<24)return Zt(new Uint8Array([192+e]),t);{const r=e<=255?24:e<=65535?25:e<=4294967295?26:27,i=2**(r-24),u=e.toString(16).slice(-i*2).padStart(i*2,"0"),d=[192+r].concat(u.match(/../g).map(w=>parseInt(w,16)));return new Uint8Array(d).buffer}}At.tagged=Po;function Oe(e){return new Uint8Array(e).buffer}At.raw=Oe;function qr(e){if(isNaN(e))throw new RangeError("Invalid number.");e=Math.min(Math.max(0,e),23);const t=[0+e];return new Uint8Array(t).buffer}At.uSmall=qr;function _i(e,t){if(e=parseInt(""+e,t),isNaN(e))throw new RangeError("Invalid number.");return e=Math.min(Math.max(0,e),255),e=e.toString(16),Kt(0,24,e)}At.u8=_i;function Ii(e,t){if(e=parseInt(""+e,t),isNaN(e))throw new RangeError("Invalid number.");return e=Math.min(Math.max(0,e),65535),e=e.toString(16),Kt(0,25,e)}At.u16=Ii;function Bi(e,t){if(e=parseInt(""+e,t),isNaN(e))throw new RangeError("Invalid number.");return e=Math.min(Math.max(0,e),4294967295),e=e.toString(16),Kt(0,26,e)}At.u32=Bi;function Xr(e,t){if(typeof e=="string"&&t==16){if(e.match(/[^0-9a-fA-F]/))throw new RangeError("Invalid number.");return Kt(0,27,e)}if(e=parseInt(""+e,t),isNaN(e))throw new RangeError("Invalid number.");return e=Math.min(Math.max(0,e),Do),e=e.toString(16),Kt(0,27,e)}At.u64=Xr;function Ai(e){if(isNaN(e))throw new RangeError("Invalid number.");if(e===0)return qr(0);e=Math.min(Math.max(0,-e),24)-1;const t=[32+e];return new Uint8Array(t).buffer}At.iSmall=Ai;function Si(e,t){if(e=parseInt(""+e,t),isNaN(e))throw new RangeError("Invalid number.");return e=Math.min(Math.max(0,-e-1),255),e=e.toString(16),Kt(1,24,e)}At.i8=Si;function Ti(e,t){if(e=parseInt(""+e,t),isNaN(e))throw new RangeError("Invalid number.");return e=Math.min(Math.max(0,-e-1),65535),e=e.toString(16),Kt(1,25,e)}At.i16=Ti;function Ui(e,t){if(e=parseInt(""+e,t),isNaN(e))throw new RangeError("Invalid number.");return e=Math.min(Math.max(0,-e-1),4294967295),e=e.toString(16),Kt(1,26,e)}At.i32=Ui;function Ni(e,t){if(typeof e=="string"&&t==16){if(e.startsWith("-")?e=e.slice(1):e="0",e.match(/[^0-9a-fA-F]/)||e.length>16)throw new RangeError("Invalid number.");let r=!1,i=e.split("").reduceRight((u,d)=>{if(r)return d+u;let w=parseInt(d,16)-1;return w>=0?(r=!0,w.toString(16)+u):"f"+u},"");return r?Kt(1,27,i):Xr(0)}if(e=parseInt(""+e,t),isNaN(e))throw new RangeError("Invalid number.");return e=Math.min(Math.max(0,-e-1),9007199254740992),e=e.toString(16),Kt(1,27,e)}At.i64=Ni;function Mo(e){return e>=0?e<24?qr(e):e<=255?_i(e):e<=65535?Ii(e):e<=4294967295?Bi(e):Xr(e):e>=-24?Ai(e):e>=-255?Si(e):e>=-65535?Ti(e):e>=-4294967295?Ui(e):Ni(e)}At.number=Mo;function Co(e){return Zt(sr(2,e.byteLength),e)}At.bytes=Co;function ko(e){return Ei(e)}At.string=ko;function $o(e){return Zt(sr(4,e.length),...e)}At.array=$o;function Go(e,t=!1){e instanceof Map||(e=new Map(Object.entries(e)));let r=Array.from(e.entries());return t&&(r=r.sort(([i],[u])=>i.localeCompare(u))),Zt(sr(5,e.size),...r.map(([i,u])=>Zt(Ei(i),u)))}At.map=Go;function Ho(e){const t=new Float32Array([e]);return Zt(new Uint8Array([250]),new Uint8Array(t.buffer))}At.singleFloat=Ho;function zo(e){const t=new Float64Array([e]);return Zt(new Uint8Array([251]),new Uint8Array(t.buffer))}At.doubleFloat=zo;function Ko(e){return e?Fi():vi()}At.bool=Ko;function Fi(){return Oe(new Uint8Array([245]))}At.true_=Fi;function vi(){return Oe(new Uint8Array([244]))}At.false_=vi;function Yo(){return Oe(new Uint8Array([246]))}At.null_=Yo;function Vo(){return Oe(new Uint8Array([247]))}At.undefined_=Vo;var Wo=Ee&&Ee.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(Ie,"__esModule",{value:!0});const zt=Wo(At),qo=[ArrayBuffer,Uint8Array,Uint16Array,Uint32Array,Int8Array,Int16Array,Int32Array,Float32Array,Float64Array];class Li{constructor(t,r=!1){this._serializer=t,this._stable=r,this.name="jsonDefault",this.priority=-100}match(t){return["undefined","boolean","number","string","object"].indexOf(typeof t)!=-1}encode(t){switch(typeof t){case"undefined":return zt.undefined_();case"boolean":return zt.bool(t);case"number":return Math.floor(t)===t?zt.number(t):zt.doubleFloat(t);case"string":return zt.string(t);case"object":if(t===null)return zt.null_();if(Array.isArray(t))return zt.array(t.map(r=>this._serializer.serializeValue(r)));if(qo.find(r=>t instanceof r))return zt.bytes(t.buffer);if(Object.getOwnPropertyNames(t).indexOf("toJSON")!==-1)return this.encode(t.toJSON());if(t instanceof Map){const r=new Map;for(const[i,u]of t.entries())r.set(i,this._serializer.serializeValue(u));return zt.map(r,this._stable)}else{const r=new Map;for(const[i,u]of Object.entries(t))r.set(i,this._serializer.serializeValue(u));return zt.map(r,this._stable)}default:throw new Error("Invalid value.")}}}Ie.JsonDefaultCborEncoder=Li;class Ri{constructor(){this.name="cborEncoder",this.priority=-90}match(t){return typeof t=="object"&&typeof t.toCBOR=="function"}encode(t){return t.toCBOR()}}Ie.ToCborEncoder=Ri;class Oi{constructor(){this._encoders=new Set}static withDefaultEncoders(t=!1){const r=new this;return r.addEncoder(new Li(r,t)),r.addEncoder(new Ri),r}removeEncoder(t){for(const r of this._encoders.values())r.name==t&&this._encoders.delete(r)}addEncoder(t){this._encoders.add(t)}getEncoderFor(t){let r=null;for(const i of this._encoders)(!r||i.priority>r.priority)&&i.match(t)&&(r=i);if(r===null)throw new Error("Could not find an encoder for value.");return r}serializeValue(t){return this.getEncoderFor(t).encode(t)}serialize(t){return this.serializeValue(t)}}Ie.CborSerializer=Oi;class Xo extends Oi{serialize(t){return zt.raw(new Uint8Array([...new Uint8Array([217,217,247]),...new Uint8Array(super.serializeValue(t))]))}}Ie.SelfDescribeCborSerializer=Xo;(function(e){function t(u){for(var d in u)e.hasOwnProperty(d)||(e[d]=u[d])}var r=Ee&&Ee.__importStar||function(u){if(u&&u.__esModule)return u;var d={};if(u!=null)for(var w in u)Object.hasOwnProperty.call(u,w)&&(d[w]=u[w]);return d.default=u,d};Object.defineProperty(e,"__esModule",{value:!0}),t(Ie);const i=r(At);e.value=i})(kt);class Jo{get name(){return"Principal"}get priority(){return 0}match(t){return t&&t._isPrincipal===!0}encode(t){return kt.value.bytes(t.toUint8Array())}}class jo{get name(){return"Buffer"}get priority(){return 1}match(t){return t instanceof ArrayBuffer||ArrayBuffer.isView(t)}encode(t){return kt.value.bytes(new Uint8Array(t))}}class Zo{get name(){return"BigInt"}get priority(){return 1}match(t){return typeof t=="bigint"}encode(t){return t>BigInt(0)?kt.value.tagged(2,kt.value.bytes(ce(t.toString(16)))):kt.value.tagged(3,kt.value.bytes(ce((BigInt("-1")*t).toString(16))))}}const Jr=kt.SelfDescribeCborSerializer.withDefaultEncoders(!0);Jr.addEncoder(new Jo);Jr.addEncoder(new jo);Jr.addEncoder(new Zo);var En;(function(e){e[e.Uint64LittleEndian=71]="Uint64LittleEndian",e[e.Semantic=55799]="Semantic"})(En||(En={}));class a0 extends xi.Decoder{createByteString(t){return Ne(...t)}createByteStringFromHeap(t,r){return t===r?new ArrayBuffer(0):new Uint8Array(this._heap.slice(t,r))}}var _n;(function(e){e.Call="call"})(_n||(_n={}));BigInt(1e6);function Qo(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function Di(e,...t){if(!Qo(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function In(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function ta(e,t){Di(e);const r=t.outputLen;if(e.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}const ge=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const lr=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);function ea(e){if(typeof e!="string")throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array(new TextEncoder().encode(e))}function Pi(e){return typeof e=="string"&&(e=ea(e)),Di(e),e}class ra{clone(){return this._cloneInto()}}function na(e){const t=i=>e().update(Pi(i)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function ia(e=32){if(ge&&typeof ge.getRandomValues=="function")return ge.getRandomValues(new Uint8Array(e));if(ge&&typeof ge.randomBytes=="function")return ge.randomBytes(e);throw new Error("crypto.getRandomValues must be defined")}function sa(e,t,r,i){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,i);const u=BigInt(32),d=BigInt(4294967295),w=Number(r>>u&d),c=Number(r&d),b=i?4:0,A=i?0:4;e.setUint32(t+b,w,i),e.setUint32(t+A,c,i)}class oa extends ra{constructor(t,r,i,u){super(),this.blockLen=t,this.outputLen=r,this.padOffset=i,this.isLE=u,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=lr(this.buffer)}update(t){In(this);const{view:r,buffer:i,blockLen:u}=this;t=Pi(t);const d=t.length;for(let w=0;w<d;){const c=Math.min(u-this.pos,d-w);if(c===u){const b=lr(t);for(;u<=d-w;w+=u)this.process(b,w);continue}i.set(t.subarray(w,w+c),this.pos),this.pos+=c,w+=c,this.pos===u&&(this.process(r,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){In(this),ta(t,this),this.finished=!0;const{buffer:r,view:i,blockLen:u,isLE:d}=this;let{pos:w}=this;r[w++]=128,this.buffer.subarray(w).fill(0),this.padOffset>u-w&&(this.process(i,0),w=0);for(let R=w;R<u;R++)r[R]=0;sa(i,u-8,BigInt(this.length*8),d),this.process(i,0);const c=lr(t),b=this.outputLen;if(b%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const A=b/4,U=this.get();if(A>U.length)throw new Error("_sha2: outputLen bigger than state");for(let R=0;R<A;R++)c.setUint32(4*R,U[R],d)}digest(){const{buffer:t,outputLen:r}=this;this.digestInto(t);const i=t.slice(0,r);return this.destroy(),i}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:r,buffer:i,length:u,finished:d,destroyed:w,pos:c}=this;return t.length=u,t.pos=c,t.finished=d,t.destroyed=w,u%r&&t.buffer.set(i),t}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const jr=BigInt(0),Mi=BigInt(1),aa=BigInt(2);function Zr(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function Qr(e){if(!Zr(e))throw new Error("Uint8Array expected")}function dr(e,t){if(typeof t!="boolean")throw new Error(e+" boolean expected, got "+t)}const ua=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function tn(e){Qr(e);let t="";for(let r=0;r<e.length;r++)t+=ua[e[r]];return t}function Ci(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return e===""?jr:BigInt("0x"+e)}const Xt={_0:48,_9:57,A:65,F:70,a:97,f:102};function Bn(e){if(e>=Xt._0&&e<=Xt._9)return e-Xt._0;if(e>=Xt.A&&e<=Xt.F)return e-(Xt.A-10);if(e>=Xt.a&&e<=Xt.f)return e-(Xt.a-10)}function ki(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const t=e.length,r=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const i=new Uint8Array(r);for(let u=0,d=0;u<r;u++,d+=2){const w=Bn(e.charCodeAt(d)),c=Bn(e.charCodeAt(d+1));if(w===void 0||c===void 0){const b=e[d]+e[d+1];throw new Error('hex string expected, got non-hex character "'+b+'" at index '+d)}i[u]=w*16+c}return i}function ca(e){return Ci(tn(e))}function ze(e){return Qr(e),Ci(tn(Uint8Array.from(e).reverse()))}function $i(e,t){return ki(e.toString(16).padStart(t*2,"0"))}function Or(e,t){return $i(e,t).reverse()}function Jt(e,t,r){let i;if(typeof t=="string")try{i=ki(t)}catch(d){throw new Error(e+" must be hex string or Uint8Array, cause: "+d)}else if(Zr(t))i=Uint8Array.from(t);else throw new Error(e+" must be hex string or Uint8Array");const u=i.length;if(typeof r=="number"&&u!==r)throw new Error(e+" of length "+r+" expected, got "+u);return i}function An(...e){let t=0;for(let i=0;i<e.length;i++){const u=e[i];Qr(u),t+=u.length}const r=new Uint8Array(t);for(let i=0,u=0;i<e.length;i++){const d=e[i];r.set(d,u),u+=d.length}return r}const pr=e=>typeof e=="bigint"&&jr<=e;function fa(e,t,r){return pr(e)&&pr(t)&&pr(r)&&t<=e&&e<r}function Ae(e,t,r,i){if(!fa(t,r,i))throw new Error("expected valid "+e+": "+r+" <= n < "+i+", got "+t)}function ha(e){let t;for(t=0;e>jr;e>>=Mi,t+=1);return t}const la=e=>(aa<<BigInt(e-1))-Mi,da={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||Zr(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function en(e,t,r={}){const i=(u,d,w)=>{const c=da[d];if(typeof c!="function")throw new Error("invalid validator function");const b=e[u];if(!(w&&b===void 0)&&!c(b,e))throw new Error("param "+String(u)+" is invalid. Expected "+d+", got "+b)};for(const[u,d]of Object.entries(t))i(u,d,!1);for(const[u,d]of Object.entries(r))i(u,d,!0);return e}function Sn(e){const t=new WeakMap;return(r,...i)=>{const u=t.get(r);if(u!==void 0)return u;const d=e(r,...i);return t.set(r,d),d}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Dt=BigInt(0),Ft=BigInt(1),le=BigInt(2),pa=BigInt(3),Dr=BigInt(4),Tn=BigInt(5),Un=BigInt(8);function Lt(e,t){const r=e%t;return r>=Dt?r:t+r}function wa(e,t,r){if(t<Dt)throw new Error("invalid exponent, negatives unsupported");if(r<=Dt)throw new Error("invalid modulus");if(r===Ft)return Dt;let i=Ft;for(;t>Dt;)t&Ft&&(i=i*e%r),e=e*e%r,t>>=Ft;return i}function Vt(e,t,r){let i=e;for(;t-- >Dt;)i*=i,i%=r;return i}function Nn(e,t){if(e===Dt)throw new Error("invert: expected non-zero number");if(t<=Dt)throw new Error("invert: expected positive modulus, got "+t);let r=Lt(e,t),i=t,u=Dt,d=Ft;for(;r!==Dt;){const c=i/r,b=i%r,A=u-d*c;i=r,r=b,u=d,d=A}if(i!==Ft)throw new Error("invert: does not exist");return Lt(u,t)}function ya(e){const t=(e-Ft)/le;let r,i,u;for(r=e-Ft,i=0;r%le===Dt;r/=le,i++);for(u=le;u<e&&wa(u,t,e)!==e-Ft;u++)if(u>1e3)throw new Error("Cannot find square root: likely non-prime P");if(i===1){const w=(e+Ft)/Dr;return function(b,A){const U=b.pow(A,w);if(!b.eql(b.sqr(U),A))throw new Error("Cannot find square root");return U}}const d=(r+Ft)/le;return function(c,b){if(c.pow(b,t)===c.neg(c.ONE))throw new Error("Cannot find square root");let A=i,U=c.pow(c.mul(c.ONE,u),r),R=c.pow(b,d),D=c.pow(b,r);for(;!c.eql(D,c.ONE);){if(c.eql(D,c.ZERO))return c.ZERO;let O=1;for(let V=c.sqr(D);O<A&&!c.eql(V,c.ONE);O++)V=c.sqr(V);const q=c.pow(U,Ft<<BigInt(A-O-1));U=c.sqr(q),R=c.mul(R,q),D=c.mul(D,U),A=O}return R}}function ga(e){if(e%Dr===pa){const t=(e+Ft)/Dr;return function(i,u){const d=i.pow(u,t);if(!i.eql(i.sqr(d),u))throw new Error("Cannot find square root");return d}}if(e%Un===Tn){const t=(e-Tn)/Un;return function(i,u){const d=i.mul(u,le),w=i.pow(d,t),c=i.mul(u,w),b=i.mul(i.mul(c,le),w),A=i.mul(c,i.sub(b,i.ONE));if(!i.eql(i.sqr(A),u))throw new Error("Cannot find square root");return A}}return ya(e)}const xa=(e,t)=>(Lt(e,t)&Ft)===Ft,ma=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function ba(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=ma.reduce((i,u)=>(i[u]="function",i),t);return en(e,r)}function Ea(e,t,r){if(r<Dt)throw new Error("invalid exponent, negatives unsupported");if(r===Dt)return e.ONE;if(r===Ft)return t;let i=e.ONE,u=t;for(;r>Dt;)r&Ft&&(i=e.mul(i,u)),u=e.sqr(u),r>>=Ft;return i}function _a(e,t){const r=new Array(t.length),i=t.reduce((d,w,c)=>e.is0(w)?d:(r[c]=d,e.mul(d,w)),e.ONE),u=e.inv(i);return t.reduceRight((d,w,c)=>e.is0(w)?d:(r[c]=e.mul(d,r[c]),e.mul(d,w)),u),r}function Gi(e,t){const r=t!==void 0?t:e.toString(2).length,i=Math.ceil(r/8);return{nBitLength:r,nByteLength:i}}function Hi(e,t,r=!1,i={}){if(e<=Dt)throw new Error("invalid field: expected ORDER > 0, got "+e);const{nBitLength:u,nByteLength:d}=Gi(e,t);if(d>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let w;const c=Object.freeze({ORDER:e,BITS:u,BYTES:d,MASK:la(u),ZERO:Dt,ONE:Ft,create:b=>Lt(b,e),isValid:b=>{if(typeof b!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof b);return Dt<=b&&b<e},is0:b=>b===Dt,isOdd:b=>(b&Ft)===Ft,neg:b=>Lt(-b,e),eql:(b,A)=>b===A,sqr:b=>Lt(b*b,e),add:(b,A)=>Lt(b+A,e),sub:(b,A)=>Lt(b-A,e),mul:(b,A)=>Lt(b*A,e),pow:(b,A)=>Ea(c,b,A),div:(b,A)=>Lt(b*Nn(A,e),e),sqrN:b=>b*b,addN:(b,A)=>b+A,subN:(b,A)=>b-A,mulN:(b,A)=>b*A,inv:b=>Nn(b,e),sqrt:i.sqrt||(b=>(w||(w=ga(e)),w(c,b))),invertBatch:b=>_a(c,b),cmov:(b,A,U)=>U?A:b,toBytes:b=>r?Or(b,d):$i(b,d),fromBytes:b=>{if(b.length!==d)throw new Error("Field.fromBytes: expected "+d+" bytes, got "+b.length);return r?ze(b):ca(b)}});return Object.freeze(c)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Fn=BigInt(0),ke=BigInt(1);function wr(e,t){const r=t.negate();return e?r:t}function zi(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function yr(e,t){zi(e,t);const r=Math.ceil(t/e)+1,i=2**(e-1);return{windows:r,windowSize:i}}function Ia(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach((r,i)=>{if(!(r instanceof t))throw new Error("invalid point at index "+i)})}function Ba(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach((r,i)=>{if(!t.isValid(r))throw new Error("invalid scalar at index "+i)})}const gr=new WeakMap,Ki=new WeakMap;function xr(e){return Ki.get(e)||1}function Aa(e,t){return{constTimeNegate:wr,hasPrecomputes(r){return xr(r)!==1},unsafeLadder(r,i,u=e.ZERO){let d=r;for(;i>Fn;)i&ke&&(u=u.add(d)),d=d.double(),i>>=ke;return u},precomputeWindow(r,i){const{windows:u,windowSize:d}=yr(i,t),w=[];let c=r,b=c;for(let A=0;A<u;A++){b=c,w.push(b);for(let U=1;U<d;U++)b=b.add(c),w.push(b);c=b.double()}return w},wNAF(r,i,u){const{windows:d,windowSize:w}=yr(r,t);let c=e.ZERO,b=e.BASE;const A=BigInt(2**r-1),U=2**r,R=BigInt(r);for(let D=0;D<d;D++){const O=D*w;let q=Number(u&A);u>>=R,q>w&&(q-=U,u+=ke);const V=O,lt=O+Math.abs(q)-1,Et=D%2!==0,at=q<0;q===0?b=b.add(wr(Et,i[V])):c=c.add(wr(at,i[lt]))}return{p:c,f:b}},wNAFUnsafe(r,i,u,d=e.ZERO){const{windows:w,windowSize:c}=yr(r,t),b=BigInt(2**r-1),A=2**r,U=BigInt(r);for(let R=0;R<w;R++){const D=R*c;if(u===Fn)break;let O=Number(u&b);if(u>>=U,O>c&&(O-=A,u+=ke),O===0)continue;let q=i[D+Math.abs(O)-1];O<0&&(q=q.negate()),d=d.add(q)}return d},getPrecomputes(r,i,u){let d=gr.get(i);return d||(d=this.precomputeWindow(i,r),r!==1&&gr.set(i,u(d))),d},wNAFCached(r,i,u){const d=xr(r);return this.wNAF(d,this.getPrecomputes(d,r,u),i)},wNAFCachedUnsafe(r,i,u,d){const w=xr(r);return w===1?this.unsafeLadder(r,i,d):this.wNAFUnsafe(w,this.getPrecomputes(w,r,u),i,d)},setWindowSize(r,i){zi(i,t),Ki.set(r,i),gr.delete(r)}}}function Sa(e,t,r,i){if(Ia(r,e),Ba(i,t),r.length!==i.length)throw new Error("arrays of points and scalars must have equal length");const u=e.ZERO,d=ha(BigInt(r.length)),w=d>12?d-3:d>4?d-2:d?2:1,c=(1<<w)-1,b=new Array(c+1).fill(u),A=Math.floor((t.BITS-1)/w)*w;let U=u;for(let R=A;R>=0;R-=w){b.fill(u);for(let O=0;O<i.length;O++){const q=i[O],V=Number(q>>BigInt(R)&BigInt(c));b[V]=b[V].add(r[O])}let D=u;for(let O=b.length-1,q=u;O>0;O--)q=q.add(b[O]),D=D.add(q);if(U=U.add(D),R!==0)for(let O=0;O<w;O++)U=U.double()}return U}function Ta(e){return ba(e.Fp),en(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Gi(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}var vn;(function(e){e[e.Empty=0]="Empty",e[e.Fork=1]="Fork",e[e.Labeled=2]="Labeled",e[e.Leaf=3]="Leaf",e[e.Pruned=4]="Pruned"})(vn||(vn={}));ce("308182301d060d2b0601040182dc7c0503010201060c2b0601040182dc7c05030201036100");var Ln;(function(e){e.Unknown="unknown",e.Absent="absent",e.Found="found"})(Ln||(Ln={}));var Rn;(function(e){e.Less="less",e.Greater="greater"})(Rn||(Rn={}));const $e=BigInt(2**32-1),Pr=BigInt(32);function Yi(e,t=!1){return t?{h:Number(e&$e),l:Number(e>>Pr&$e)}:{h:Number(e>>Pr&$e)|0,l:Number(e&$e)|0}}function Ua(e,t=!1){let r=new Uint32Array(e.length),i=new Uint32Array(e.length);for(let u=0;u<e.length;u++){const{h:d,l:w}=Yi(e[u],t);[r[u],i[u]]=[d,w]}return[r,i]}const Na=(e,t)=>BigInt(e>>>0)<<Pr|BigInt(t>>>0),Fa=(e,t,r)=>e>>>r,va=(e,t,r)=>e<<32-r|t>>>r,La=(e,t,r)=>e>>>r|t<<32-r,Ra=(e,t,r)=>e<<32-r|t>>>r,Oa=(e,t,r)=>e<<64-r|t>>>r-32,Da=(e,t,r)=>e>>>r-32|t<<64-r,Pa=(e,t)=>t,Ma=(e,t)=>e,Ca=(e,t,r)=>e<<r|t>>>32-r,ka=(e,t,r)=>t<<r|e>>>32-r,$a=(e,t,r)=>t<<r-32|e>>>64-r,Ga=(e,t,r)=>e<<r-32|t>>>64-r;function Ha(e,t,r,i){const u=(t>>>0)+(i>>>0);return{h:e+r+(u/2**32|0)|0,l:u|0}}const za=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),Ka=(e,t,r,i)=>t+r+i+(e/2**32|0)|0,Ya=(e,t,r,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(i>>>0),Va=(e,t,r,i,u)=>t+r+i+u+(e/2**32|0)|0,Wa=(e,t,r,i,u)=>(e>>>0)+(t>>>0)+(r>>>0)+(i>>>0)+(u>>>0),qa=(e,t,r,i,u,d)=>t+r+i+u+d+(e/2**32|0)|0,ot={fromBig:Yi,split:Ua,toBig:Na,shrSH:Fa,shrSL:va,rotrSH:La,rotrSL:Ra,rotrBH:Oa,rotrBL:Da,rotr32H:Pa,rotr32L:Ma,rotlSH:Ca,rotlSL:ka,rotlBH:$a,rotlBL:Ga,add:Ha,add3L:za,add3H:Ka,add4L:Ya,add4H:Va,add5H:qa,add5L:Wa},[Xa,Ja]=ot.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),ee=new Uint32Array(80),re=new Uint32Array(80);class ja extends oa{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:r,Bh:i,Bl:u,Ch:d,Cl:w,Dh:c,Dl:b,Eh:A,El:U,Fh:R,Fl:D,Gh:O,Gl:q,Hh:V,Hl:lt}=this;return[t,r,i,u,d,w,c,b,A,U,R,D,O,q,V,lt]}set(t,r,i,u,d,w,c,b,A,U,R,D,O,q,V,lt){this.Ah=t|0,this.Al=r|0,this.Bh=i|0,this.Bl=u|0,this.Ch=d|0,this.Cl=w|0,this.Dh=c|0,this.Dl=b|0,this.Eh=A|0,this.El=U|0,this.Fh=R|0,this.Fl=D|0,this.Gh=O|0,this.Gl=q|0,this.Hh=V|0,this.Hl=lt|0}process(t,r){for(let K=0;K<16;K++,r+=4)ee[K]=t.getUint32(r),re[K]=t.getUint32(r+=4);for(let K=16;K<80;K++){const Ut=ee[K-15]|0,ut=re[K-15]|0,X=ot.rotrSH(Ut,ut,1)^ot.rotrSH(Ut,ut,8)^ot.shrSH(Ut,ut,7),J=ot.rotrSL(Ut,ut,1)^ot.rotrSL(Ut,ut,8)^ot.shrSL(Ut,ut,7),nt=ee[K-2]|0,it=re[K-2]|0,C=ot.rotrSH(nt,it,19)^ot.rotrBH(nt,it,61)^ot.shrSH(nt,it,6),xt=ot.rotrSL(nt,it,19)^ot.rotrBL(nt,it,61)^ot.shrSL(nt,it,6),ct=ot.add4L(J,xt,re[K-7],re[K-16]),ft=ot.add4H(ct,X,C,ee[K-7],ee[K-16]);ee[K]=ft|0,re[K]=ct|0}let{Ah:i,Al:u,Bh:d,Bl:w,Ch:c,Cl:b,Dh:A,Dl:U,Eh:R,El:D,Fh:O,Fl:q,Gh:V,Gl:lt,Hh:Et,Hl:at}=this;for(let K=0;K<80;K++){const Ut=ot.rotrSH(R,D,14)^ot.rotrSH(R,D,18)^ot.rotrBH(R,D,41),ut=ot.rotrSL(R,D,14)^ot.rotrSL(R,D,18)^ot.rotrBL(R,D,41),X=R&O^~R&V,J=D&q^~D&lt,nt=ot.add5L(at,ut,J,Ja[K],re[K]),it=ot.add5H(nt,Et,Ut,X,Xa[K],ee[K]),C=nt|0,xt=ot.rotrSH(i,u,28)^ot.rotrBH(i,u,34)^ot.rotrBH(i,u,39),ct=ot.rotrSL(i,u,28)^ot.rotrBL(i,u,34)^ot.rotrBL(i,u,39),ft=i&d^i&c^d&c,St=u&w^u&b^w&b;Et=V|0,at=lt|0,V=O|0,lt=q|0,O=R|0,q=D|0,{h:R,l:D}=ot.add(A|0,U|0,it|0,C|0),A=c|0,U=b|0,c=d|0,b=w|0,d=i|0,w=u|0;const _t=ot.add3L(C,ct,St);i=ot.add3H(_t,it,xt,ft),u=_t|0}({h:i,l:u}=ot.add(this.Ah|0,this.Al|0,i|0,u|0)),{h:d,l:w}=ot.add(this.Bh|0,this.Bl|0,d|0,w|0),{h:c,l:b}=ot.add(this.Ch|0,this.Cl|0,c|0,b|0),{h:A,l:U}=ot.add(this.Dh|0,this.Dl|0,A|0,U|0),{h:R,l:D}=ot.add(this.Eh|0,this.El|0,R|0,D|0),{h:O,l:q}=ot.add(this.Fh|0,this.Fl|0,O|0,q|0),{h:V,l:lt}=ot.add(this.Gh|0,this.Gl|0,V|0,lt|0),{h:Et,l:at}=ot.add(this.Hh|0,this.Hl|0,Et|0,at|0),this.set(i,u,d,w,c,b,A,U,R,D,O,q,V,lt,Et,at)}roundClean(){ee.fill(0),re.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Za=na(()=>new ja);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ht=BigInt(0),Ct=BigInt(1),Ge=BigInt(2),Qa=BigInt(8),tu={zip215:!0};function eu(e){const t=Ta(e);return en(e,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...t})}function ru(e){const t=eu(e),{Fp:r,n:i,prehash:u,hash:d,randomBytes:w,nByteLength:c,h:b}=t,A=Ge<<BigInt(c*8)-Ct,U=r.create,R=Hi(t.n,t.nBitLength),D=t.uvRatio||((Z,M)=>{try{return{isValid:!0,value:r.sqrt(Z*r.inv(M))}}catch{return{isValid:!1,value:Ht}}}),O=t.adjustScalarBytes||(Z=>Z),q=t.domain||((Z,M,k)=>{if(dr("phflag",k),M.length||k)throw new Error("Contexts/pre-hash are not supported");return Z});function V(Z,M){Ae("coordinate "+Z,M,Ht,A)}function lt(Z){if(!(Z instanceof K))throw new Error("ExtendedPoint expected")}const Et=Sn((Z,M)=>{const{ex:k,ey:j,ez:Q}=Z,$=Z.is0();M==null&&(M=$?Qa:r.inv(Q));const H=U(k*M),yt=U(j*M),g=U(Q*M);if($)return{x:Ht,y:Ct};if(g!==Ct)throw new Error("invZ was invalid");return{x:H,y:yt}}),at=Sn(Z=>{const{a:M,d:k}=t;if(Z.is0())throw new Error("bad point: ZERO");const{ex:j,ey:Q,ez:$,et:H}=Z,yt=U(j*j),g=U(Q*Q),dt=U($*$),mt=U(dt*dt),Tt=U(yt*M),G=U(dt*U(Tt+g)),Y=U(mt+U(k*U(yt*g)));if(G!==Y)throw new Error("bad point: equation left != right (1)");const y=U(j*Q),x=U($*H);if(y!==x)throw new Error("bad point: equation left != right (2)");return!0});class K{constructor(M,k,j,Q){this.ex=M,this.ey=k,this.ez=j,this.et=Q,V("x",M),V("y",k),V("z",j),V("t",Q),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(M){if(M instanceof K)throw new Error("extended point not allowed");const{x:k,y:j}=M||{};return V("x",k),V("y",j),new K(k,j,Ct,U(k*j))}static normalizeZ(M){const k=r.invertBatch(M.map(j=>j.ez));return M.map((j,Q)=>j.toAffine(k[Q])).map(K.fromAffine)}static msm(M,k){return Sa(K,R,M,k)}_setWindowSize(M){X.setWindowSize(this,M)}assertValidity(){at(this)}equals(M){lt(M);const{ex:k,ey:j,ez:Q}=this,{ex:$,ey:H,ez:yt}=M,g=U(k*yt),dt=U($*Q),mt=U(j*yt),Tt=U(H*Q);return g===dt&&mt===Tt}is0(){return this.equals(K.ZERO)}negate(){return new K(U(-this.ex),this.ey,this.ez,U(-this.et))}double(){const{a:M}=t,{ex:k,ey:j,ez:Q}=this,$=U(k*k),H=U(j*j),yt=U(Ge*U(Q*Q)),g=U(M*$),dt=k+j,mt=U(U(dt*dt)-$-H),Tt=g+H,G=Tt-yt,Y=g-H,y=U(mt*G),x=U(Tt*Y),_=U(mt*Y),T=U(G*Tt);return new K(y,x,T,_)}add(M){lt(M);const{a:k,d:j}=t,{ex:Q,ey:$,ez:H,et:yt}=this,{ex:g,ey:dt,ez:mt,et:Tt}=M;if(k===BigInt(-1)){const p=U(($-Q)*(dt+g)),E=U(($+Q)*(dt-g)),F=U(E-p);if(F===Ht)return this.double();const P=U(H*Ge*Tt),z=U(yt*Ge*mt),W=z+P,rt=E+p,h=z-P,o=U(W*F),a=U(rt*h),m=U(W*h),B=U(F*rt);return new K(o,a,B,m)}const G=U(Q*g),Y=U($*dt),y=U(yt*j*Tt),x=U(H*mt),_=U((Q+$)*(g+dt)-G-Y),T=x-y,S=x+y,N=U(Y-k*G),f=U(_*T),n=U(S*N),s=U(_*N),l=U(T*S);return new K(f,n,l,s)}subtract(M){return this.add(M.negate())}wNAF(M){return X.wNAFCached(this,M,K.normalizeZ)}multiply(M){const k=M;Ae("scalar",k,Ct,i);const{p:j,f:Q}=this.wNAF(k);return K.normalizeZ([j,Q])[0]}multiplyUnsafe(M,k=K.ZERO){const j=M;return Ae("scalar",j,Ht,i),j===Ht?ut:this.is0()||j===Ct?this:X.wNAFCachedUnsafe(this,j,K.normalizeZ,k)}isSmallOrder(){return this.multiplyUnsafe(b).is0()}isTorsionFree(){return X.unsafeLadder(this,i).is0()}toAffine(M){return Et(this,M)}clearCofactor(){const{h:M}=t;return M===Ct?this:this.multiplyUnsafe(M)}static fromHex(M,k=!1){const{d:j,a:Q}=t,$=r.BYTES;M=Jt("pointHex",M,$),dr("zip215",k);const H=M.slice(),yt=M[$-1];H[$-1]=yt&-129;const g=ze(H),dt=k?A:r.ORDER;Ae("pointHex.y",g,Ht,dt);const mt=U(g*g),Tt=U(mt-Ct),G=U(j*mt-Q);let{isValid:Y,value:y}=D(Tt,G);if(!Y)throw new Error("Point.fromHex: invalid y coordinate");const x=(y&Ct)===Ct,_=(yt&128)!==0;if(!k&&y===Ht&&_)throw new Error("Point.fromHex: x=0 and x_0=1");return _!==x&&(y=U(-y)),K.fromAffine({x:y,y:g})}static fromPrivateKey(M){return it(M).point}toRawBytes(){const{x:M,y:k}=this.toAffine(),j=Or(k,r.BYTES);return j[j.length-1]|=M&Ct?128:0,j}toHex(){return tn(this.toRawBytes())}}K.BASE=new K(t.Gx,t.Gy,Ct,U(t.Gx*t.Gy)),K.ZERO=new K(Ht,Ct,Ct,Ht);const{BASE:Ut,ZERO:ut}=K,X=Aa(K,c*8);function J(Z){return Lt(Z,i)}function nt(Z){return J(ze(Z))}function it(Z){const M=r.BYTES;Z=Jt("private key",Z,M);const k=Jt("hashed private key",d(Z),2*M),j=O(k.slice(0,M)),Q=k.slice(M,2*M),$=nt(j),H=Ut.multiply($),yt=H.toRawBytes();return{head:j,prefix:Q,scalar:$,point:H,pointBytes:yt}}function C(Z){return it(Z).pointBytes}function xt(Z=new Uint8Array,...M){const k=An(...M);return nt(d(q(k,Jt("context",Z),!!u)))}function ct(Z,M,k={}){Z=Jt("message",Z),u&&(Z=u(Z));const{prefix:j,scalar:Q,pointBytes:$}=it(M),H=xt(k.context,j,Z),yt=Ut.multiply(H).toRawBytes(),g=xt(k.context,yt,$,Z),dt=J(H+g*Q);Ae("signature.s",dt,Ht,i);const mt=An(yt,Or(dt,r.BYTES));return Jt("result",mt,r.BYTES*2)}const ft=tu;function St(Z,M,k,j=ft){const{context:Q,zip215:$}=j,H=r.BYTES;Z=Jt("signature",Z,2*H),M=Jt("message",M),k=Jt("publicKey",k,H),$!==void 0&&dr("zip215",$),u&&(M=u(M));const yt=ze(Z.slice(H,2*H));let g,dt,mt;try{g=K.fromHex(k,$),dt=K.fromHex(Z.slice(0,H),$),mt=Ut.multiplyUnsafe(yt)}catch{return!1}if(!$&&g.isSmallOrder())return!1;const Tt=xt(Q,dt.toRawBytes(),g.toRawBytes(),M);return dt.add(g.multiplyUnsafe(Tt)).subtract(mt).clearCofactor().equals(K.ZERO)}return Ut._setWindowSize(8),{CURVE:t,getPublicKey:C,sign:ct,verify:St,ExtendedPoint:K,utils:{getExtendedPublicKey:it,randomPrivateKey:()=>w(r.BYTES),precompute(Z=8,M=K.BASE){return M._setWindowSize(Z),M.multiply(BigInt(3)),M}}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const rn=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),On=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const nu=BigInt(1),Dn=BigInt(2);BigInt(3);const iu=BigInt(5),su=BigInt(8);function ou(e){const t=BigInt(10),r=BigInt(20),i=BigInt(40),u=BigInt(80),d=rn,c=e*e%d*e%d,b=Vt(c,Dn,d)*c%d,A=Vt(b,nu,d)*e%d,U=Vt(A,iu,d)*A%d,R=Vt(U,t,d)*U%d,D=Vt(R,r,d)*R%d,O=Vt(D,i,d)*D%d,q=Vt(O,u,d)*O%d,V=Vt(q,u,d)*O%d,lt=Vt(V,t,d)*U%d;return{pow_p_5_8:Vt(lt,Dn,d)*e%d,b2:c}}function au(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}function uu(e,t){const r=rn,i=Lt(t*t*t,r),u=Lt(i*i*t,r),d=ou(e*u).pow_p_5_8;let w=Lt(e*i*d,r);const c=Lt(t*w*w,r),b=w,A=Lt(w*On,r),U=c===e,R=c===Lt(-e,r),D=c===Lt(-e*On,r);return U&&(w=b),(R||D)&&(w=A),xa(w,r)&&(w=Lt(-w,r)),{isValid:U||R,value:w}}const cu=Hi(rn,void 0,!0),fu={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:cu,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:su,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:Za,randomBytes:ia,adjustScalarBytes:au,uvRatio:uu},Se=ru(fu),Pn=e=>{if(e<=127)return 1;if(e<=255)return 2;if(e<=65535)return 3;if(e<=16777215)return 4;throw new Error("Length too long (> 4 bytes)")},Mn=(e,t,r)=>{if(r<=127)return e[t]=r,1;if(r<=255)return e[t]=129,e[t+1]=r,2;if(r<=65535)return e[t]=130,e[t+1]=r>>8,e[t+2]=r,3;if(r<=16777215)return e[t]=131,e[t+1]=r>>16,e[t+2]=r>>8,e[t+3]=r,4;throw new Error("Length too long (> 4 bytes)")},Mr=(e,t)=>{if(e[t]<128)return 1;if(e[t]===128)throw new Error("Invalid length 0");if(e[t]===129)return 2;if(e[t]===130)return 3;if(e[t]===131)return 4;throw new Error("Length too long (> 4 bytes)")},hu=(e,t)=>{const r=Mr(e,t);if(r===1)return e[t];if(r===2)return e[t+1];if(r===3)return(e[t+1]<<8)+e[t+2];if(r===4)return(e[t+1]<<16)+(e[t+2]<<8)+e[t+3];throw new Error("Length too long (> 4 bytes)")};Uint8Array.from([48,12,6,10,43,6,1,4,1,131,184,67,1,1]);const Cn=Uint8Array.from([48,5,6,3,43,101,112]);Uint8Array.from([48,16,6,7,42,134,72,206,61,2,1,6,5,43,129,4,0,10]);function lu(e,t){const r=2+Pn(e.byteLength+1),i=t.byteLength+r+e.byteLength;let u=0;const d=new Uint8Array(1+Pn(i)+i);return d[u++]=48,u+=Mn(d,u,i),d.set(t,u),u+=t.byteLength,d[u++]=3,u+=Mn(d,u,e.byteLength+1),d[u++]=0,d.set(new Uint8Array(e),u),d}const du=(e,t)=>{let r=0;const i=(c,b)=>{if(u[r++]!==c)throw new Error("Expected: "+b)},u=new Uint8Array(e);if(i(48,"sequence"),r+=Mr(u,r),!ni(u.slice(r,r+t.byteLength),t))throw new Error("Not the expected OID.");r+=t.byteLength,i(3,"bit string");const d=hu(u,r)-1;r+=Mr(u,r),i(0,"0 padding");const w=u.slice(r);if(d!==w.length)throw new Error(`DER payload mismatch: Expected length ${d} actual length ${w.length}`);return w};var kn;(function(e){e.Received="received",e.Processing="processing",e.Replied="replied",e.Rejected="rejected",e.Unknown="unknown",e.Done="done"})(kn||(kn={}));var $n;(function(e){e.Error="err",e.GetPrincipal="gp",e.GetPrincipalResponse="gpr",e.Query="q",e.QueryResponse="qr",e.Call="c",e.CallResponse="cr",e.ReadState="rs",e.ReadStateResponse="rsr",e.Status="s",e.StatusResponse="sr"})($n||($n={}));var Je=function(e,t,r,i,u){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!u)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!u:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?u.call(e,r):u?u.value=r:t.set(e,r),r},ie=function(e,t,r,i){if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?i:r==="a"?i.call(e):i?i.value:t.get(e)},Ke,Ye,xe,me;function Gn(e){return e!==null&&typeof e=="object"}class jt{constructor(t){if(Ke.set(this,void 0),Ye.set(this,void 0),t.byteLength!==jt.RAW_KEY_LENGTH)throw new Error("An Ed25519 public key must be exactly 32bytes long");Je(this,Ke,t,"f"),Je(this,Ye,jt.derEncode(t),"f")}static from(t){if(typeof t=="string"){const r=ce(t);return this.fromRaw(r)}else if(Gn(t)){const r=t;if(Gn(r)&&Object.hasOwnProperty.call(r,"__derEncodedPublicKey__"))return this.fromDer(r);if(ArrayBuffer.isView(r)){const i=r;return this.fromRaw(ii(i.buffer))}else{if(r instanceof ArrayBuffer)return this.fromRaw(r);if("rawKey"in r)return this.fromRaw(r.rawKey);if("derKey"in r)return this.fromDer(r.derKey);if("toDer"in r)return this.fromDer(r.toDer())}}throw new Error("Cannot construct Ed25519PublicKey from the provided key.")}static fromRaw(t){return new jt(t)}static fromDer(t){return new jt(this.derDecode(t))}static derEncode(t){const r=lu(t,Cn).buffer;return r.__derEncodedPublicKey__=void 0,r}static derDecode(t){const r=du(t,Cn);if(r.length!==this.RAW_KEY_LENGTH)throw new Error("An Ed25519 public key must be exactly 32bytes long");return r}get rawKey(){return ie(this,Ke,"f")}get derKey(){return ie(this,Ye,"f")}toDer(){return this.derKey}toRaw(){return this.rawKey}}Ke=new WeakMap,Ye=new WeakMap;jt.RAW_KEY_LENGTH=32;class ae extends Wr{constructor(t,r){super(),xe.set(this,void 0),me.set(this,void 0),Je(this,xe,jt.from(t),"f"),Je(this,me,new Uint8Array(r),"f")}static generate(t){if(t&&t.length!==32)throw new Error("Ed25519 Seed needs to be 32 bytes long.");t||(t=Se.utils.randomPrivateKey()),ni(t,new Uint8Array(new Array(32).fill(0)))&&console.warn("Seed is all zeros. This is not a secure seed. Please provide a seed with sufficient entropy if this is a production environment.");const r=new Uint8Array(32);for(let u=0;u<32;u++)r[u]=new Uint8Array(t)[u];const i=Se.getPublicKey(r);return ae.fromKeyPair(i,r)}static fromParsedJson(t){const[r,i]=t;return new ae(jt.fromDer(ce(r)),ce(i))}static fromJSON(t){const r=JSON.parse(t);if(Array.isArray(r)){if(typeof r[0]=="string"&&typeof r[1]=="string")return this.fromParsedJson([r[0],r[1]]);throw new Error("Deserialization error: JSON must have at least 2 items.")}throw new Error(`Deserialization error: Invalid JSON type for string: ${JSON.stringify(t)}`)}static fromKeyPair(t,r){return new ae(jt.fromRaw(t),r)}static fromSecretKey(t){const r=Se.getPublicKey(new Uint8Array(t));return ae.fromKeyPair(r,t)}toJSON(){return[be(ie(this,xe,"f").toDer()),be(ie(this,me,"f"))]}getKeyPair(){return{secretKey:ie(this,me,"f"),publicKey:ie(this,xe,"f")}}getPublicKey(){return ie(this,xe,"f")}async sign(t){const r=new Uint8Array(t),i=Ue(Se.sign(r,ie(this,me,"f").slice(0,32)));return Object.defineProperty(i,"__signature__",{enumerable:!1,value:void 0}),i}static verify(t,r,i){const[u,d,w]=[t,r,i].map(c=>(typeof c=="string"&&(c=ce(c)),c instanceof Uint8Array&&(c=c.buffer),new Uint8Array(c)));return Se.verify(d,u,w)}}xe=new WeakMap,me=new WeakMap;class nn extends Error{constructor(t){super(t),this.message=t,Object.setPrototypeOf(this,nn.prototype)}}function Hn(e){if(typeof global<"u"&&global.crypto&&global.crypto.subtle)return global.crypto.subtle;if(e)return e;if(typeof crypto<"u"&&crypto.subtle)return crypto.subtle;throw new nn("Global crypto was not available and none was provided. Please inlcude a SubtleCrypto implementation. See https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto")}class je extends Wr{constructor(t,r,i){super(),this._keyPair=t,this._derKey=r,this._subtleCrypto=i}static async generate(t){const{extractable:r=!1,keyUsages:i=["sign","verify"],subtleCrypto:u}=t??{},d=Hn(u),w=await d.generateKey({name:"ECDSA",namedCurve:"P-256"},r,i),c=await d.exportKey("spki",w.publicKey);return new this(w,c,d)}static async fromKeyPair(t,r){const i=Hn(r),u=await i.exportKey("spki",t.publicKey);return new je(t,u,i)}getKeyPair(){return this._keyPair}getPublicKey(){const t=this._derKey,r=Object.create(this._keyPair.publicKey);return r.toDer=function(){return t},r}async sign(t){const r={name:"ECDSA",hash:{name:"SHA-256"}};return await this._subtleCrypto.sign(r,this._keyPair.privateKey,t)}}var pu=function(e,t,r,i,u){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!u)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!u:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?u.call(e,r):u?u.value=r:t.set(e,r),r},Te=function(e,t,r,i){if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?i:r==="a"?i.call(e):i?i.value:t.get(e)},ne;class wu{constructor(t){ne.set(this,void 0),pu(this,ne,t,"f")}get rawKey(){return Te(this,ne,"f").rawKey}get derKey(){return Te(this,ne,"f").derKey}toDer(){return Te(this,ne,"f").toDer()}getPublicKey(){return Te(this,ne,"f")}getPrincipal(){return ue.from(Te(this,ne,"f").rawKey)}transformRequest(){return Promise.reject("Not implemented. You are attempting to use a partial identity to sign calls, but this identity only has access to the public key.To sign calls, use a DelegationIdentity instead.")}}ne=new WeakMap;var yu=function(e,t,r,i,u){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!u)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!u:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?u.call(e,r):u?u.value=r:t.set(e,r),r},gu=function(e,t,r,i){if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?i:r==="a"?i.call(e):i?i.value:t.get(e)},xu=function(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,i=Object.getOwnPropertySymbols(e);u<i.length;u++)t.indexOf(i[u])<0&&Object.prototype.propertyIsEnumerable.call(e,i[u])&&(r[i[u]]=e[i[u]]);return r},Ve;const mu=new TextEncoder().encode("ic-request-auth-delegation"),bu=new TextEncoder().encode(`
ic-request`);function mr(e){if(typeof e!="string"||e.length<64)throw new Error("Invalid public key.");return ce(e)}class sn{constructor(t,r,i){this.pubkey=t,this.expiration=r,this.targets=i}toCBOR(){return kt.value.map(Object.assign({pubkey:kt.value.bytes(this.pubkey),expiration:kt.value.u64(this.expiration.toString(16),16)},this.targets&&{targets:kt.value.array(this.targets.map(t=>kt.value.bytes(t.toUint8Array())))}))}toJSON(){return Object.assign({expiration:this.expiration.toString(16),pubkey:be(this.pubkey)},this.targets&&{targets:this.targets.map(t=>t.toHex())})}}async function Eu(e,t,r,i){const u=new sn(t.toDer(),BigInt(+r)*BigInt(1e6),i),d=new Uint8Array([...mu,...new Uint8Array(Vr(u))]),w=await e.sign(d);return{delegation:u,signature:w}}class Ze{constructor(t,r){this.delegations=t,this.publicKey=r}static async create(t,r,i=new Date(Date.now()+15*60*1e3),u={}){var d,w;const c=await Eu(t,r,i,u.targets);return new Ze([...((d=u.previous)===null||d===void 0?void 0:d.delegations)||[],c],((w=u.previous)===null||w===void 0?void 0:w.publicKey)||t.getPublicKey().toDer())}static fromJSON(t){const{publicKey:r,delegations:i}=typeof t=="string"?JSON.parse(t):t;if(!Array.isArray(i))throw new Error("Invalid delegations.");const u=i.map(d=>{const{delegation:w,signature:c}=d,{pubkey:b,expiration:A,targets:U}=w;if(U!==void 0&&!Array.isArray(U))throw new Error("Invalid targets.");return{delegation:new sn(mr(b),BigInt("0x"+A),U&&U.map(R=>{if(typeof R!="string")throw new Error("Invalid target.");return ue.fromHex(R)})),signature:mr(c)}});return new this(u,mr(r))}static fromDelegations(t,r){return new this(t,r)}toJSON(){return{delegations:this.delegations.map(t=>{const{delegation:r,signature:i}=t,{targets:u}=r;return{delegation:Object.assign({expiration:r.expiration.toString(16),pubkey:be(r.pubkey)},u&&{targets:u.map(d=>d.toHex())}),signature:be(i)}}),publicKey:be(this.publicKey)}}}class zn extends Wr{constructor(t,r){super(),this._inner=t,this._delegation=r}static fromDelegation(t,r){return new this(t,r)}getDelegation(){return this._delegation}getPublicKey(){return{derKey:this._delegation.publicKey,toDer:()=>this._delegation.publicKey}}sign(t){return this._inner.sign(t)}async transformRequest(t){const{body:r}=t,i=xu(t,["body"]),u=await Vr(r);return Object.assign(Object.assign({},i),{body:{content:r,sender_sig:await this.sign(new Uint8Array([...bu,...new Uint8Array(u)])),sender_delegation:this._delegation.delegations,sender_pubkey:this._delegation.publicKey}})}}class Qe extends wu{constructor(t,r){super(t),Ve.set(this,void 0),yu(this,Ve,r,"f")}get delegation(){return gu(this,Ve,"f")}static fromDelegation(t,r){return new Qe(t,r)}}Ve=new WeakMap;function _u(e,t){for(const{delegation:i}of e.delegations)if(+new Date(Number(i.expiration/BigInt(1e6)))<=+Date.now())return!1;const r=[];for(const i of r){const u=i.toText();for(const{delegation:d}of e.delegations){if(d.targets===void 0)continue;let w=!0;for(const c of d.targets)if(c.toText()===u){w=!1;break}if(w)return!1}}return!0}var Kn;(function(e){e[e.ECDSA_WITH_SHA256=-7]="ECDSA_WITH_SHA256"})(Kn||(Kn={}));const Yn=["mousedown","mousemove","keydown","touchstart","wheel"];class Vn{constructor(t={}){var r;this.callbacks=[],this.idleTimeout=10*60*1e3,this.timeoutID=void 0;const{onIdle:i,idleTimeout:u=10*60*1e3}=t||{};this.callbacks=i?[i]:[],this.idleTimeout=u;const d=this._resetTimer.bind(this);window.addEventListener("load",d,!0),Yn.forEach(function(c){document.addEventListener(c,d,!0)});const w=(c,b)=>{let A;return(...U)=>{const R=this,D=function(){A=void 0,c.apply(R,U)};clearTimeout(A),A=window.setTimeout(D,b)}};if(t!=null&&t.captureScroll){const c=w(d,(r=t==null?void 0:t.scrollDebounce)!==null&&r!==void 0?r:100);window.addEventListener("scroll",c,!0)}d()}static create(t={}){return new this(t)}registerCallback(t){this.callbacks.push(t)}exit(){clearTimeout(this.timeoutID),window.removeEventListener("load",this._resetTimer,!0);const t=this._resetTimer.bind(this);Yn.forEach(function(r){document.removeEventListener(r,t,!0)}),this.callbacks.forEach(r=>r())}_resetTimer(){const t=this.exit.bind(this);window.clearTimeout(this.timeoutID),this.timeoutID=window.setTimeout(t,this.idleTimeout)}}const Iu=(e,t)=>t.some(r=>e instanceof r);let Wn,qn;function Bu(){return Wn||(Wn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Au(){return qn||(qn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Vi=new WeakMap,Cr=new WeakMap,Wi=new WeakMap,br=new WeakMap,on=new WeakMap;function Su(e){const t=new Promise((r,i)=>{const u=()=>{e.removeEventListener("success",d),e.removeEventListener("error",w)},d=()=>{r(fe(e.result)),u()},w=()=>{i(e.error),u()};e.addEventListener("success",d),e.addEventListener("error",w)});return t.then(r=>{r instanceof IDBCursor&&Vi.set(r,e)}).catch(()=>{}),on.set(t,e),t}function Tu(e){if(Cr.has(e))return;const t=new Promise((r,i)=>{const u=()=>{e.removeEventListener("complete",d),e.removeEventListener("error",w),e.removeEventListener("abort",w)},d=()=>{r(),u()},w=()=>{i(e.error||new DOMException("AbortError","AbortError")),u()};e.addEventListener("complete",d),e.addEventListener("error",w),e.addEventListener("abort",w)});Cr.set(e,t)}let kr={get(e,t,r){if(e instanceof IDBTransaction){if(t==="done")return Cr.get(e);if(t==="objectStoreNames")return e.objectStoreNames||Wi.get(e);if(t==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return fe(e[t])},set(e,t,r){return e[t]=r,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function Uu(e){kr=e(kr)}function Nu(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...r){const i=e.call(Er(this),t,...r);return Wi.set(i,t.sort?t.sort():[t]),fe(i)}:Au().includes(e)?function(...t){return e.apply(Er(this),t),fe(Vi.get(this))}:function(...t){return fe(e.apply(Er(this),t))}}function Fu(e){return typeof e=="function"?Nu(e):(e instanceof IDBTransaction&&Tu(e),Iu(e,Bu())?new Proxy(e,kr):e)}function fe(e){if(e instanceof IDBRequest)return Su(e);if(br.has(e))return br.get(e);const t=Fu(e);return t!==e&&(br.set(e,t),on.set(t,e)),t}const Er=e=>on.get(e);function vu(e,t,{blocked:r,upgrade:i,blocking:u,terminated:d}={}){const w=indexedDB.open(e,t),c=fe(w);return i&&w.addEventListener("upgradeneeded",b=>{i(fe(w.result),b.oldVersion,b.newVersion,fe(w.transaction),b)}),r&&w.addEventListener("blocked",b=>r(b.oldVersion,b.newVersion,b)),c.then(b=>{d&&b.addEventListener("close",()=>d()),u&&b.addEventListener("versionchange",A=>u(A.oldVersion,A.newVersion,A))}).catch(()=>{}),c}const Lu=["get","getKey","getAll","getAllKeys","count"],Ru=["put","add","delete","clear"],_r=new Map;function Xn(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(_r.get(t))return _r.get(t);const r=t.replace(/FromIndex$/,""),i=t!==r,u=Ru.includes(r);if(!(r in(i?IDBIndex:IDBObjectStore).prototype)||!(u||Lu.includes(r)))return;const d=async function(w,...c){const b=this.transaction(w,u?"readwrite":"readonly");let A=b.store;return i&&(A=A.index(c.shift())),(await Promise.all([A[r](...c),u&&b.done]))[0]};return _r.set(t,d),d}Uu(e=>({...e,get:(t,r,i)=>Xn(t,r)||e.get(t,r,i),has:(t,r)=>!!Xn(t,r)||e.has(t,r)}));const qi="auth-client-db",Xi="ic-keyval",Ou=async(e=qi,t=Xi,r)=>(Ji&&(localStorage!=null&&localStorage.getItem(oe))&&(localStorage.removeItem(oe),localStorage.removeItem(se)),await vu(e,r,{upgrade:i=>{i.objectStoreNames.contains(t)&&i.clear(t),i.createObjectStore(t)}}));async function Du(e,t,r){return await e.get(t,r)}async function Pu(e,t,r,i){return await e.put(t,i,r)}async function Mu(e,t,r){return await e.delete(t,r)}class an{constructor(t,r){this._db=t,this._storeName=r}static async create(t){const{dbName:r=qi,storeName:i=Xi,version:u=Gu}=t??{},d=await Ou(r,i,u);return new an(d,i)}async set(t,r){return await Pu(this._db,this._storeName,t,r)}async get(t){var r;return(r=await Du(this._db,this._storeName,t))!==null&&r!==void 0?r:null}async remove(t){return await Mu(this._db,this._storeName,t)}}var Cu=function(e,t,r,i,u){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!u)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!u:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?u.call(e,r):u?u.value=r:t.set(e,r),r},ku=function(e,t,r,i){if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?i:r==="a"?i.call(e):i?i.value:t.get(e)},We;const se="identity",oe="delegation",$u="iv",Gu=1,Ji=typeof window<"u";class Hu{constructor(t="ic-",r){this.prefix=t,this._localStorage=r}get(t){return Promise.resolve(this._getLocalStorage().getItem(this.prefix+t))}set(t,r){return this._getLocalStorage().setItem(this.prefix+t,r),Promise.resolve()}remove(t){return this._getLocalStorage().removeItem(this.prefix+t),Promise.resolve()}_getLocalStorage(){if(this._localStorage)return this._localStorage;const t=typeof window>"u"?typeof global>"u"?typeof self>"u"?void 0:self.localStorage:global.localStorage:window.localStorage;if(!t)throw new Error("Could not find local storage.");return t}}class zu{constructor(t){We.set(this,void 0),Cu(this,We,t??{},"f")}get _db(){return new Promise(t=>{if(this.initializedDb){t(this.initializedDb);return}an.create(ku(this,We,"f")).then(r=>{this.initializedDb=r,t(r)})})}async get(t){return await(await this._db).get(t)}async set(t,r){await(await this._db).set(t,r)}async remove(t){await(await this._db).remove(t)}}We=new WeakMap;const Ku="https://identity.ic0.app",Yu="#authorize",Ir="ECDSA",Br="Ed25519",Vu=500,Wu="UserInterrupt";class qu{constructor(t,r,i,u,d,w,c,b){this._identity=t,this._key=r,this._chain=i,this._storage=u,this.idleManager=d,this._createOptions=w,this._idpWindow=c,this._eventHandler=b,this._registerDefaultIdleCallback()}static async create(t={}){var r,i,u;const d=(r=t.storage)!==null&&r!==void 0?r:new zu,w=(i=t.keyType)!==null&&i!==void 0?i:Ir;let c=null;if(t.identity)c=t.identity;else{let R=await d.get(se);if(!R&&Ji)try{const D=new Hu,O=await D.get(oe),q=await D.get(se);O&&q&&w===Ir&&(console.log("Discovered an identity stored in localstorage. Migrating to IndexedDB"),await d.set(oe,O),await d.set(se,q),R=O,await D.remove(oe),await D.remove(se))}catch(D){console.error("error while attempting to recover localstorage: "+D)}if(R)try{typeof R=="object"?w===Br&&typeof R=="string"?c=await ae.fromJSON(R):c=await je.fromKeyPair(R):typeof R=="string"&&(c=ae.fromJSON(R))}catch{}}let b=new bn,A=null;if(c)try{const R=await d.get(oe);if(typeof R=="object"&&R!==null)throw new Error("Delegation chain is incorrectly stored. A delegation chain should be stored as a string.");t.identity?b=t.identity:R&&(A=Ze.fromJSON(R),_u(A)?"toDer"in c?b=Qe.fromDelegation(c,A):b=zn.fromDelegation(c,A):(await Ar(d),c=null))}catch(R){console.error(R),await Ar(d),c=null}let U;return!((u=t.idleOptions)===null||u===void 0)&&u.disableIdle?U=void 0:(A||t.identity)&&(U=Vn.create(t.idleOptions)),c||(w===Br?(c=await ae.generate(),await d.set(se,JSON.stringify(c.toJSON()))):(t.storage&&w===Ir&&console.warn(`You are using a custom storage provider that may not support CryptoKey storage. If you are using a custom storage provider that does not support CryptoKey storage, you should use '${Br}' as the key type, as it can serialize to a string`),c=await je.generate(),await d.set(se,c.getKeyPair()))),new this(b,c,A,d,U,t)}_registerDefaultIdleCallback(){var t,r;const i=(t=this._createOptions)===null||t===void 0?void 0:t.idleOptions;!(i!=null&&i.onIdle)&&!(i!=null&&i.disableDefaultIdleCallback)&&((r=this.idleManager)===null||r===void 0||r.registerCallback(()=>{this.logout(),location.reload()}))}async _handleSuccess(t,r){var i,u;const d=t.delegations.map(A=>({delegation:new sn(A.delegation.pubkey,A.delegation.expiration,A.delegation.targets),signature:A.signature.buffer})),w=Ze.fromDelegations(d,t.userPublicKey.buffer),c=this._key;if(!c)return;this._chain=w,"toDer"in c?this._identity=Qe.fromDelegation(c,this._chain):this._identity=zn.fromDelegation(c,this._chain),(i=this._idpWindow)===null||i===void 0||i.close();const b=(u=this._createOptions)===null||u===void 0?void 0:u.idleOptions;!this.idleManager&&!(b!=null&&b.disableIdle)&&(this.idleManager=Vn.create(b),this._registerDefaultIdleCallback()),this._removeEventListener(),delete this._idpWindow,this._chain&&await this._storage.set(oe,JSON.stringify(this._chain.toJSON())),r==null||r(t)}getIdentity(){return this._identity}async isAuthenticated(){return!this.getIdentity().getPrincipal().isAnonymous()&&this._chain!==null}async login(t){var r,i,u,d;const w=BigInt(8)*BigInt(36e11),c=new URL(((r=t==null?void 0:t.identityProvider)===null||r===void 0?void 0:r.toString())||Ku);c.hash=Yu,(i=this._idpWindow)===null||i===void 0||i.close(),this._removeEventListener(),this._eventHandler=this._getEventHandler(c,Object.assign({maxTimeToLive:(u=t==null?void 0:t.maxTimeToLive)!==null&&u!==void 0?u:w},t)),window.addEventListener("message",this._eventHandler),this._idpWindow=(d=window.open(c.toString(),"idpWindow",t==null?void 0:t.windowOpenerFeatures))!==null&&d!==void 0?d:void 0;const b=()=>{this._idpWindow&&(this._idpWindow.closed?this._handleFailure(Wu,t==null?void 0:t.onError):setTimeout(b,Vu))};b()}_getEventHandler(t,r){return async i=>{var u,d,w;if(i.origin!==t.origin){console.warn(`WARNING: expected origin '${t.origin}', got '${i.origin}' (ignoring)`);return}const c=i.data;switch(c.kind){case"authorize-ready":{const b=Object.assign({kind:"authorize-client",sessionPublicKey:new Uint8Array((u=this._key)===null||u===void 0?void 0:u.getPublicKey().toDer()),maxTimeToLive:r==null?void 0:r.maxTimeToLive,allowPinAuthentication:r==null?void 0:r.allowPinAuthentication,derivationOrigin:(d=r==null?void 0:r.derivationOrigin)===null||d===void 0?void 0:d.toString()},r==null?void 0:r.customValues);(w=this._idpWindow)===null||w===void 0||w.postMessage(b,t.origin);break}case"authorize-client-success":try{await this._handleSuccess(c,r==null?void 0:r.onSuccess)}catch(b){this._handleFailure(b.message,r==null?void 0:r.onError)}break;case"authorize-client-failure":this._handleFailure(c.text,r==null?void 0:r.onError);break}}}_handleFailure(t,r){var i;(i=this._idpWindow)===null||i===void 0||i.close(),r==null||r(t),this._removeEventListener(),delete this._idpWindow}_removeEventListener(){this._eventHandler&&window.removeEventListener("message",this._eventHandler),this._eventHandler=void 0}async logout(t={}){if(await Ar(this._storage),this._identity=new bn,this._chain=null,t.returnTo)try{window.history.pushState({},"",t.returnTo)}catch{window.location.href=t.returnTo}}}async function Ar(e){await e.remove(se),await e.remove(oe),await e.remove($u)}document.body.onload=()=>{};var Jn;(Jn=document.getElementById("loginBtn"))==null||Jn.addEventListener("click",async()=>{console.log("clicked");const e=await qu.create();await e.login({identityProvider:"https://identity.ic0.app"});const r=e.getIdentity();console.log(`identity: ${r}`);const i=r.getPrincipal().toString();console.log(`userPrincipal: ${i}`);async function u(d){const w=`/user/ii_auth_callback?account=${d}`;try{const c=await fetch(w);if(!c.ok)throw new Error("Network response was not ok");const b=await c.json();console.log("Success:",b)}catch(c){console.error("Error:",c)}}await u(i)});
